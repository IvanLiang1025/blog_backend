2021-11-14 15:48:56:034 [restartedMain] INFO  com.ivan.sunnyblog.SunnyBlogApplication Starting SunnyBlogApplication on Jinghaos-MacBook-Air.local with PID 17851 (/Users/jinghaoliang/Documents/tech/Project/blogProject/SunnyBlog/target/classes started by jinghaoliang in /Users/jinghaoliang/Documents/tech/Project/blogProject/SunnyBlog)
2021-11-14 15:48:56:035 [restartedMain] INFO  com.ivan.sunnyblog.SunnyBlogApplication No active profile set, falling back to default profiles: default
2021-11-14 15:48:56:052 [restartedMain] INFO  org.springframework.boot.devtools.env.DevToolsPropertyDefaultsPostProcessor Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2021-11-14 15:48:56:052 [restartedMain] INFO  org.springframework.boot.devtools.env.DevToolsPropertyDefaultsPostProcessor For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2021-11-14 15:48:59:430 [restartedMain] INFO  org.springframework.data.repository.config.RepositoryConfigurationDelegate Multiple Spring Data modules found, entering strict repository configuration mode!
2021-11-14 15:48:59:431 [restartedMain] INFO  org.springframework.data.repository.config.RepositoryConfigurationDelegate Bootstrapping Spring Data repositories in DEFAULT mode.
2021-11-14 15:48:59:454 [restartedMain] INFO  org.springframework.data.repository.config.RepositoryConfigurationDelegate Finished Spring Data repository scanning in 16ms. Found 0 repository interfaces.
2021-11-14 15:48:59:586 [restartedMain] INFO  o.s.context.support.PostProcessorRegistrationDelegate$BeanPostProcessorChecker Bean '(inner bean)#6135a355' of type [com.amazonaws.auth.EC2ContainerCredentialsProviderWrapper] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2021-11-14 15:48:59:589 [restartedMain] INFO  o.s.context.support.PostProcessorRegistrationDelegate$BeanPostProcessorChecker Bean '(inner bean)#68450599' of type [com.amazonaws.auth.profile.ProfileCredentialsProvider] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2021-11-14 15:48:59:590 [restartedMain] INFO  o.s.context.support.PostProcessorRegistrationDelegate$BeanPostProcessorChecker Bean 'credentialsProvider' of type [org.springframework.cloud.aws.core.credentials.CredentialsProviderFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2021-11-14 15:48:59:590 [restartedMain] INFO  o.s.context.support.PostProcessorRegistrationDelegate$BeanPostProcessorChecker Bean 'credentialsProvider' of type [com.amazonaws.auth.AWSCredentialsProviderChain] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2021-11-14 15:48:59:615 [restartedMain] INFO  o.s.context.support.PostProcessorRegistrationDelegate$BeanPostProcessorChecker Bean 'org.springframework.transaction.annotation.ProxyTransactionManagementConfiguration' of type [org.springframework.transaction.annotation.ProxyTransactionManagementConfiguration$$EnhancerBySpringCGLIB$$3bd9db8b] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2021-11-14 15:48:59:838 [restartedMain] INFO  org.springframework.boot.web.embedded.tomcat.TomcatWebServer Tomcat initialized with port(s): 8081 (http)
2021-11-14 15:48:59:844 [restartedMain] INFO  org.apache.coyote.http11.Http11NioProtocol Initializing ProtocolHandler ["http-nio-8081"]
2021-11-14 15:48:59:848 [restartedMain] INFO  org.apache.catalina.core.StandardService Starting service [Tomcat]
2021-11-14 15:48:59:848 [restartedMain] INFO  org.apache.catalina.core.StandardEngine Starting Servlet engine: [Apache Tomcat/9.0.21]
2021-11-14 15:48:59:882 [restartedMain] INFO  org.apache.catalina.core.ContainerBase.[Tomcat].[localhost].[/] Initializing Spring embedded WebApplicationContext
2021-11-14 15:48:59:882 [restartedMain] INFO  org.springframework.web.context.ContextLoader Root WebApplicationContext: initialization completed in 3830 ms
2021-11-14 15:49:00:035 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource HikariPool-1 - Starting...
2021-11-14 15:49:00:071 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource HikariPool-1 - Start completed.
2021-11-14 15:49:09:075 [restartedMain] INFO  org.springframework.scheduling.concurrent.ThreadPoolTaskExecutor Initializing ExecutorService 'applicationTaskExecutor'
2021-11-14 15:49:09:234 [restartedMain] INFO  org.springframework.scheduling.concurrent.ThreadPoolTaskScheduler Initializing ExecutorService 'taskScheduler'
2021-11-14 15:49:09:254 [restartedMain] INFO  org.springframework.boot.devtools.autoconfigure.OptionalLiveReloadServer LiveReload server is running on port 35729
2021-11-14 15:49:17:215 [restartedMain] WARN  o.s.boot.web.servlet.context.AnnotationConfigServletWebServerApplicationContext Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'org.springframework.cloud.aws.core.env.ResourceIdResolver.BEAN_NAME': Invocation of init method failed; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'stackResourceRegistryFactoryBean' defined in class path resource [org/springframework/cloud/aws/autoconfigure/context/ContextStackAutoConfiguration.class]: Bean instantiation via factory method failed; nested exception is org.springframework.beans.BeanInstantiationException: Failed to instantiate [org.springframework.cloud.aws.core.env.stack.config.StackResourceRegistryFactoryBean]: Factory method 'stackResourceRegistryFactoryBean' threw exception; nested exception is java.lang.IllegalArgumentException: No valid instance id defined
2021-11-14 15:49:17:222 [restartedMain] INFO  org.springframework.scheduling.concurrent.ThreadPoolTaskScheduler Shutting down ExecutorService 'taskScheduler'
2021-11-14 15:49:17:224 [restartedMain] INFO  org.springframework.scheduling.concurrent.ThreadPoolTaskExecutor Shutting down ExecutorService 'applicationTaskExecutor'
2021-11-14 15:49:17:227 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource HikariPool-1 - Shutdown initiated...
2021-11-14 15:49:17:232 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource HikariPool-1 - Shutdown completed.
2021-11-14 15:49:17:255 [restartedMain] INFO  org.apache.catalina.core.StandardService Stopping service [Tomcat]
2021-11-14 15:49:17:265 [restartedMain] INFO  org.springframework.boot.autoconfigure.logging.ConditionEvaluationReportLoggingListener 

Error starting ApplicationContext. To display the conditions report re-run your application with 'debug' enabled.
2021-11-14 15:49:17:271 [restartedMain] ERROR org.springframework.boot.SpringApplication Application run failed
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'org.springframework.cloud.aws.core.env.ResourceIdResolver.BEAN_NAME': Invocation of init method failed; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'stackResourceRegistryFactoryBean' defined in class path resource [org/springframework/cloud/aws/autoconfigure/context/ContextStackAutoConfiguration.class]: Bean instantiation via factory method failed; nested exception is org.springframework.beans.BeanInstantiationException: Failed to instantiate [org.springframework.cloud.aws.core.env.stack.config.StackResourceRegistryFactoryBean]: Factory method 'stackResourceRegistryFactoryBean' threw exception; nested exception is java.lang.IllegalArgumentException: No valid instance id defined
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1778)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:593)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:515)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:320)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:318)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:845)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:877)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:549)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:140)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:742)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:389)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:311)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1213)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1202)
	at com.ivan.sunnyblog.SunnyBlogApplication.main(SunnyBlogApplication.java:14)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:49)
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'stackResourceRegistryFactoryBean' defined in class path resource [org/springframework/cloud/aws/autoconfigure/context/ContextStackAutoConfiguration.class]: Bean instantiation via factory method failed; nested exception is org.springframework.beans.BeanInstantiationException: Failed to instantiate [org.springframework.cloud.aws.core.env.stack.config.StackResourceRegistryFactoryBean]: Factory method 'stackResourceRegistryFactoryBean' threw exception; nested exception is java.lang.IllegalArgumentException: No valid instance id defined
	at org.springframework.beans.factory.support.ConstructorResolver.instantiate(ConstructorResolver.java:627)
	at org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:607)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1321)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1160)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:555)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:515)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:320)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:318)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.getBeansOfType(DefaultListableBeanFactory.java:606)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.getBeansOfType(DefaultListableBeanFactory.java:594)
	at org.springframework.cloud.aws.core.env.StackResourceRegistryDetectingResourceIdResolver.findSingleOptionalStackResourceRegistry(StackResourceRegistryDetectingResourceIdResolver.java:50)
	at org.springframework.cloud.aws.core.env.StackResourceRegistryDetectingResourceIdResolver.afterPropertiesSet(StackResourceRegistryDetectingResourceIdResolver.java:99)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1837)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1774)
	... 21 common frames omitted
Caused by: org.springframework.beans.BeanInstantiationException: Failed to instantiate [org.springframework.cloud.aws.core.env.stack.config.StackResourceRegistryFactoryBean]: Factory method 'stackResourceRegistryFactoryBean' threw exception; nested exception is java.lang.IllegalArgumentException: No valid instance id defined
	at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:185)
	at org.springframework.beans.factory.support.ConstructorResolver.instantiate(ConstructorResolver.java:622)
	... 36 common frames omitted
Caused by: java.lang.IllegalArgumentException: No valid instance id defined
	at org.springframework.util.Assert.notNull(Assert.java:198)
	at org.springframework.cloud.aws.core.env.stack.config.AutoDetectingStackNameProvider.autoDetectStackName(AutoDetectingStackNameProvider.java:85)
	at org.springframework.cloud.aws.core.env.stack.config.AutoDetectingStackNameProvider.afterPropertiesSet(AutoDetectingStackNameProvider.java:70)
	at org.springframework.cloud.aws.core.env.stack.config.AutoDetectingStackNameProvider.<init>(AutoDetectingStackNameProvider.java:58)
	at org.springframework.cloud.aws.core.env.stack.config.AutoDetectingStackNameProvider.<init>(AutoDetectingStackNameProvider.java:63)
	at org.springframework.cloud.aws.autoconfigure.context.ContextStackAutoConfiguration.stackResourceRegistryFactoryBean(ContextStackAutoConfiguration.java:75)
	at org.springframework.cloud.aws.autoconfigure.context.ContextStackAutoConfiguration$$EnhancerBySpringCGLIB$$4094c337.CGLIB$stackResourceRegistryFactoryBean$0(<generated>)
	at org.springframework.cloud.aws.autoconfigure.context.ContextStackAutoConfiguration$$EnhancerBySpringCGLIB$$4094c337$$FastClassBySpringCGLIB$$4197c45d.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invokeSuper(MethodProxy.java:244)
	at org.springframework.context.annotation.ConfigurationClassEnhancer$BeanMethodInterceptor.intercept(ConfigurationClassEnhancer.java:363)
	at org.springframework.cloud.aws.autoconfigure.context.ContextStackAutoConfiguration$$EnhancerBySpringCGLIB$$4094c337.stackResourceRegistryFactoryBean(<generated>)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:154)
	... 37 common frames omitted
2021-11-14 15:59:56:201 [restartedMain] INFO  com.ivan.sunnyblog.SunnyBlogApplication Starting SunnyBlogApplication on Jinghaos-MacBook-Air.local with PID 17934 (/Users/jinghaoliang/Documents/tech/Project/blogProject/SunnyBlog/target/classes started by jinghaoliang in /Users/jinghaoliang/Documents/tech/Project/blogProject/SunnyBlog)
2021-11-14 15:59:56:202 [restartedMain] INFO  com.ivan.sunnyblog.SunnyBlogApplication No active profile set, falling back to default profiles: default
2021-11-14 15:59:56:223 [restartedMain] INFO  org.springframework.boot.devtools.env.DevToolsPropertyDefaultsPostProcessor Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2021-11-14 15:59:56:223 [restartedMain] INFO  org.springframework.boot.devtools.env.DevToolsPropertyDefaultsPostProcessor For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2021-11-14 15:59:59:603 [restartedMain] INFO  org.springframework.data.repository.config.RepositoryConfigurationDelegate Multiple Spring Data modules found, entering strict repository configuration mode!
2021-11-14 15:59:59:604 [restartedMain] INFO  org.springframework.data.repository.config.RepositoryConfigurationDelegate Bootstrapping Spring Data repositories in DEFAULT mode.
2021-11-14 15:59:59:634 [restartedMain] INFO  org.springframework.data.repository.config.RepositoryConfigurationDelegate Finished Spring Data repository scanning in 23ms. Found 0 repository interfaces.
2021-11-14 15:59:59:755 [restartedMain] INFO  o.s.context.support.PostProcessorRegistrationDelegate$BeanPostProcessorChecker Bean '(inner bean)#59a1b632' of type [com.amazonaws.auth.EC2ContainerCredentialsProviderWrapper] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2021-11-14 15:59:59:758 [restartedMain] INFO  o.s.context.support.PostProcessorRegistrationDelegate$BeanPostProcessorChecker Bean '(inner bean)#23e06dd4' of type [com.amazonaws.auth.profile.ProfileCredentialsProvider] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2021-11-14 15:59:59:759 [restartedMain] INFO  o.s.context.support.PostProcessorRegistrationDelegate$BeanPostProcessorChecker Bean 'credentialsProvider' of type [org.springframework.cloud.aws.core.credentials.CredentialsProviderFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2021-11-14 15:59:59:759 [restartedMain] INFO  o.s.context.support.PostProcessorRegistrationDelegate$BeanPostProcessorChecker Bean 'credentialsProvider' of type [com.amazonaws.auth.AWSCredentialsProviderChain] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2021-11-14 15:59:59:783 [restartedMain] INFO  o.s.context.support.PostProcessorRegistrationDelegate$BeanPostProcessorChecker Bean 'org.springframework.transaction.annotation.ProxyTransactionManagementConfiguration' of type [org.springframework.transaction.annotation.ProxyTransactionManagementConfiguration$$EnhancerBySpringCGLIB$$82315b77] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2021-11-14 15:59:59:998 [restartedMain] INFO  org.springframework.boot.web.embedded.tomcat.TomcatWebServer Tomcat initialized with port(s): 8081 (http)
2021-11-14 16:00:00:005 [restartedMain] INFO  org.apache.coyote.http11.Http11NioProtocol Initializing ProtocolHandler ["http-nio-8081"]
2021-11-14 16:00:00:009 [restartedMain] INFO  org.apache.catalina.core.StandardService Starting service [Tomcat]
2021-11-14 16:00:00:009 [restartedMain] INFO  org.apache.catalina.core.StandardEngine Starting Servlet engine: [Apache Tomcat/9.0.21]
2021-11-14 16:00:00:042 [restartedMain] INFO  org.apache.catalina.core.ContainerBase.[Tomcat].[localhost].[/] Initializing Spring embedded WebApplicationContext
2021-11-14 16:00:00:042 [restartedMain] INFO  org.springframework.web.context.ContextLoader Root WebApplicationContext: initialization completed in 3819 ms
2021-11-14 16:00:00:176 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource HikariPool-1 - Starting...
2021-11-14 16:00:00:206 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource HikariPool-1 - Start completed.
2021-11-14 16:00:09:852 [restartedMain] INFO  org.springframework.scheduling.concurrent.ThreadPoolTaskExecutor Initializing ExecutorService 'applicationTaskExecutor'
2021-11-14 16:00:10:015 [restartedMain] INFO  org.springframework.scheduling.concurrent.ThreadPoolTaskScheduler Initializing ExecutorService 'taskScheduler'
2021-11-14 16:00:10:039 [restartedMain] INFO  org.springframework.boot.devtools.autoconfigure.OptionalLiveReloadServer LiveReload server is running on port 35729
2021-11-14 16:00:10:268 [restartedMain] INFO  org.apache.coyote.http11.Http11NioProtocol Starting ProtocolHandler ["http-nio-8081"]
2021-11-14 16:00:10:283 [restartedMain] INFO  org.springframework.boot.web.embedded.tomcat.TomcatWebServer Tomcat started on port(s): 8081 (http) with context path ''
2021-11-14 16:00:10:285 [restartedMain] INFO  com.ivan.sunnyblog.SunnyBlogApplication Started SunnyBlogApplication in 14.25 seconds (JVM running for 14.545)
2021-11-14 16:02:48:188 [http-nio-8081-exec-1] INFO  org.apache.catalina.core.ContainerBase.[Tomcat].[localhost].[/] Initializing Spring DispatcherServlet 'dispatcherServlet'
2021-11-14 16:02:48:188 [http-nio-8081-exec-1] INFO  org.springframework.web.servlet.DispatcherServlet Initializing Servlet 'dispatcherServlet'
2021-11-14 16:02:48:195 [http-nio-8081-exec-1] INFO  org.springframework.web.servlet.DispatcherServlet Completed initialization in 7 ms
2021-11-14 16:02:48:255 [http-nio-8081-exec-4] INFO  com.ivan.sunnyblog.web.aop.ControllerAspect *** Request Error ***: 2ms GET URI=/api/articles, methodName=com.ivan.sunnyblog.web.controller.ArticleController.getPublicArticles, args=[SearchVo{page=1, limit=10, categoryId=null, total=null}], result=null
2021-11-14 16:02:48:282 [http-nio-8081-exec-4] WARN  org.springframework.web.servlet.mvc.method.annotation.ExceptionHandlerExceptionResolver Resolved [java.lang.NullPointerException]
2021-11-14 16:02:48:507 [http-nio-8081-exec-3] INFO  org.jooq.Constants 
                                      
@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
@@@@@@@@@@@@@@@@  @@        @@@@@@@@@@
@@@@@@@@@@@@@@@@@@@@        @@@@@@@@@@
@@@@@@@@@@@@@@@@  @@  @@    @@@@@@@@@@
@@@@@@@@@@  @@@@  @@  @@    @@@@@@@@@@
@@@@@@@@@@        @@        @@@@@@@@@@
@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
@@@@@@@@@@        @@        @@@@@@@@@@
@@@@@@@@@@    @@  @@  @@@@  @@@@@@@@@@
@@@@@@@@@@    @@  @@  @@@@  @@@@@@@@@@
@@@@@@@@@@        @@  @  @  @@@@@@@@@@
@@@@@@@@@@        @@        @@@@@@@@@@
@@@@@@@@@@@@@@@@@@@@@@@  @@@@@@@@@@@@@
@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@  Thank you for using jOOQ 3.11.11
                                      
2021-11-14 16:02:48:554 [http-nio-8081-exec-3] INFO  com.ivan.sunnyblog.web.aop.ControllerAspect *** Request Success ***: 311ms GET URI=/api/categories, methodName=com.ivan.sunnyblog.web.controller.CategoryContoller.getCategories, args=[], result=ResultInfo{info='null', status=0, data=[CategoryVo{categoryId=2, name='liddffd', articleCount=1}, CategoryVo{categoryId=1, name='Life ', articleCount=1}], total=null}
2021-11-14 16:02:48:573 [http-nio-8081-exec-6] INFO  com.ivan.sunnyblog.web.aop.ControllerAspect *** Request Error ***: 0ms GET URI=/api/articles, methodName=com.ivan.sunnyblog.web.controller.ArticleController.getPublicArticles, args=[SearchVo{page=1, limit=10, categoryId=2, total=null}], result=null
2021-11-14 16:02:48:574 [http-nio-8081-exec-6] WARN  org.springframework.web.servlet.mvc.method.annotation.ExceptionHandlerExceptionResolver Resolved [java.lang.NullPointerException]
2021-11-14 16:04:45:208 [Thread-36] INFO  org.springframework.scheduling.concurrent.ThreadPoolTaskScheduler Shutting down ExecutorService 'taskScheduler'
2021-11-14 16:04:45:209 [Thread-36] INFO  org.springframework.scheduling.concurrent.ThreadPoolTaskExecutor Shutting down ExecutorService 'applicationTaskExecutor'
2021-11-14 16:04:45:209 [Thread-36] INFO  com.zaxxer.hikari.HikariDataSource HikariPool-1 - Shutdown initiated...
2021-11-14 16:04:45:211 [Thread-36] INFO  com.zaxxer.hikari.HikariDataSource HikariPool-1 - Shutdown completed.
2021-11-14 20:25:13:001 [restartedMain] INFO  com.ivan.sunnyblog.SunnyBlogApplication Starting SunnyBlogApplication on Jinghaos-MacBook-Air.local with PID 20238 (/Users/jinghaoliang/Documents/tech/Project/blogProject/SunnyBlog/target/classes started by jinghaoliang in /Users/jinghaoliang/Documents/tech/Project/blogProject/SunnyBlog)
2021-11-14 20:25:13:003 [restartedMain] INFO  com.ivan.sunnyblog.SunnyBlogApplication No active profile set, falling back to default profiles: default
2021-11-14 20:25:13:020 [restartedMain] INFO  org.springframework.boot.devtools.env.DevToolsPropertyDefaultsPostProcessor Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2021-11-14 20:25:13:020 [restartedMain] INFO  org.springframework.boot.devtools.env.DevToolsPropertyDefaultsPostProcessor For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2021-11-14 20:25:13:338 [restartedMain] INFO  org.springframework.data.repository.config.RepositoryConfigurationDelegate Multiple Spring Data modules found, entering strict repository configuration mode!
2021-11-14 20:25:13:340 [restartedMain] INFO  org.springframework.data.repository.config.RepositoryConfigurationDelegate Bootstrapping Spring Data repositories in DEFAULT mode.
2021-11-14 20:25:13:366 [restartedMain] INFO  org.springframework.data.repository.config.RepositoryConfigurationDelegate Finished Spring Data repository scanning in 19ms. Found 0 repository interfaces.
2021-11-14 20:25:13:520 [restartedMain] INFO  o.s.context.support.PostProcessorRegistrationDelegate$BeanPostProcessorChecker Bean 'org.springframework.transaction.annotation.ProxyTransactionManagementConfiguration' of type [org.springframework.transaction.annotation.ProxyTransactionManagementConfiguration$$EnhancerBySpringCGLIB$$f5ce3c02] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2021-11-14 20:25:13:691 [restartedMain] INFO  org.springframework.boot.web.embedded.tomcat.TomcatWebServer Tomcat initialized with port(s): 8081 (http)
2021-11-14 20:25:13:698 [restartedMain] INFO  org.apache.coyote.http11.Http11NioProtocol Initializing ProtocolHandler ["http-nio-8081"]
2021-11-14 20:25:13:703 [restartedMain] INFO  org.apache.catalina.core.StandardService Starting service [Tomcat]
2021-11-14 20:25:13:703 [restartedMain] INFO  org.apache.catalina.core.StandardEngine Starting Servlet engine: [Apache Tomcat/9.0.21]
2021-11-14 20:25:13:767 [restartedMain] INFO  org.apache.catalina.core.ContainerBase.[Tomcat].[localhost].[/] Initializing Spring embedded WebApplicationContext
2021-11-14 20:25:13:767 [restartedMain] INFO  org.springframework.web.context.ContextLoader Root WebApplicationContext: initialization completed in 747 ms
2021-11-14 20:25:13:925 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource HikariPool-1 - Starting...
2021-11-14 20:25:13:963 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource HikariPool-1 - Start completed.
2021-11-14 20:25:48:562 [restartedMain] INFO  org.springframework.scheduling.concurrent.ThreadPoolTaskExecutor Initializing ExecutorService 'applicationTaskExecutor'
2021-11-14 20:25:48:729 [restartedMain] INFO  org.springframework.scheduling.concurrent.ThreadPoolTaskScheduler Initializing ExecutorService 'taskScheduler'
2021-11-14 20:25:48:748 [restartedMain] INFO  org.springframework.boot.devtools.autoconfigure.OptionalLiveReloadServer LiveReload server is running on port 35729
2021-11-14 20:25:48:802 [restartedMain] INFO  org.apache.coyote.http11.Http11NioProtocol Starting ProtocolHandler ["http-nio-8081"]
2021-11-14 20:25:48:816 [restartedMain] INFO  org.springframework.boot.web.embedded.tomcat.TomcatWebServer Tomcat started on port(s): 8081 (http) with context path ''
2021-11-14 20:25:48:817 [restartedMain] INFO  com.ivan.sunnyblog.SunnyBlogApplication Started SunnyBlogApplication in 35.971 seconds (JVM running for 36.455)
2021-11-14 20:27:09:502 [http-nio-8081-exec-1] INFO  org.apache.catalina.core.ContainerBase.[Tomcat].[localhost].[/] Initializing Spring DispatcherServlet 'dispatcherServlet'
2021-11-14 20:27:09:502 [http-nio-8081-exec-1] INFO  org.springframework.web.servlet.DispatcherServlet Initializing Servlet 'dispatcherServlet'
2021-11-14 20:27:09:508 [http-nio-8081-exec-1] INFO  org.springframework.web.servlet.DispatcherServlet Completed initialization in 6 ms
2021-11-14 20:27:09:712 [http-nio-8081-exec-2] INFO  org.jooq.Constants 
                                      
@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
@@@@@@@@@@@@@@@@  @@        @@@@@@@@@@
@@@@@@@@@@@@@@@@@@@@        @@@@@@@@@@
@@@@@@@@@@@@@@@@  @@  @@    @@@@@@@@@@
@@@@@@@@@@  @@@@  @@  @@    @@@@@@@@@@
@@@@@@@@@@        @@        @@@@@@@@@@
@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
@@@@@@@@@@        @@        @@@@@@@@@@
@@@@@@@@@@    @@  @@  @@@@  @@@@@@@@@@
@@@@@@@@@@    @@  @@  @@@@  @@@@@@@@@@
@@@@@@@@@@        @@  @  @  @@@@@@@@@@
@@@@@@@@@@        @@        @@@@@@@@@@
@@@@@@@@@@@@@@@@@@@@@@@  @@@@@@@@@@@@@
@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@  Thank you for using jOOQ 3.11.11
                                      
2021-11-14 20:27:09:769 [http-nio-8081-exec-2] INFO  com.ivan.sunnyblog.web.aop.ControllerAspect *** Request Success ***: 227ms GET URI=/api/articles, methodName=com.ivan.sunnyblog.web.controller.ArticleController.getPublicArticles, args=[SearchVo{page=1, limit=10, categoryId=null, total=null}], result=ResultInfo{info='null', status=0, data=[ArticleVo{userInfo=UserInfoVo{userId=100001, nickName='ivan', userName='ivan'}, category=CategoryVo{categoryId=1, name='Life ', articleCount=null}, BaseArticleVo{articleId=10005, status=1, title='dd', description='This is the doc of React markdown editor lite.
Enjoy!!', content='null', firstPicture='', viewCount=0, createDate='Sun Nov 07 14:09:29 EST 2021', updateDate='Mon Nov 08 09:15:09 EST 2021'}}, ArticleVo{userInfo=UserInfoVo{userId=100001, nickName='ivan', userName='ivan'}, category=CategoryVo{categoryId=2, name='liddffd', articleCount=null}, BaseArticleVo{articleId=10004, status=1, title='Spring boot', description='rerwerwer', content='null', firstPicture='null', viewCount=4, createDate='Tue Oct 12 15:58:26 EDT 2021', updateDate='Fri Nov 12 00:48:00 EST 2021'}}], total=2}
2021-11-14 20:27:23:904 [http-nio-8081-exec-4] INFO  com.ivan.sunnyblog.web.aop.ControllerAspect *** Request Error ***: 27ms POST URI=/api/login, methodName=com.ivan.sunnyblog.web.controller.AccountController.login, args=[LoginVo{username='test', password='111111'}], result=null
2021-11-14 20:27:23:907 [http-nio-8081-exec-4] WARN  org.springframework.web.servlet.mvc.method.annotation.ExceptionHandlerExceptionResolver Resolved [com.ivan.sunnyblog.base.exception.BizException: Invalid username or password.]
2021-11-14 20:27:32:450 [http-nio-8081-exec-5] INFO  io.lettuce.core.EpollProvider Starting without optional epoll library
2021-11-14 20:27:32:451 [http-nio-8081-exec-5] INFO  io.lettuce.core.KqueueProvider Starting without optional kqueue library
2021-11-14 20:27:32:694 [http-nio-8081-exec-5] INFO  com.ivan.sunnyblog.web.aop.ControllerAspect *** Request Success ***: 360ms POST URI=/api/login, methodName=com.ivan.sunnyblog.web.controller.AccountController.login, args=[LoginVo{username='test', password='123456'}], result=ResultInfo{info='null', status=0, data=LoginResultVo{accessToken='eyJhbGciOiJIUzI1NiJ9.eyJleHAiOjE2MzY5NTQwNTIsInVzZXJJZCI6MTAwMDAzLCJpYXQiOjE2MzY5Mzk2NTJ9.hgkqDkL-_2-Tl3HpR4v_GWM-ORfpKBUri3h-OjOCYlQ', role=0}, total=null}
2021-11-14 20:27:32:730 [http-nio-8081-exec-7] INFO  com.ivan.sunnyblog.web.aop.ControllerAspect *** Request Success ***: 5ms GET URI=/api/admin/article, methodName=com.ivan.sunnyblog.web.controller.ArticleController.getArticleList, args=[SearchVo{page=1, limit=20, categoryId=null, total=null}], result=ResultInfo{info='null', status=0, data=[ArticleVo{userInfo=UserInfoVo{userId=100001, nickName='ivan', userName='ivan'}, category=CategoryVo{categoryId=1, name='Life ', articleCount=null}, BaseArticleVo{articleId=10005, status=1, title='dd', description='This is the doc of React markdown editor lite.
Enjoy!!', content='null', firstPicture='', viewCount=0, createDate='Sun Nov 07 14:09:29 EST 2021', updateDate='Mon Nov 08 09:15:09 EST 2021'}}, ArticleVo{userInfo=UserInfoVo{userId=100001, nickName='ivan', userName='ivan'}, category=CategoryVo{categoryId=2, name='liddffd', articleCount=null}, BaseArticleVo{articleId=10004, status=1, title='Spring boot', description='rerwerwer', content='null', firstPicture='null', viewCount=4, createDate='Tue Oct 12 15:58:26 EDT 2021', updateDate='Fri Nov 12 00:48:00 EST 2021'}}, ArticleVo{userInfo=UserInfoVo{userId=100001, nickName='ivan', userName='ivan'}, category=CategoryVo{categoryId=1, name='Life ', articleCount=null}, BaseArticleVo{articleId=10003, status=0, title='dd', description='test', content='null', firstPicture='null', viewCount=0, createDate='Tue Oct 12 15:57:33 EDT 2021', updateDate='Tue Oct 12 15:57:33 EDT 2021'}}], total=null}
2021-11-14 20:27:37:394 [http-nio-8081-exec-1] INFO  com.ivan.sunnyblog.web.aop.ControllerAspect *** Request Success ***: 5ms GET URI=/api/admin/category, methodName=com.ivan.sunnyblog.web.controller.CategoryContoller.getCategoryList, args=[SearchVo{page=1, limit=10, categoryId=null, total=null}], result=ResultInfo{info='null', status=0, data=[Category (1, Life ), Category (2, liddffd)], total=null}
2021-11-14 20:27:37:402 [http-nio-8081-exec-10] INFO  com.ivan.sunnyblog.web.aop.ControllerAspect *** Request Success ***: 11ms GET URI=/api/admin/article/10005, methodName=com.ivan.sunnyblog.web.controller.ArticleController.getArticleDetail, args=[10005], result=ResultInfo{info='null', status=0, data=ArticleDetailVo{categoryId=1, BaseArticleVo{articleId=10005, status=1, title='dd', description='This is the doc of React markdown editor lite.
Enjoy!!', content='| Head | Head | Head | Head |
| --- | --- | --- | --- |
| Data | Data | Data | Data |
| Data | Data | Data | Data |

## æ‰‹æŠŠæ‰‹æ•™ä½ å†™ä¸€ä¸ªmarkdownç¼–è¾‘å™¨

> ç¬”è€…åœ¨18å¹´å¹´æœ«çš„æ—¶å€™æŽ¥åˆ°ä¸€ä¸ªå¼€å‘ä»»åŠ¡â€”â€”æ­å»ºä¸€ä¸ªAIé¡¹ç›®çš„å¼€æ”¾å¹³å°ï¼Œå…¶ä¸­çš„äº§å“æ–‡æ¡£ä¸ºè½¬åŒ–ä¸ºHTMLæ ¼å¼çš„markdownæ–‡æ¡£ã€‚è€ƒè™‘åˆ°æ–‡æ¡£çš„å³æ—¶æ›´æ–°ï¼Œå°†æ–‡æ¡£ä¿¡æ¯åšæˆäº†AjaxæŽ¥å£çš„å½¢å¼ã€‚å› æ­¤ç®¡ç†åŽå°åªéœ€å°†textareaè¡¨å•çš„å†…å®¹é€šè¿‡markdownè§£æžå™¨è¿›è¡ŒHTMLæ ¼å¼è½¬åŒ–ï¼Œç„¶åŽå°†markdownå†…å®¹å’Œç»è½¬åŒ–çš„HTMLæ–‡æ¡£éƒ½ä¿å­˜åˆ°æ•°æ®åº“å³å¯ã€‚
> åŸºæœ¬éœ€æ±‚å®ŒæˆåŽï¼Œä¸ºäº†æ›´å¥½çš„ç”¨æˆ·ä½“éªŒï¼Œè€ƒè™‘å°†å¸¸ç”¨çš„ç¼–è¾‘åŠŸèƒ½æ·»åŠ è¿›æ¥ã€‚æ”¹è¿›ç‰ˆä¸ä»…æ”¯æŒäº†å¸¸ç”¨çš„æ–‡æœ¬ç¼–è¾‘åŠŸèƒ½ï¼Œè¿˜å®žçŽ°çš„UIç•Œé¢çš„é…ç½®åŒ–ï¼Œè‡ªå®šä¹‰è¯­æ³•è§£æžå™¨ã€‚æœ¬ç€é€ ç¦ä¼¸æ‰‹å…šçš„ç›®çš„ï¼Œä»¥åŠç§¯ç´¯äº›å¼€æºç»éªŒï¼Œç¬”è€…å°†è¯¥react ç»„ä»¶ [react-markdown-editor-lite](https://github.com/HarryChen0506/react-markdown-editor-lite) è¿›è¡Œäº†å°è£…æ”¹é€ ï¼Œå¹¶ä¸”å‘å¸ƒåˆ°äº†å¼€æºç¤¾åŒºã€‚

### é¢„è§ˆ
åœ¨çº¿ä½“éªŒ [https://harrychen0506.github.io/react-markdown-editor-lite/](https://harrychen0506.github.io/react-markdown-editor-lite/)

![image](https://github.com//HarryChen0506/react-markdown-editor-lite/blob/master/image/react-markdown-editor-lite-v1.0.0.PNG?raw=true)

### ç‰¹ç‚¹
* è½»é‡ã€åŸºäºŽReact
* UIå¯é…ç½®, å¦‚åªæ˜¾ç¤ºç¼–è¾‘åŒºæˆ–é¢„è§ˆåŒº
* æ”¯æŒè‡ªå®šä¹‰markdownè¯­æ³•è§£æžå™¨,è¯­æ³•é«˜äº®ç­‰
* æ”¯æŒå¸¸ç”¨çš„markdownç¼–è¾‘åŠŸèƒ½ï¼Œå¦‚åŠ ç²—ï¼Œæ–œä½“ç­‰ç­‰...
* æ”¯æŒåŠŸèƒ½æŒ‰é’®æ’æ‹”åŒ–ï¼Œç”¨æˆ·å¯ä»¥è‡ªå®šä¹‰æ‰©å±•ç»„ä»¶
* æ”¯æŒç¼–è¾‘åŒºå’Œé¢„è§ˆåŒºåŒæ­¥æ»šåŠ¨

### å¼€å‘å¿ƒå¾—

- æ–‡æœ¬ç¼–è¾‘

  å¤§å¤šæ•°å¸¸è§çš„ç¼–è¾‘å™¨ï¼ŒåŒ…æ‹¬å¯Œæ–‡æœ¬ç¼–è¾‘å™¨ï¼Œåˆ©ç”¨äº†æŸäº›å…ƒç´ å¦‚divçš„contenteditableå±žæ€§ï¼Œé…åˆselectionã€rangeã€execCommandç­‰APIï¼Œå®žçŽ°äº†å¯Œæ–‡æœ¬ç¼–è¾‘åŠŸèƒ½ã€‚è¿™é‡Œé¢çš„å®žçŽ°æ¯”è¾ƒå¤æ‚ï¼Œæ‰€ä»¥æœ‰äº†"[ä¸ºä»€ä¹ˆéƒ½è¯´å¯Œæ–‡æœ¬ç¼–è¾‘å™¨æ˜¯å¤©å‘ï¼Ÿ](https://www.zhihu.com/question/38699645)"è¿™ä¸ªè¯´æ³•ã€‚

  è€Œmarkdownç¼–è¾‘å™¨ï¼Œæ ¸å¿ƒçš„å¤„ç†å†…å®¹ä¸ºç®€å•è¯­æ³•çš„çº¯æ–‡æœ¬ï¼Œå¤æ‚åº¦ç›¸å¯¹æ¥è¯´æ¯”è¾ƒä½Žï¼Œå¹¶ä¸”inputæ ‡ç­¾è‡ªå¸¦onSelectäº‹ä»¶ï¼Œå¯ä»¥å¾ˆæ–¹ä¾¿çš„èŽ·å–é€‰æ‹©ä¿¡æ¯ï¼ˆé€‰æ‹©èµ·å§‹ä½ç½®å’Œé€‰æ‹©æ–‡æœ¬å€¼ï¼‰ï¼Œå› æ­¤è¦æƒ³å®žçŽ°ç¼–è¾‘åŠŸèƒ½ï¼Œåªéœ€å°†è¦æ”¹åŠ¨çš„å†…å®¹è¿›è¡Œæ–‡æœ¬è½¬æ¢ï¼Œç„¶åŽè¿›è¡Œé‡æ–°æ‹¼æŽ¥é¦–å°¾ï¼Œå¤§åŠŸå‘Šæˆã€‚
  
- markdownè§£æž

  è€ƒå¯Ÿäº†å‡ ä¸ªç¤¾åŒºæµè¡Œçš„markdownè§£æžå™¨ï¼Œæ¯”è¾ƒæµè¡Œçš„æœ‰[markdown](https://www.npmjs.com/package/markdown), [markdown-it](https://www.npmjs.com/package/markdown-it), [marked](https://www.npmjs.com/package/marked) ç­‰ç­‰ã€‚ç»¼åˆè€ƒè™‘æ‰©å±•æ€§ä»¥åŠç¨³å®šæ€§ï¼Œç¬”è€…æŽ¨èä½¿ç”¨markdown-itä½œä¸ºmarkdownçš„è¯æ³•è§£æžå™¨ï¼Œå› ä¸ºè¯¥è§£æžå™¨æœ‰æ¯”è¾ƒå¤šçš„æ’ä»¶ï¼Œå¹¶ä¸”æ”¯æŒè¯­æ³•é«˜äº®ã€‚

- åŒæ­¥æ»šåŠ¨

  å½“é€‰æ‹©åˆ†æ ç¼–è¾‘çš„æ—¶å€™ï¼Œæ»šåŠ¨å·¦ä¾§çš„ç¼–è¾‘åŒºï¼Œå³ä¾§çš„é¢„è§ˆåŒºèƒ½è‡ªåŠ¨æ»šåŠ¨åˆ°å¯¹åº”çš„åŒºåŸŸã€‚æ–¹æ¡ˆå‚è€ƒäº†ã€Š[æ‰‹æŠŠæ‰‹æ•™ä½ ç”¨ 100è¡Œä»£ç å®žçŽ°åŸºäºŽ reactçš„ markdown è¾“å…¥ + å³æ—¶é¢„è§ˆåœ¨çº¿ç¼–è¾‘å™¨ï¼ˆä¸€ï¼‰](https://github.com/accforgit/blog-data/blob/master/%E5%9C%A8%E7%BA%BF%E7%BC%96%E8%BE%91%E5%99%A8/README/README1.md)ã€‹ã€‚åªéœ€å…ˆè®¡ç®—å‡ºè¾“å…¥æ¡†å®¹å™¨å…ƒç´ ä¸Žé¢„è§ˆæ¡†å®¹å™¨å…ƒç´ ä¹‹é—´æœ€å¤§scrollèŒƒå›´çš„æ¯”ä¾‹å€¼ï¼Œç„¶åŽæ ¹æ®ä¸»åŠ¨æ»šåŠ¨å…ƒç´ è‡ªèº«çš„scrollTopåšç›¸åº”çš„æ¯”ä¾‹æ¢ç®—ï¼Œå³å¯çŸ¥é“å¯¹æ–¹åŒºåŸŸçš„scrollTopå€¼ã€‚

- å…³äºŽUI
 
  - é¡¹ç›®çš„å­—ä½“åº“é€‰æ‹©äº†Font Awesomeé£Žæ ¼ï¼Œå¹¶ä¸”åªé€‰å–äº†é¡¹ç›®æ‰€éœ€è¦çš„ä¸€äº›å›¾æ ‡ã€‚
  - ç¼–è¾‘å™¨çš„æ•´ä½“csså‡å¯é€šè¿‡å…¨å±€è¦†ç›–çš„å½¢å¼è¿›è¡Œè‡ªå®šä¹‰ã€‚ç›®å‰æš‚æ—¶åªæ”¯æŒç°è‰²ä¸»é¢˜ã€‚
  - ç¼–è¾‘å™¨çš„æ˜¾ç¤ºåŒºåŸŸåŒ…æ‹¬èœå•æ ï¼Œç¼–è¾‘å™¨ï¼Œé¢„è§ˆåŒºï¼Œå·¥å…·æ ï¼Œé€šè¿‡é…ç½®ç»„ä»¶çš„configå±žæ€§ï¼Œå¯ä»¥é€‰æ‹©é»˜è®¤çš„å±•ç¤ºåŒºåŸŸã€‚
  
### Install

```js
npm install react-markdown-editor-lite --save
```

### Props

| Property | Description | Type | default | Remarks |
| --- | --- | --- | --- | --- |
| value | markdown content | String | '' | required |
| style | component container style | Object | {height: '100%'} | not required |
| config | component config | Object | {view: {...}, logger: {...}} | not required |
| onChange | emitting when editor has changed | Function | ({html, md}) => {} | not required |
| onImageUpload | when image uploaded, callback emitting will get image markdown text | (file: File, callback: (url: string) => void) => void; | ({file, callback}) => {} | not required |
| renderHTML | Render markdown text to HTML. You can return either string, function or Promise | (text: string) => string|function|Promise | none | **required** |

### Example

``` js
'use strict';
import React from 'react'
import ReactDOM from 'react-dom'
import MdEditor from 'react-markdown-editor-lite'
import MarkdownIt from 'markdown-it'
import emoji from 'markdown-it-emoji'
import subscript from 'markdown-it-sub'
import superscript from 'markdown-it-sup'
import footnote from 'markdown-it-footnote'
import deflist from 'markdown-it-deflist'
import abbreviation from 'markdown-it-abbr'
import insert from 'markdown-it-ins'
import mark from 'markdown-it-mark'
import tasklists from 'markdown-it-task-lists'
import hljs from 'highlight.js'
import 'highlight.js/styles/atom-one-light.css'
// import 'highlight.js/styles/github.css'
import './index.less';

const MOCK_DATA = "I Love React."
export default class Demo extends React.Component {
  mdEditor = null
  mdParser = null
  constructor(props) {
    super(props)
    // initial a parsera
    this.mdParser = new MarkdownIt({
      html: true,
      linkify: true,
      typographer: true,
      highlight: function (str, lang) {
        if (lang && hljs.getLanguage(lang)) {
          try {
            return hljs.highlight(lang, str).value
          } catch (__) {}
        }    
        return '' // use external default escaping
      }
    })
    .use(emoji)
    .use(subscript)
    .use(superscript)
    .use(footnote)
    .use(deflist)
    .use(abbreviation)
    .use(insert)
    .use(mark)
    .use(tasklists, { enabled: this.taskLists })
    this.renderHTML = this.renderHTML.bind(this)
  }
  handleEditorChange({html, md}) {
    console.log('handleEditorChange', html, md)
  }
  handleImageUpload(file, callback) {
    const reader = new FileReader()
    reader.onload = () => {      
      const convertBase64UrlToBlob = (urlData) => {  
        let arr = urlData.split(','), mime = arr[0].match(/:(.*?);/)[1]
        let bstr = atob(arr[1])
        let n = bstr.length
        let u8arr = new Uint8Array(n)
        while (n--) {
          u8arr[n] = bstr.charCodeAt(n)
        }
        return new Blob([u8arr], {type:mime})
      }
      const blob = convertBase64UrlToBlob(reader.result)
      setTimeout(() => {
        // setTimeout æ¨¡æ‹Ÿå¼‚æ­¥ä¸Šä¼ å›¾ç‰‡
        // å½“å¼‚æ­¥ä¸Šä¼ èŽ·å–å›¾ç‰‡åœ°å€åŽï¼Œæ‰§è¡Œcalbackå›žè°ƒï¼ˆå‚æ•°ä¸ºimageUrlå­—ç¬¦ä¸²ï¼‰ï¼Œå³å¯å°†å›¾ç‰‡åœ°å€å†™å…¥markdown
        callback('https://avatars0.githubusercontent.com/u/21263805?s=40&v=4')
      }, 1000)
    }
    reader.readAsDataURL(file)
  }
  renderHTML(text) {
    // æ¨¡æ‹Ÿå¼‚æ­¥æ¸²æŸ“Markdown
    return new Promise((resolve) => {
      setTimeout(() => {
        resolve(this.mdParser.render(text))
      }, 1000)
    })
  }
  handleGetMdValue = () => {   
    this.mdEditor && alert(this.mdEditor.getMdValue())      
  }
  handleGetHtmlValue = () => {    
    this.mdEditor && alert(this.mdEditor.getHtmlValue())
  }
  render() {
    return (      
      <div>
        <nav>
          <button onClick={this.handleGetMdValue} >getMdValue</button>  
          <button onClick={this.handleGetHtmlValue} >getHtmlValue</button>  
        </nav>
        <section style="height: 500px">
          <MdEditor 
            ref={node => this.mdEditor = node}
            value={MOCK_DATA}
            style={{height: '400px'}}
            renderHTML={this.renderHTML}
            config={{
              view: {
                menu: true,
                md: true,
                html: true
              },
              imageUrl: 'https://octodex.github.com/images/minion.png'
            }}
            onChange={this.handleEditorChange} 
            onImageUpload={this.handleImageUpload}
          />
        </section>                        
      </div>      
    )
  }
}
```

### æœ€åŽ

   æ¬¢è¿Žå¤§å®¶ä½¿ç”¨å’Œåé¦ˆï¼Œ[é¡¹ç›®åœ°å€](https://github.com/HarryChen0506/react-markdown-editor-lite) (https://github.com/HarryChen0506/react-markdown-editor-lite)ï¼Œ ä½ çš„ç‚¹èµžå°†æ˜¯æˆ‘èŽ«å¤§çš„åŠ¨åŠ›ðŸ˜Š

', firstPicture='', viewCount=0, createDate='Sun Nov 07 14:09:29 EST 2021', updateDate='Mon Nov 08 09:15:09 EST 2021'}}, total=null}
2021-11-14 20:45:06:146 [http-nio-8081-exec-5] INFO  com.ivan.sunnyblog.web.aop.ControllerAspect *** Request Success ***: 2ms GET URI=/api/admin/category, methodName=com.ivan.sunnyblog.web.controller.CategoryContoller.getCategoryList, args=[SearchVo{page=1, limit=10, categoryId=null, total=null}], result=ResultInfo{info='null', status=0, data=[Category (1, Life ), Category (2, liddffd)], total=null}
2021-11-14 20:45:06:159 [http-nio-8081-exec-4] INFO  com.ivan.sunnyblog.web.aop.ControllerAspect *** Request Success ***: 15ms GET URI=/api/admin/article/10005, methodName=com.ivan.sunnyblog.web.controller.ArticleController.getArticleDetail, args=[10005], result=ResultInfo{info='null', status=0, data=ArticleDetailVo{categoryId=1, BaseArticleVo{articleId=10005, status=1, title='dd', description='This is the doc of React markdown editor lite.
Enjoy!!', content='| Head | Head | Head | Head |
| --- | --- | --- | --- |
| Data | Data | Data | Data |
| Data | Data | Data | Data |

## æ‰‹æŠŠæ‰‹æ•™ä½ å†™ä¸€ä¸ªmarkdownç¼–è¾‘å™¨

> ç¬”è€…åœ¨18å¹´å¹´æœ«çš„æ—¶å€™æŽ¥åˆ°ä¸€ä¸ªå¼€å‘ä»»åŠ¡â€”â€”æ­å»ºä¸€ä¸ªAIé¡¹ç›®çš„å¼€æ”¾å¹³å°ï¼Œå…¶ä¸­çš„äº§å“æ–‡æ¡£ä¸ºè½¬åŒ–ä¸ºHTMLæ ¼å¼çš„markdownæ–‡æ¡£ã€‚è€ƒè™‘åˆ°æ–‡æ¡£çš„å³æ—¶æ›´æ–°ï¼Œå°†æ–‡æ¡£ä¿¡æ¯åšæˆäº†AjaxæŽ¥å£çš„å½¢å¼ã€‚å› æ­¤ç®¡ç†åŽå°åªéœ€å°†textareaè¡¨å•çš„å†…å®¹é€šè¿‡markdownè§£æžå™¨è¿›è¡ŒHTMLæ ¼å¼è½¬åŒ–ï¼Œç„¶åŽå°†markdownå†…å®¹å’Œç»è½¬åŒ–çš„HTMLæ–‡æ¡£éƒ½ä¿å­˜åˆ°æ•°æ®åº“å³å¯ã€‚
> åŸºæœ¬éœ€æ±‚å®ŒæˆåŽï¼Œä¸ºäº†æ›´å¥½çš„ç”¨æˆ·ä½“éªŒï¼Œè€ƒè™‘å°†å¸¸ç”¨çš„ç¼–è¾‘åŠŸèƒ½æ·»åŠ è¿›æ¥ã€‚æ”¹è¿›ç‰ˆä¸ä»…æ”¯æŒäº†å¸¸ç”¨çš„æ–‡æœ¬ç¼–è¾‘åŠŸèƒ½ï¼Œè¿˜å®žçŽ°çš„UIç•Œé¢çš„é…ç½®åŒ–ï¼Œè‡ªå®šä¹‰è¯­æ³•è§£æžå™¨ã€‚æœ¬ç€é€ ç¦ä¼¸æ‰‹å…šçš„ç›®çš„ï¼Œä»¥åŠç§¯ç´¯äº›å¼€æºç»éªŒï¼Œç¬”è€…å°†è¯¥react ç»„ä»¶ [react-markdown-editor-lite](https://github.com/HarryChen0506/react-markdown-editor-lite) è¿›è¡Œäº†å°è£…æ”¹é€ ï¼Œå¹¶ä¸”å‘å¸ƒåˆ°äº†å¼€æºç¤¾åŒºã€‚

### é¢„è§ˆ
åœ¨çº¿ä½“éªŒ [https://harrychen0506.github.io/react-markdown-editor-lite/](https://harrychen0506.github.io/react-markdown-editor-lite/)

![image](https://github.com//HarryChen0506/react-markdown-editor-lite/blob/master/image/react-markdown-editor-lite-v1.0.0.PNG?raw=true)

### ç‰¹ç‚¹
* è½»é‡ã€åŸºäºŽReact
* UIå¯é…ç½®, å¦‚åªæ˜¾ç¤ºç¼–è¾‘åŒºæˆ–é¢„è§ˆåŒº
* æ”¯æŒè‡ªå®šä¹‰markdownè¯­æ³•è§£æžå™¨,è¯­æ³•é«˜äº®ç­‰
* æ”¯æŒå¸¸ç”¨çš„markdownç¼–è¾‘åŠŸèƒ½ï¼Œå¦‚åŠ ç²—ï¼Œæ–œä½“ç­‰ç­‰...
* æ”¯æŒåŠŸèƒ½æŒ‰é’®æ’æ‹”åŒ–ï¼Œç”¨æˆ·å¯ä»¥è‡ªå®šä¹‰æ‰©å±•ç»„ä»¶
* æ”¯æŒç¼–è¾‘åŒºå’Œé¢„è§ˆåŒºåŒæ­¥æ»šåŠ¨

### å¼€å‘å¿ƒå¾—

- æ–‡æœ¬ç¼–è¾‘

  å¤§å¤šæ•°å¸¸è§çš„ç¼–è¾‘å™¨ï¼ŒåŒ…æ‹¬å¯Œæ–‡æœ¬ç¼–è¾‘å™¨ï¼Œåˆ©ç”¨äº†æŸäº›å…ƒç´ å¦‚divçš„contenteditableå±žæ€§ï¼Œé…åˆselectionã€rangeã€execCommandç­‰APIï¼Œå®žçŽ°äº†å¯Œæ–‡æœ¬ç¼–è¾‘åŠŸèƒ½ã€‚è¿™é‡Œé¢çš„å®žçŽ°æ¯”è¾ƒå¤æ‚ï¼Œæ‰€ä»¥æœ‰äº†"[ä¸ºä»€ä¹ˆéƒ½è¯´å¯Œæ–‡æœ¬ç¼–è¾‘å™¨æ˜¯å¤©å‘ï¼Ÿ](https://www.zhihu.com/question/38699645)"è¿™ä¸ªè¯´æ³•ã€‚

  è€Œmarkdownç¼–è¾‘å™¨ï¼Œæ ¸å¿ƒçš„å¤„ç†å†…å®¹ä¸ºç®€å•è¯­æ³•çš„çº¯æ–‡æœ¬ï¼Œå¤æ‚åº¦ç›¸å¯¹æ¥è¯´æ¯”è¾ƒä½Žï¼Œå¹¶ä¸”inputæ ‡ç­¾è‡ªå¸¦onSelectäº‹ä»¶ï¼Œå¯ä»¥å¾ˆæ–¹ä¾¿çš„èŽ·å–é€‰æ‹©ä¿¡æ¯ï¼ˆé€‰æ‹©èµ·å§‹ä½ç½®å’Œé€‰æ‹©æ–‡æœ¬å€¼ï¼‰ï¼Œå› æ­¤è¦æƒ³å®žçŽ°ç¼–è¾‘åŠŸèƒ½ï¼Œåªéœ€å°†è¦æ”¹åŠ¨çš„å†…å®¹è¿›è¡Œæ–‡æœ¬è½¬æ¢ï¼Œç„¶åŽè¿›è¡Œé‡æ–°æ‹¼æŽ¥é¦–å°¾ï¼Œå¤§åŠŸå‘Šæˆã€‚
  
- markdownè§£æž

  è€ƒå¯Ÿäº†å‡ ä¸ªç¤¾åŒºæµè¡Œçš„markdownè§£æžå™¨ï¼Œæ¯”è¾ƒæµè¡Œçš„æœ‰[markdown](https://www.npmjs.com/package/markdown), [markdown-it](https://www.npmjs.com/package/markdown-it), [marked](https://www.npmjs.com/package/marked) ç­‰ç­‰ã€‚ç»¼åˆè€ƒè™‘æ‰©å±•æ€§ä»¥åŠç¨³å®šæ€§ï¼Œç¬”è€…æŽ¨èä½¿ç”¨markdown-itä½œä¸ºmarkdownçš„è¯æ³•è§£æžå™¨ï¼Œå› ä¸ºè¯¥è§£æžå™¨æœ‰æ¯”è¾ƒå¤šçš„æ’ä»¶ï¼Œå¹¶ä¸”æ”¯æŒè¯­æ³•é«˜äº®ã€‚

- åŒæ­¥æ»šåŠ¨

  å½“é€‰æ‹©åˆ†æ ç¼–è¾‘çš„æ—¶å€™ï¼Œæ»šåŠ¨å·¦ä¾§çš„ç¼–è¾‘åŒºï¼Œå³ä¾§çš„é¢„è§ˆåŒºèƒ½è‡ªåŠ¨æ»šåŠ¨åˆ°å¯¹åº”çš„åŒºåŸŸã€‚æ–¹æ¡ˆå‚è€ƒäº†ã€Š[æ‰‹æŠŠæ‰‹æ•™ä½ ç”¨ 100è¡Œä»£ç å®žçŽ°åŸºäºŽ reactçš„ markdown è¾“å…¥ + å³æ—¶é¢„è§ˆåœ¨çº¿ç¼–è¾‘å™¨ï¼ˆä¸€ï¼‰](https://github.com/accforgit/blog-data/blob/master/%E5%9C%A8%E7%BA%BF%E7%BC%96%E8%BE%91%E5%99%A8/README/README1.md)ã€‹ã€‚åªéœ€å…ˆè®¡ç®—å‡ºè¾“å…¥æ¡†å®¹å™¨å…ƒç´ ä¸Žé¢„è§ˆæ¡†å®¹å™¨å…ƒç´ ä¹‹é—´æœ€å¤§scrollèŒƒå›´çš„æ¯”ä¾‹å€¼ï¼Œç„¶åŽæ ¹æ®ä¸»åŠ¨æ»šåŠ¨å…ƒç´ è‡ªèº«çš„scrollTopåšç›¸åº”çš„æ¯”ä¾‹æ¢ç®—ï¼Œå³å¯çŸ¥é“å¯¹æ–¹åŒºåŸŸçš„scrollTopå€¼ã€‚

- å…³äºŽUI
 
  - é¡¹ç›®çš„å­—ä½“åº“é€‰æ‹©äº†Font Awesomeé£Žæ ¼ï¼Œå¹¶ä¸”åªé€‰å–äº†é¡¹ç›®æ‰€éœ€è¦çš„ä¸€äº›å›¾æ ‡ã€‚
  - ç¼–è¾‘å™¨çš„æ•´ä½“csså‡å¯é€šè¿‡å…¨å±€è¦†ç›–çš„å½¢å¼è¿›è¡Œè‡ªå®šä¹‰ã€‚ç›®å‰æš‚æ—¶åªæ”¯æŒç°è‰²ä¸»é¢˜ã€‚
  - ç¼–è¾‘å™¨çš„æ˜¾ç¤ºåŒºåŸŸåŒ…æ‹¬èœå•æ ï¼Œç¼–è¾‘å™¨ï¼Œé¢„è§ˆåŒºï¼Œå·¥å…·æ ï¼Œé€šè¿‡é…ç½®ç»„ä»¶çš„configå±žæ€§ï¼Œå¯ä»¥é€‰æ‹©é»˜è®¤çš„å±•ç¤ºåŒºåŸŸã€‚
  
### Install

```js
npm install react-markdown-editor-lite --save
```

### Props

| Property | Description | Type | default | Remarks |
| --- | --- | --- | --- | --- |
| value | markdown content | String | '' | required |
| style | component container style | Object | {height: '100%'} | not required |
| config | component config | Object | {view: {...}, logger: {...}} | not required |
| onChange | emitting when editor has changed | Function | ({html, md}) => {} | not required |
| onImageUpload | when image uploaded, callback emitting will get image markdown text | (file: File, callback: (url: string) => void) => void; | ({file, callback}) => {} | not required |
| renderHTML | Render markdown text to HTML. You can return either string, function or Promise | (text: string) => string|function|Promise | none | **required** |

### Example

``` js
'use strict';
import React from 'react'
import ReactDOM from 'react-dom'
import MdEditor from 'react-markdown-editor-lite'
import MarkdownIt from 'markdown-it'
import emoji from 'markdown-it-emoji'
import subscript from 'markdown-it-sub'
import superscript from 'markdown-it-sup'
import footnote from 'markdown-it-footnote'
import deflist from 'markdown-it-deflist'
import abbreviation from 'markdown-it-abbr'
import insert from 'markdown-it-ins'
import mark from 'markdown-it-mark'
import tasklists from 'markdown-it-task-lists'
import hljs from 'highlight.js'
import 'highlight.js/styles/atom-one-light.css'
// import 'highlight.js/styles/github.css'
import './index.less';

const MOCK_DATA = "I Love React."
export default class Demo extends React.Component {
  mdEditor = null
  mdParser = null
  constructor(props) {
    super(props)
    // initial a parsera
    this.mdParser = new MarkdownIt({
      html: true,
      linkify: true,
      typographer: true,
      highlight: function (str, lang) {
        if (lang && hljs.getLanguage(lang)) {
          try {
            return hljs.highlight(lang, str).value
          } catch (__) {}
        }    
        return '' // use external default escaping
      }
    })
    .use(emoji)
    .use(subscript)
    .use(superscript)
    .use(footnote)
    .use(deflist)
    .use(abbreviation)
    .use(insert)
    .use(mark)
    .use(tasklists, { enabled: this.taskLists })
    this.renderHTML = this.renderHTML.bind(this)
  }
  handleEditorChange({html, md}) {
    console.log('handleEditorChange', html, md)
  }
  handleImageUpload(file, callback) {
    const reader = new FileReader()
    reader.onload = () => {      
      const convertBase64UrlToBlob = (urlData) => {  
        let arr = urlData.split(','), mime = arr[0].match(/:(.*?);/)[1]
        let bstr = atob(arr[1])
        let n = bstr.length
        let u8arr = new Uint8Array(n)
        while (n--) {
          u8arr[n] = bstr.charCodeAt(n)
        }
        return new Blob([u8arr], {type:mime})
      }
      const blob = convertBase64UrlToBlob(reader.result)
      setTimeout(() => {
        // setTimeout æ¨¡æ‹Ÿå¼‚æ­¥ä¸Šä¼ å›¾ç‰‡
        // å½“å¼‚æ­¥ä¸Šä¼ èŽ·å–å›¾ç‰‡åœ°å€åŽï¼Œæ‰§è¡Œcalbackå›žè°ƒï¼ˆå‚æ•°ä¸ºimageUrlå­—ç¬¦ä¸²ï¼‰ï¼Œå³å¯å°†å›¾ç‰‡åœ°å€å†™å…¥markdown
        callback('https://avatars0.githubusercontent.com/u/21263805?s=40&v=4')
      }, 1000)
    }
    reader.readAsDataURL(file)
  }
  renderHTML(text) {
    // æ¨¡æ‹Ÿå¼‚æ­¥æ¸²æŸ“Markdown
    return new Promise((resolve) => {
      setTimeout(() => {
        resolve(this.mdParser.render(text))
      }, 1000)
    })
  }
  handleGetMdValue = () => {   
    this.mdEditor && alert(this.mdEditor.getMdValue())      
  }
  handleGetHtmlValue = () => {    
    this.mdEditor && alert(this.mdEditor.getHtmlValue())
  }
  render() {
    return (      
      <div>
        <nav>
          <button onClick={this.handleGetMdValue} >getMdValue</button>  
          <button onClick={this.handleGetHtmlValue} >getHtmlValue</button>  
        </nav>
        <section style="height: 500px">
          <MdEditor 
            ref={node => this.mdEditor = node}
            value={MOCK_DATA}
            style={{height: '400px'}}
            renderHTML={this.renderHTML}
            config={{
              view: {
                menu: true,
                md: true,
                html: true
              },
              imageUrl: 'https://octodex.github.com/images/minion.png'
            }}
            onChange={this.handleEditorChange} 
            onImageUpload={this.handleImageUpload}
          />
        </section>                        
      </div>      
    )
  }
}
```

### æœ€åŽ

   æ¬¢è¿Žå¤§å®¶ä½¿ç”¨å’Œåé¦ˆï¼Œ[é¡¹ç›®åœ°å€](https://github.com/HarryChen0506/react-markdown-editor-lite) (https://github.com/HarryChen0506/react-markdown-editor-lite)ï¼Œ ä½ çš„ç‚¹èµžå°†æ˜¯æˆ‘èŽ«å¤§çš„åŠ¨åŠ›ðŸ˜Š

', firstPicture='', viewCount=0, createDate='Sun Nov 07 14:09:29 EST 2021', updateDate='Mon Nov 08 09:15:09 EST 2021'}}, total=null}
2021-11-14 20:48:19:199 [http-nio-8081-exec-9] INFO  com.ivan.sunnyblog.web.aop.ControllerAspect *** Request Success ***: 1ms GET URI=/api/admin/category, methodName=com.ivan.sunnyblog.web.controller.CategoryContoller.getCategoryList, args=[SearchVo{page=1, limit=10, categoryId=null, total=null}], result=ResultInfo{info='null', status=0, data=[Category (1, Life ), Category (2, liddffd)], total=null}
2021-11-14 20:48:19:201 [http-nio-8081-exec-8] INFO  com.ivan.sunnyblog.web.aop.ControllerAspect *** Request Success ***: 4ms GET URI=/api/admin/article/10005, methodName=com.ivan.sunnyblog.web.controller.ArticleController.getArticleDetail, args=[10005], result=ResultInfo{info='null', status=0, data=ArticleDetailVo{categoryId=1, BaseArticleVo{articleId=10005, status=1, title='dd', description='This is the doc of React markdown editor lite.
Enjoy!!', content='| Head | Head | Head | Head |
| --- | --- | --- | --- |
| Data | Data | Data | Data |
| Data | Data | Data | Data |

## æ‰‹æŠŠæ‰‹æ•™ä½ å†™ä¸€ä¸ªmarkdownç¼–è¾‘å™¨

> ç¬”è€…åœ¨18å¹´å¹´æœ«çš„æ—¶å€™æŽ¥åˆ°ä¸€ä¸ªå¼€å‘ä»»åŠ¡â€”â€”æ­å»ºä¸€ä¸ªAIé¡¹ç›®çš„å¼€æ”¾å¹³å°ï¼Œå…¶ä¸­çš„äº§å“æ–‡æ¡£ä¸ºè½¬åŒ–ä¸ºHTMLæ ¼å¼çš„markdownæ–‡æ¡£ã€‚è€ƒè™‘åˆ°æ–‡æ¡£çš„å³æ—¶æ›´æ–°ï¼Œå°†æ–‡æ¡£ä¿¡æ¯åšæˆäº†AjaxæŽ¥å£çš„å½¢å¼ã€‚å› æ­¤ç®¡ç†åŽå°åªéœ€å°†textareaè¡¨å•çš„å†…å®¹é€šè¿‡markdownè§£æžå™¨è¿›è¡ŒHTMLæ ¼å¼è½¬åŒ–ï¼Œç„¶åŽå°†markdownå†…å®¹å’Œç»è½¬åŒ–çš„HTMLæ–‡æ¡£éƒ½ä¿å­˜åˆ°æ•°æ®åº“å³å¯ã€‚
> åŸºæœ¬éœ€æ±‚å®ŒæˆåŽï¼Œä¸ºäº†æ›´å¥½çš„ç”¨æˆ·ä½“éªŒï¼Œè€ƒè™‘å°†å¸¸ç”¨çš„ç¼–è¾‘åŠŸèƒ½æ·»åŠ è¿›æ¥ã€‚æ”¹è¿›ç‰ˆä¸ä»…æ”¯æŒäº†å¸¸ç”¨çš„æ–‡æœ¬ç¼–è¾‘åŠŸèƒ½ï¼Œè¿˜å®žçŽ°çš„UIç•Œé¢çš„é…ç½®åŒ–ï¼Œè‡ªå®šä¹‰è¯­æ³•è§£æžå™¨ã€‚æœ¬ç€é€ ç¦ä¼¸æ‰‹å…šçš„ç›®çš„ï¼Œä»¥åŠç§¯ç´¯äº›å¼€æºç»éªŒï¼Œç¬”è€…å°†è¯¥react ç»„ä»¶ [react-markdown-editor-lite](https://github.com/HarryChen0506/react-markdown-editor-lite) è¿›è¡Œäº†å°è£…æ”¹é€ ï¼Œå¹¶ä¸”å‘å¸ƒåˆ°äº†å¼€æºç¤¾åŒºã€‚

### é¢„è§ˆ
åœ¨çº¿ä½“éªŒ [https://harrychen0506.github.io/react-markdown-editor-lite/](https://harrychen0506.github.io/react-markdown-editor-lite/)

![image](https://github.com//HarryChen0506/react-markdown-editor-lite/blob/master/image/react-markdown-editor-lite-v1.0.0.PNG?raw=true)

### ç‰¹ç‚¹
* è½»é‡ã€åŸºäºŽReact
* UIå¯é…ç½®, å¦‚åªæ˜¾ç¤ºç¼–è¾‘åŒºæˆ–é¢„è§ˆåŒº
* æ”¯æŒè‡ªå®šä¹‰markdownè¯­æ³•è§£æžå™¨,è¯­æ³•é«˜äº®ç­‰
* æ”¯æŒå¸¸ç”¨çš„markdownç¼–è¾‘åŠŸèƒ½ï¼Œå¦‚åŠ ç²—ï¼Œæ–œä½“ç­‰ç­‰...
* æ”¯æŒåŠŸèƒ½æŒ‰é’®æ’æ‹”åŒ–ï¼Œç”¨æˆ·å¯ä»¥è‡ªå®šä¹‰æ‰©å±•ç»„ä»¶
* æ”¯æŒç¼–è¾‘åŒºå’Œé¢„è§ˆåŒºåŒæ­¥æ»šåŠ¨

### å¼€å‘å¿ƒå¾—

- æ–‡æœ¬ç¼–è¾‘

  å¤§å¤šæ•°å¸¸è§çš„ç¼–è¾‘å™¨ï¼ŒåŒ…æ‹¬å¯Œæ–‡æœ¬ç¼–è¾‘å™¨ï¼Œåˆ©ç”¨äº†æŸäº›å…ƒç´ å¦‚divçš„contenteditableå±žæ€§ï¼Œé…åˆselectionã€rangeã€execCommandç­‰APIï¼Œå®žçŽ°äº†å¯Œæ–‡æœ¬ç¼–è¾‘åŠŸèƒ½ã€‚è¿™é‡Œé¢çš„å®žçŽ°æ¯”è¾ƒå¤æ‚ï¼Œæ‰€ä»¥æœ‰äº†"[ä¸ºä»€ä¹ˆéƒ½è¯´å¯Œæ–‡æœ¬ç¼–è¾‘å™¨æ˜¯å¤©å‘ï¼Ÿ](https://www.zhihu.com/question/38699645)"è¿™ä¸ªè¯´æ³•ã€‚

  è€Œmarkdownç¼–è¾‘å™¨ï¼Œæ ¸å¿ƒçš„å¤„ç†å†…å®¹ä¸ºç®€å•è¯­æ³•çš„çº¯æ–‡æœ¬ï¼Œå¤æ‚åº¦ç›¸å¯¹æ¥è¯´æ¯”è¾ƒä½Žï¼Œå¹¶ä¸”inputæ ‡ç­¾è‡ªå¸¦onSelectäº‹ä»¶ï¼Œå¯ä»¥å¾ˆæ–¹ä¾¿çš„èŽ·å–é€‰æ‹©ä¿¡æ¯ï¼ˆé€‰æ‹©èµ·å§‹ä½ç½®å’Œé€‰æ‹©æ–‡æœ¬å€¼ï¼‰ï¼Œå› æ­¤è¦æƒ³å®žçŽ°ç¼–è¾‘åŠŸèƒ½ï¼Œåªéœ€å°†è¦æ”¹åŠ¨çš„å†…å®¹è¿›è¡Œæ–‡æœ¬è½¬æ¢ï¼Œç„¶åŽè¿›è¡Œé‡æ–°æ‹¼æŽ¥é¦–å°¾ï¼Œå¤§åŠŸå‘Šæˆã€‚
  
- markdownè§£æž

  è€ƒå¯Ÿäº†å‡ ä¸ªç¤¾åŒºæµè¡Œçš„markdownè§£æžå™¨ï¼Œæ¯”è¾ƒæµè¡Œçš„æœ‰[markdown](https://www.npmjs.com/package/markdown), [markdown-it](https://www.npmjs.com/package/markdown-it), [marked](https://www.npmjs.com/package/marked) ç­‰ç­‰ã€‚ç»¼åˆè€ƒè™‘æ‰©å±•æ€§ä»¥åŠç¨³å®šæ€§ï¼Œç¬”è€…æŽ¨èä½¿ç”¨markdown-itä½œä¸ºmarkdownçš„è¯æ³•è§£æžå™¨ï¼Œå› ä¸ºè¯¥è§£æžå™¨æœ‰æ¯”è¾ƒå¤šçš„æ’ä»¶ï¼Œå¹¶ä¸”æ”¯æŒè¯­æ³•é«˜äº®ã€‚

- åŒæ­¥æ»šåŠ¨

  å½“é€‰æ‹©åˆ†æ ç¼–è¾‘çš„æ—¶å€™ï¼Œæ»šåŠ¨å·¦ä¾§çš„ç¼–è¾‘åŒºï¼Œå³ä¾§çš„é¢„è§ˆåŒºèƒ½è‡ªåŠ¨æ»šåŠ¨åˆ°å¯¹åº”çš„åŒºåŸŸã€‚æ–¹æ¡ˆå‚è€ƒäº†ã€Š[æ‰‹æŠŠæ‰‹æ•™ä½ ç”¨ 100è¡Œä»£ç å®žçŽ°åŸºäºŽ reactçš„ markdown è¾“å…¥ + å³æ—¶é¢„è§ˆåœ¨çº¿ç¼–è¾‘å™¨ï¼ˆä¸€ï¼‰](https://github.com/accforgit/blog-data/blob/master/%E5%9C%A8%E7%BA%BF%E7%BC%96%E8%BE%91%E5%99%A8/README/README1.md)ã€‹ã€‚åªéœ€å…ˆè®¡ç®—å‡ºè¾“å…¥æ¡†å®¹å™¨å…ƒç´ ä¸Žé¢„è§ˆæ¡†å®¹å™¨å…ƒç´ ä¹‹é—´æœ€å¤§scrollèŒƒå›´çš„æ¯”ä¾‹å€¼ï¼Œç„¶åŽæ ¹æ®ä¸»åŠ¨æ»šåŠ¨å…ƒç´ è‡ªèº«çš„scrollTopåšç›¸åº”çš„æ¯”ä¾‹æ¢ç®—ï¼Œå³å¯çŸ¥é“å¯¹æ–¹åŒºåŸŸçš„scrollTopå€¼ã€‚

- å…³äºŽUI
 
  - é¡¹ç›®çš„å­—ä½“åº“é€‰æ‹©äº†Font Awesomeé£Žæ ¼ï¼Œå¹¶ä¸”åªé€‰å–äº†é¡¹ç›®æ‰€éœ€è¦çš„ä¸€äº›å›¾æ ‡ã€‚
  - ç¼–è¾‘å™¨çš„æ•´ä½“csså‡å¯é€šè¿‡å…¨å±€è¦†ç›–çš„å½¢å¼è¿›è¡Œè‡ªå®šä¹‰ã€‚ç›®å‰æš‚æ—¶åªæ”¯æŒç°è‰²ä¸»é¢˜ã€‚
  - ç¼–è¾‘å™¨çš„æ˜¾ç¤ºåŒºåŸŸåŒ…æ‹¬èœå•æ ï¼Œç¼–è¾‘å™¨ï¼Œé¢„è§ˆåŒºï¼Œå·¥å…·æ ï¼Œé€šè¿‡é…ç½®ç»„ä»¶çš„configå±žæ€§ï¼Œå¯ä»¥é€‰æ‹©é»˜è®¤çš„å±•ç¤ºåŒºåŸŸã€‚
  
### Install

```js
npm install react-markdown-editor-lite --save
```

### Props

| Property | Description | Type | default | Remarks |
| --- | --- | --- | --- | --- |
| value | markdown content | String | '' | required |
| style | component container style | Object | {height: '100%'} | not required |
| config | component config | Object | {view: {...}, logger: {...}} | not required |
| onChange | emitting when editor has changed | Function | ({html, md}) => {} | not required |
| onImageUpload | when image uploaded, callback emitting will get image markdown text | (file: File, callback: (url: string) => void) => void; | ({file, callback}) => {} | not required |
| renderHTML | Render markdown text to HTML. You can return either string, function or Promise | (text: string) => string|function|Promise | none | **required** |

### Example

``` js
'use strict';
import React from 'react'
import ReactDOM from 'react-dom'
import MdEditor from 'react-markdown-editor-lite'
import MarkdownIt from 'markdown-it'
import emoji from 'markdown-it-emoji'
import subscript from 'markdown-it-sub'
import superscript from 'markdown-it-sup'
import footnote from 'markdown-it-footnote'
import deflist from 'markdown-it-deflist'
import abbreviation from 'markdown-it-abbr'
import insert from 'markdown-it-ins'
import mark from 'markdown-it-mark'
import tasklists from 'markdown-it-task-lists'
import hljs from 'highlight.js'
import 'highlight.js/styles/atom-one-light.css'
// import 'highlight.js/styles/github.css'
import './index.less';

const MOCK_DATA = "I Love React."
export default class Demo extends React.Component {
  mdEditor = null
  mdParser = null
  constructor(props) {
    super(props)
    // initial a parsera
    this.mdParser = new MarkdownIt({
      html: true,
      linkify: true,
      typographer: true,
      highlight: function (str, lang) {
        if (lang && hljs.getLanguage(lang)) {
          try {
            return hljs.highlight(lang, str).value
          } catch (__) {}
        }    
        return '' // use external default escaping
      }
    })
    .use(emoji)
    .use(subscript)
    .use(superscript)
    .use(footnote)
    .use(deflist)
    .use(abbreviation)
    .use(insert)
    .use(mark)
    .use(tasklists, { enabled: this.taskLists })
    this.renderHTML = this.renderHTML.bind(this)
  }
  handleEditorChange({html, md}) {
    console.log('handleEditorChange', html, md)
  }
  handleImageUpload(file, callback) {
    const reader = new FileReader()
    reader.onload = () => {      
      const convertBase64UrlToBlob = (urlData) => {  
        let arr = urlData.split(','), mime = arr[0].match(/:(.*?);/)[1]
        let bstr = atob(arr[1])
        let n = bstr.length
        let u8arr = new Uint8Array(n)
        while (n--) {
          u8arr[n] = bstr.charCodeAt(n)
        }
        return new Blob([u8arr], {type:mime})
      }
      const blob = convertBase64UrlToBlob(reader.result)
      setTimeout(() => {
        // setTimeout æ¨¡æ‹Ÿå¼‚æ­¥ä¸Šä¼ å›¾ç‰‡
        // å½“å¼‚æ­¥ä¸Šä¼ èŽ·å–å›¾ç‰‡åœ°å€åŽï¼Œæ‰§è¡Œcalbackå›žè°ƒï¼ˆå‚æ•°ä¸ºimageUrlå­—ç¬¦ä¸²ï¼‰ï¼Œå³å¯å°†å›¾ç‰‡åœ°å€å†™å…¥markdown
        callback('https://avatars0.githubusercontent.com/u/21263805?s=40&v=4')
      }, 1000)
    }
    reader.readAsDataURL(file)
  }
  renderHTML(text) {
    // æ¨¡æ‹Ÿå¼‚æ­¥æ¸²æŸ“Markdown
    return new Promise((resolve) => {
      setTimeout(() => {
        resolve(this.mdParser.render(text))
      }, 1000)
    })
  }
  handleGetMdValue = () => {   
    this.mdEditor && alert(this.mdEditor.getMdValue())      
  }
  handleGetHtmlValue = () => {    
    this.mdEditor && alert(this.mdEditor.getHtmlValue())
  }
  render() {
    return (      
      <div>
        <nav>
          <button onClick={this.handleGetMdValue} >getMdValue</button>  
          <button onClick={this.handleGetHtmlValue} >getHtmlValue</button>  
        </nav>
        <section style="height: 500px">
          <MdEditor 
            ref={node => this.mdEditor = node}
            value={MOCK_DATA}
            style={{height: '400px'}}
            renderHTML={this.renderHTML}
            config={{
              view: {
                menu: true,
                md: true,
                html: true
              },
              imageUrl: 'https://octodex.github.com/images/minion.png'
            }}
            onChange={this.handleEditorChange} 
            onImageUpload={this.handleImageUpload}
          />
        </section>                        
      </div>      
    )
  }
}
```

### æœ€åŽ

   æ¬¢è¿Žå¤§å®¶ä½¿ç”¨å’Œåé¦ˆï¼Œ[é¡¹ç›®åœ°å€](https://github.com/HarryChen0506/react-markdown-editor-lite) (https://github.com/HarryChen0506/react-markdown-editor-lite)ï¼Œ ä½ çš„ç‚¹èµžå°†æ˜¯æˆ‘èŽ«å¤§çš„åŠ¨åŠ›ðŸ˜Š

', firstPicture='', viewCount=0, createDate='Sun Nov 07 14:09:29 EST 2021', updateDate='Mon Nov 08 09:15:09 EST 2021'}}, total=null}
2021-11-14 20:52:53:021 [http-nio-8081-exec-2] INFO  com.ivan.sunnyblog.web.aop.ControllerAspect *** Request Success ***: 3ms GET URI=/api/admin/category, methodName=com.ivan.sunnyblog.web.controller.CategoryContoller.getCategoryList, args=[SearchVo{page=1, limit=10, categoryId=null, total=null}], result=ResultInfo{info='null', status=0, data=[Category (1, Life ), Category (2, liddffd)], total=null}
2021-11-14 20:52:53:024 [http-nio-8081-exec-3] INFO  com.ivan.sunnyblog.web.aop.ControllerAspect *** Request Success ***: 6ms GET URI=/api/admin/article/10005, methodName=com.ivan.sunnyblog.web.controller.ArticleController.getArticleDetail, args=[10005], result=ResultInfo{info='null', status=0, data=ArticleDetailVo{categoryId=1, BaseArticleVo{articleId=10005, status=1, title='dd', description='This is the doc of React markdown editor lite.
Enjoy!!', content='| Head | Head | Head | Head |
| --- | --- | --- | --- |
| Data | Data | Data | Data |
| Data | Data | Data | Data |

## æ‰‹æŠŠæ‰‹æ•™ä½ å†™ä¸€ä¸ªmarkdownç¼–è¾‘å™¨

> ç¬”è€…åœ¨18å¹´å¹´æœ«çš„æ—¶å€™æŽ¥åˆ°ä¸€ä¸ªå¼€å‘ä»»åŠ¡â€”â€”æ­å»ºä¸€ä¸ªAIé¡¹ç›®çš„å¼€æ”¾å¹³å°ï¼Œå…¶ä¸­çš„äº§å“æ–‡æ¡£ä¸ºè½¬åŒ–ä¸ºHTMLæ ¼å¼çš„markdownæ–‡æ¡£ã€‚è€ƒè™‘åˆ°æ–‡æ¡£çš„å³æ—¶æ›´æ–°ï¼Œå°†æ–‡æ¡£ä¿¡æ¯åšæˆäº†AjaxæŽ¥å£çš„å½¢å¼ã€‚å› æ­¤ç®¡ç†åŽå°åªéœ€å°†textareaè¡¨å•çš„å†…å®¹é€šè¿‡markdownè§£æžå™¨è¿›è¡ŒHTMLæ ¼å¼è½¬åŒ–ï¼Œç„¶åŽå°†markdownå†…å®¹å’Œç»è½¬åŒ–çš„HTMLæ–‡æ¡£éƒ½ä¿å­˜åˆ°æ•°æ®åº“å³å¯ã€‚
> åŸºæœ¬éœ€æ±‚å®ŒæˆåŽï¼Œä¸ºäº†æ›´å¥½çš„ç”¨æˆ·ä½“éªŒï¼Œè€ƒè™‘å°†å¸¸ç”¨çš„ç¼–è¾‘åŠŸèƒ½æ·»åŠ è¿›æ¥ã€‚æ”¹è¿›ç‰ˆä¸ä»…æ”¯æŒäº†å¸¸ç”¨çš„æ–‡æœ¬ç¼–è¾‘åŠŸèƒ½ï¼Œè¿˜å®žçŽ°çš„UIç•Œé¢çš„é…ç½®åŒ–ï¼Œè‡ªå®šä¹‰è¯­æ³•è§£æžå™¨ã€‚æœ¬ç€é€ ç¦ä¼¸æ‰‹å…šçš„ç›®çš„ï¼Œä»¥åŠç§¯ç´¯äº›å¼€æºç»éªŒï¼Œç¬”è€…å°†è¯¥react ç»„ä»¶ [react-markdown-editor-lite](https://github.com/HarryChen0506/react-markdown-editor-lite) è¿›è¡Œäº†å°è£…æ”¹é€ ï¼Œå¹¶ä¸”å‘å¸ƒåˆ°äº†å¼€æºç¤¾åŒºã€‚

### é¢„è§ˆ
åœ¨çº¿ä½“éªŒ [https://harrychen0506.github.io/react-markdown-editor-lite/](https://harrychen0506.github.io/react-markdown-editor-lite/)

![image](https://github.com//HarryChen0506/react-markdown-editor-lite/blob/master/image/react-markdown-editor-lite-v1.0.0.PNG?raw=true)

### ç‰¹ç‚¹
* è½»é‡ã€åŸºäºŽReact
* UIå¯é…ç½®, å¦‚åªæ˜¾ç¤ºç¼–è¾‘åŒºæˆ–é¢„è§ˆåŒº
* æ”¯æŒè‡ªå®šä¹‰markdownè¯­æ³•è§£æžå™¨,è¯­æ³•é«˜äº®ç­‰
* æ”¯æŒå¸¸ç”¨çš„markdownç¼–è¾‘åŠŸèƒ½ï¼Œå¦‚åŠ ç²—ï¼Œæ–œä½“ç­‰ç­‰...
* æ”¯æŒåŠŸèƒ½æŒ‰é’®æ’æ‹”åŒ–ï¼Œç”¨æˆ·å¯ä»¥è‡ªå®šä¹‰æ‰©å±•ç»„ä»¶
* æ”¯æŒç¼–è¾‘åŒºå’Œé¢„è§ˆåŒºåŒæ­¥æ»šåŠ¨

### å¼€å‘å¿ƒå¾—

- æ–‡æœ¬ç¼–è¾‘

  å¤§å¤šæ•°å¸¸è§çš„ç¼–è¾‘å™¨ï¼ŒåŒ…æ‹¬å¯Œæ–‡æœ¬ç¼–è¾‘å™¨ï¼Œåˆ©ç”¨äº†æŸäº›å…ƒç´ å¦‚divçš„contenteditableå±žæ€§ï¼Œé…åˆselectionã€rangeã€execCommandç­‰APIï¼Œå®žçŽ°äº†å¯Œæ–‡æœ¬ç¼–è¾‘åŠŸèƒ½ã€‚è¿™é‡Œé¢çš„å®žçŽ°æ¯”è¾ƒå¤æ‚ï¼Œæ‰€ä»¥æœ‰äº†"[ä¸ºä»€ä¹ˆéƒ½è¯´å¯Œæ–‡æœ¬ç¼–è¾‘å™¨æ˜¯å¤©å‘ï¼Ÿ](https://www.zhihu.com/question/38699645)"è¿™ä¸ªè¯´æ³•ã€‚

  è€Œmarkdownç¼–è¾‘å™¨ï¼Œæ ¸å¿ƒçš„å¤„ç†å†…å®¹ä¸ºç®€å•è¯­æ³•çš„çº¯æ–‡æœ¬ï¼Œå¤æ‚åº¦ç›¸å¯¹æ¥è¯´æ¯”è¾ƒä½Žï¼Œå¹¶ä¸”inputæ ‡ç­¾è‡ªå¸¦onSelectäº‹ä»¶ï¼Œå¯ä»¥å¾ˆæ–¹ä¾¿çš„èŽ·å–é€‰æ‹©ä¿¡æ¯ï¼ˆé€‰æ‹©èµ·å§‹ä½ç½®å’Œé€‰æ‹©æ–‡æœ¬å€¼ï¼‰ï¼Œå› æ­¤è¦æƒ³å®žçŽ°ç¼–è¾‘åŠŸèƒ½ï¼Œåªéœ€å°†è¦æ”¹åŠ¨çš„å†…å®¹è¿›è¡Œæ–‡æœ¬è½¬æ¢ï¼Œç„¶åŽè¿›è¡Œé‡æ–°æ‹¼æŽ¥é¦–å°¾ï¼Œå¤§åŠŸå‘Šæˆã€‚
  
- markdownè§£æž

  è€ƒå¯Ÿäº†å‡ ä¸ªç¤¾åŒºæµè¡Œçš„markdownè§£æžå™¨ï¼Œæ¯”è¾ƒæµè¡Œçš„æœ‰[markdown](https://www.npmjs.com/package/markdown), [markdown-it](https://www.npmjs.com/package/markdown-it), [marked](https://www.npmjs.com/package/marked) ç­‰ç­‰ã€‚ç»¼åˆè€ƒè™‘æ‰©å±•æ€§ä»¥åŠç¨³å®šæ€§ï¼Œç¬”è€…æŽ¨èä½¿ç”¨markdown-itä½œä¸ºmarkdownçš„è¯æ³•è§£æžå™¨ï¼Œå› ä¸ºè¯¥è§£æžå™¨æœ‰æ¯”è¾ƒå¤šçš„æ’ä»¶ï¼Œå¹¶ä¸”æ”¯æŒè¯­æ³•é«˜äº®ã€‚

- åŒæ­¥æ»šåŠ¨

  å½“é€‰æ‹©åˆ†æ ç¼–è¾‘çš„æ—¶å€™ï¼Œæ»šåŠ¨å·¦ä¾§çš„ç¼–è¾‘åŒºï¼Œå³ä¾§çš„é¢„è§ˆåŒºèƒ½è‡ªåŠ¨æ»šåŠ¨åˆ°å¯¹åº”çš„åŒºåŸŸã€‚æ–¹æ¡ˆå‚è€ƒäº†ã€Š[æ‰‹æŠŠæ‰‹æ•™ä½ ç”¨ 100è¡Œä»£ç å®žçŽ°åŸºäºŽ reactçš„ markdown è¾“å…¥ + å³æ—¶é¢„è§ˆåœ¨çº¿ç¼–è¾‘å™¨ï¼ˆä¸€ï¼‰](https://github.com/accforgit/blog-data/blob/master/%E5%9C%A8%E7%BA%BF%E7%BC%96%E8%BE%91%E5%99%A8/README/README1.md)ã€‹ã€‚åªéœ€å…ˆè®¡ç®—å‡ºè¾“å…¥æ¡†å®¹å™¨å…ƒç´ ä¸Žé¢„è§ˆæ¡†å®¹å™¨å…ƒç´ ä¹‹é—´æœ€å¤§scrollèŒƒå›´çš„æ¯”ä¾‹å€¼ï¼Œç„¶åŽæ ¹æ®ä¸»åŠ¨æ»šåŠ¨å…ƒç´ è‡ªèº«çš„scrollTopåšç›¸åº”çš„æ¯”ä¾‹æ¢ç®—ï¼Œå³å¯çŸ¥é“å¯¹æ–¹åŒºåŸŸçš„scrollTopå€¼ã€‚

- å…³äºŽUI
 
  - é¡¹ç›®çš„å­—ä½“åº“é€‰æ‹©äº†Font Awesomeé£Žæ ¼ï¼Œå¹¶ä¸”åªé€‰å–äº†é¡¹ç›®æ‰€éœ€è¦çš„ä¸€äº›å›¾æ ‡ã€‚
  - ç¼–è¾‘å™¨çš„æ•´ä½“csså‡å¯é€šè¿‡å…¨å±€è¦†ç›–çš„å½¢å¼è¿›è¡Œè‡ªå®šä¹‰ã€‚ç›®å‰æš‚æ—¶åªæ”¯æŒç°è‰²ä¸»é¢˜ã€‚
  - ç¼–è¾‘å™¨çš„æ˜¾ç¤ºåŒºåŸŸåŒ…æ‹¬èœå•æ ï¼Œç¼–è¾‘å™¨ï¼Œé¢„è§ˆåŒºï¼Œå·¥å…·æ ï¼Œé€šè¿‡é…ç½®ç»„ä»¶çš„configå±žæ€§ï¼Œå¯ä»¥é€‰æ‹©é»˜è®¤çš„å±•ç¤ºåŒºåŸŸã€‚
  
### Install

```js
npm install react-markdown-editor-lite --save
```

### Props

| Property | Description | Type | default | Remarks |
| --- | --- | --- | --- | --- |
| value | markdown content | String | '' | required |
| style | component container style | Object | {height: '100%'} | not required |
| config | component config | Object | {view: {...}, logger: {...}} | not required |
| onChange | emitting when editor has changed | Function | ({html, md}) => {} | not required |
| onImageUpload | when image uploaded, callback emitting will get image markdown text | (file: File, callback: (url: string) => void) => void; | ({file, callback}) => {} | not required |
| renderHTML | Render markdown text to HTML. You can return either string, function or Promise | (text: string) => string|function|Promise | none | **required** |

### Example

``` js
'use strict';
import React from 'react'
import ReactDOM from 'react-dom'
import MdEditor from 'react-markdown-editor-lite'
import MarkdownIt from 'markdown-it'
import emoji from 'markdown-it-emoji'
import subscript from 'markdown-it-sub'
import superscript from 'markdown-it-sup'
import footnote from 'markdown-it-footnote'
import deflist from 'markdown-it-deflist'
import abbreviation from 'markdown-it-abbr'
import insert from 'markdown-it-ins'
import mark from 'markdown-it-mark'
import tasklists from 'markdown-it-task-lists'
import hljs from 'highlight.js'
import 'highlight.js/styles/atom-one-light.css'
// import 'highlight.js/styles/github.css'
import './index.less';

const MOCK_DATA = "I Love React."
export default class Demo extends React.Component {
  mdEditor = null
  mdParser = null
  constructor(props) {
    super(props)
    // initial a parsera
    this.mdParser = new MarkdownIt({
      html: true,
      linkify: true,
      typographer: true,
      highlight: function (str, lang) {
        if (lang && hljs.getLanguage(lang)) {
          try {
            return hljs.highlight(lang, str).value
          } catch (__) {}
        }    
        return '' // use external default escaping
      }
    })
    .use(emoji)
    .use(subscript)
    .use(superscript)
    .use(footnote)
    .use(deflist)
    .use(abbreviation)
    .use(insert)
    .use(mark)
    .use(tasklists, { enabled: this.taskLists })
    this.renderHTML = this.renderHTML.bind(this)
  }
  handleEditorChange({html, md}) {
    console.log('handleEditorChange', html, md)
  }
  handleImageUpload(file, callback) {
    const reader = new FileReader()
    reader.onload = () => {      
      const convertBase64UrlToBlob = (urlData) => {  
        let arr = urlData.split(','), mime = arr[0].match(/:(.*?);/)[1]
        let bstr = atob(arr[1])
        let n = bstr.length
        let u8arr = new Uint8Array(n)
        while (n--) {
          u8arr[n] = bstr.charCodeAt(n)
        }
        return new Blob([u8arr], {type:mime})
      }
      const blob = convertBase64UrlToBlob(reader.result)
      setTimeout(() => {
        // setTimeout æ¨¡æ‹Ÿå¼‚æ­¥ä¸Šä¼ å›¾ç‰‡
        // å½“å¼‚æ­¥ä¸Šä¼ èŽ·å–å›¾ç‰‡åœ°å€åŽï¼Œæ‰§è¡Œcalbackå›žè°ƒï¼ˆå‚æ•°ä¸ºimageUrlå­—ç¬¦ä¸²ï¼‰ï¼Œå³å¯å°†å›¾ç‰‡åœ°å€å†™å…¥markdown
        callback('https://avatars0.githubusercontent.com/u/21263805?s=40&v=4')
      }, 1000)
    }
    reader.readAsDataURL(file)
  }
  renderHTML(text) {
    // æ¨¡æ‹Ÿå¼‚æ­¥æ¸²æŸ“Markdown
    return new Promise((resolve) => {
      setTimeout(() => {
        resolve(this.mdParser.render(text))
      }, 1000)
    })
  }
  handleGetMdValue = () => {   
    this.mdEditor && alert(this.mdEditor.getMdValue())      
  }
  handleGetHtmlValue = () => {    
    this.mdEditor && alert(this.mdEditor.getHtmlValue())
  }
  render() {
    return (      
      <div>
        <nav>
          <button onClick={this.handleGetMdValue} >getMdValue</button>  
          <button onClick={this.handleGetHtmlValue} >getHtmlValue</button>  
        </nav>
        <section style="height: 500px">
          <MdEditor 
            ref={node => this.mdEditor = node}
            value={MOCK_DATA}
            style={{height: '400px'}}
            renderHTML={this.renderHTML}
            config={{
              view: {
                menu: true,
                md: true,
                html: true
              },
              imageUrl: 'https://octodex.github.com/images/minion.png'
            }}
            onChange={this.handleEditorChange} 
            onImageUpload={this.handleImageUpload}
          />
        </section>                        
      </div>      
    )
  }
}
```

### æœ€åŽ

   æ¬¢è¿Žå¤§å®¶ä½¿ç”¨å’Œåé¦ˆï¼Œ[é¡¹ç›®åœ°å€](https://github.com/HarryChen0506/react-markdown-editor-lite) (https://github.com/HarryChen0506/react-markdown-editor-lite)ï¼Œ ä½ çš„ç‚¹èµžå°†æ˜¯æˆ‘èŽ«å¤§çš„åŠ¨åŠ›ðŸ˜Š

', firstPicture='', viewCount=0, createDate='Sun Nov 07 14:09:29 EST 2021', updateDate='Mon Nov 08 09:15:09 EST 2021'}}, total=null}
2021-11-14 20:54:43:365 [http-nio-8081-exec-7] INFO  com.ivan.sunnyblog.web.aop.ControllerAspect *** Request Success ***: 2ms GET URI=/api/admin/category, methodName=com.ivan.sunnyblog.web.controller.CategoryContoller.getCategoryList, args=[SearchVo{page=1, limit=10, categoryId=null, total=null}], result=ResultInfo{info='null', status=0, data=[Category (1, Life ), Category (2, liddffd)], total=null}
2021-11-14 20:54:43:367 [http-nio-8081-exec-6] INFO  com.ivan.sunnyblog.web.aop.ControllerAspect *** Request Success ***: 4ms GET URI=/api/admin/article/10005, methodName=com.ivan.sunnyblog.web.controller.ArticleController.getArticleDetail, args=[10005], result=ResultInfo{info='null', status=0, data=ArticleDetailVo{categoryId=1, BaseArticleVo{articleId=10005, status=1, title='dd', description='This is the doc of React markdown editor lite.
Enjoy!!', content='| Head | Head | Head | Head |
| --- | --- | --- | --- |
| Data | Data | Data | Data |
| Data | Data | Data | Data |

## æ‰‹æŠŠæ‰‹æ•™ä½ å†™ä¸€ä¸ªmarkdownç¼–è¾‘å™¨

> ç¬”è€…åœ¨18å¹´å¹´æœ«çš„æ—¶å€™æŽ¥åˆ°ä¸€ä¸ªå¼€å‘ä»»åŠ¡â€”â€”æ­å»ºä¸€ä¸ªAIé¡¹ç›®çš„å¼€æ”¾å¹³å°ï¼Œå…¶ä¸­çš„äº§å“æ–‡æ¡£ä¸ºè½¬åŒ–ä¸ºHTMLæ ¼å¼çš„markdownæ–‡æ¡£ã€‚è€ƒè™‘åˆ°æ–‡æ¡£çš„å³æ—¶æ›´æ–°ï¼Œå°†æ–‡æ¡£ä¿¡æ¯åšæˆäº†AjaxæŽ¥å£çš„å½¢å¼ã€‚å› æ­¤ç®¡ç†åŽå°åªéœ€å°†textareaè¡¨å•çš„å†…å®¹é€šè¿‡markdownè§£æžå™¨è¿›è¡ŒHTMLæ ¼å¼è½¬åŒ–ï¼Œç„¶åŽå°†markdownå†…å®¹å’Œç»è½¬åŒ–çš„HTMLæ–‡æ¡£éƒ½ä¿å­˜åˆ°æ•°æ®åº“å³å¯ã€‚
> åŸºæœ¬éœ€æ±‚å®ŒæˆåŽï¼Œä¸ºäº†æ›´å¥½çš„ç”¨æˆ·ä½“éªŒï¼Œè€ƒè™‘å°†å¸¸ç”¨çš„ç¼–è¾‘åŠŸèƒ½æ·»åŠ è¿›æ¥ã€‚æ”¹è¿›ç‰ˆä¸ä»…æ”¯æŒäº†å¸¸ç”¨çš„æ–‡æœ¬ç¼–è¾‘åŠŸèƒ½ï¼Œè¿˜å®žçŽ°çš„UIç•Œé¢çš„é…ç½®åŒ–ï¼Œè‡ªå®šä¹‰è¯­æ³•è§£æžå™¨ã€‚æœ¬ç€é€ ç¦ä¼¸æ‰‹å…šçš„ç›®çš„ï¼Œä»¥åŠç§¯ç´¯äº›å¼€æºç»éªŒï¼Œç¬”è€…å°†è¯¥react ç»„ä»¶ [react-markdown-editor-lite](https://github.com/HarryChen0506/react-markdown-editor-lite) è¿›è¡Œäº†å°è£…æ”¹é€ ï¼Œå¹¶ä¸”å‘å¸ƒåˆ°äº†å¼€æºç¤¾åŒºã€‚

### é¢„è§ˆ
åœ¨çº¿ä½“éªŒ [https://harrychen0506.github.io/react-markdown-editor-lite/](https://harrychen0506.github.io/react-markdown-editor-lite/)

![image](https://github.com//HarryChen0506/react-markdown-editor-lite/blob/master/image/react-markdown-editor-lite-v1.0.0.PNG?raw=true)

### ç‰¹ç‚¹
* è½»é‡ã€åŸºäºŽReact
* UIå¯é…ç½®, å¦‚åªæ˜¾ç¤ºç¼–è¾‘åŒºæˆ–é¢„è§ˆåŒº
* æ”¯æŒè‡ªå®šä¹‰markdownè¯­æ³•è§£æžå™¨,è¯­æ³•é«˜äº®ç­‰
* æ”¯æŒå¸¸ç”¨çš„markdownç¼–è¾‘åŠŸèƒ½ï¼Œå¦‚åŠ ç²—ï¼Œæ–œä½“ç­‰ç­‰...
* æ”¯æŒåŠŸèƒ½æŒ‰é’®æ’æ‹”åŒ–ï¼Œç”¨æˆ·å¯ä»¥è‡ªå®šä¹‰æ‰©å±•ç»„ä»¶
* æ”¯æŒç¼–è¾‘åŒºå’Œé¢„è§ˆåŒºåŒæ­¥æ»šåŠ¨

### å¼€å‘å¿ƒå¾—

- æ–‡æœ¬ç¼–è¾‘

  å¤§å¤šæ•°å¸¸è§çš„ç¼–è¾‘å™¨ï¼ŒåŒ…æ‹¬å¯Œæ–‡æœ¬ç¼–è¾‘å™¨ï¼Œåˆ©ç”¨äº†æŸäº›å…ƒç´ å¦‚divçš„contenteditableå±žæ€§ï¼Œé…åˆselectionã€rangeã€execCommandç­‰APIï¼Œå®žçŽ°äº†å¯Œæ–‡æœ¬ç¼–è¾‘åŠŸèƒ½ã€‚è¿™é‡Œé¢çš„å®žçŽ°æ¯”è¾ƒå¤æ‚ï¼Œæ‰€ä»¥æœ‰äº†"[ä¸ºä»€ä¹ˆéƒ½è¯´å¯Œæ–‡æœ¬ç¼–è¾‘å™¨æ˜¯å¤©å‘ï¼Ÿ](https://www.zhihu.com/question/38699645)"è¿™ä¸ªè¯´æ³•ã€‚

  è€Œmarkdownç¼–è¾‘å™¨ï¼Œæ ¸å¿ƒçš„å¤„ç†å†…å®¹ä¸ºç®€å•è¯­æ³•çš„çº¯æ–‡æœ¬ï¼Œå¤æ‚åº¦ç›¸å¯¹æ¥è¯´æ¯”è¾ƒä½Žï¼Œå¹¶ä¸”inputæ ‡ç­¾è‡ªå¸¦onSelectäº‹ä»¶ï¼Œå¯ä»¥å¾ˆæ–¹ä¾¿çš„èŽ·å–é€‰æ‹©ä¿¡æ¯ï¼ˆé€‰æ‹©èµ·å§‹ä½ç½®å’Œé€‰æ‹©æ–‡æœ¬å€¼ï¼‰ï¼Œå› æ­¤è¦æƒ³å®žçŽ°ç¼–è¾‘åŠŸèƒ½ï¼Œåªéœ€å°†è¦æ”¹åŠ¨çš„å†…å®¹è¿›è¡Œæ–‡æœ¬è½¬æ¢ï¼Œç„¶åŽè¿›è¡Œé‡æ–°æ‹¼æŽ¥é¦–å°¾ï¼Œå¤§åŠŸå‘Šæˆã€‚
  
- markdownè§£æž

  è€ƒå¯Ÿäº†å‡ ä¸ªç¤¾åŒºæµè¡Œçš„markdownè§£æžå™¨ï¼Œæ¯”è¾ƒæµè¡Œçš„æœ‰[markdown](https://www.npmjs.com/package/markdown), [markdown-it](https://www.npmjs.com/package/markdown-it), [marked](https://www.npmjs.com/package/marked) ç­‰ç­‰ã€‚ç»¼åˆè€ƒè™‘æ‰©å±•æ€§ä»¥åŠç¨³å®šæ€§ï¼Œç¬”è€…æŽ¨èä½¿ç”¨markdown-itä½œä¸ºmarkdownçš„è¯æ³•è§£æžå™¨ï¼Œå› ä¸ºè¯¥è§£æžå™¨æœ‰æ¯”è¾ƒå¤šçš„æ’ä»¶ï¼Œå¹¶ä¸”æ”¯æŒè¯­æ³•é«˜äº®ã€‚

- åŒæ­¥æ»šåŠ¨

  å½“é€‰æ‹©åˆ†æ ç¼–è¾‘çš„æ—¶å€™ï¼Œæ»šåŠ¨å·¦ä¾§çš„ç¼–è¾‘åŒºï¼Œå³ä¾§çš„é¢„è§ˆåŒºèƒ½è‡ªåŠ¨æ»šåŠ¨åˆ°å¯¹åº”çš„åŒºåŸŸã€‚æ–¹æ¡ˆå‚è€ƒäº†ã€Š[æ‰‹æŠŠæ‰‹æ•™ä½ ç”¨ 100è¡Œä»£ç å®žçŽ°åŸºäºŽ reactçš„ markdown è¾“å…¥ + å³æ—¶é¢„è§ˆåœ¨çº¿ç¼–è¾‘å™¨ï¼ˆä¸€ï¼‰](https://github.com/accforgit/blog-data/blob/master/%E5%9C%A8%E7%BA%BF%E7%BC%96%E8%BE%91%E5%99%A8/README/README1.md)ã€‹ã€‚åªéœ€å…ˆè®¡ç®—å‡ºè¾“å…¥æ¡†å®¹å™¨å…ƒç´ ä¸Žé¢„è§ˆæ¡†å®¹å™¨å…ƒç´ ä¹‹é—´æœ€å¤§scrollèŒƒå›´çš„æ¯”ä¾‹å€¼ï¼Œç„¶åŽæ ¹æ®ä¸»åŠ¨æ»šåŠ¨å…ƒç´ è‡ªèº«çš„scrollTopåšç›¸åº”çš„æ¯”ä¾‹æ¢ç®—ï¼Œå³å¯çŸ¥é“å¯¹æ–¹åŒºåŸŸçš„scrollTopå€¼ã€‚

- å…³äºŽUI
 
  - é¡¹ç›®çš„å­—ä½“åº“é€‰æ‹©äº†Font Awesomeé£Žæ ¼ï¼Œå¹¶ä¸”åªé€‰å–äº†é¡¹ç›®æ‰€éœ€è¦çš„ä¸€äº›å›¾æ ‡ã€‚
  - ç¼–è¾‘å™¨çš„æ•´ä½“csså‡å¯é€šè¿‡å…¨å±€è¦†ç›–çš„å½¢å¼è¿›è¡Œè‡ªå®šä¹‰ã€‚ç›®å‰æš‚æ—¶åªæ”¯æŒç°è‰²ä¸»é¢˜ã€‚
  - ç¼–è¾‘å™¨çš„æ˜¾ç¤ºåŒºåŸŸåŒ…æ‹¬èœå•æ ï¼Œç¼–è¾‘å™¨ï¼Œé¢„è§ˆåŒºï¼Œå·¥å…·æ ï¼Œé€šè¿‡é…ç½®ç»„ä»¶çš„configå±žæ€§ï¼Œå¯ä»¥é€‰æ‹©é»˜è®¤çš„å±•ç¤ºåŒºåŸŸã€‚
  
### Install

```js
npm install react-markdown-editor-lite --save
```

### Props

| Property | Description | Type | default | Remarks |
| --- | --- | --- | --- | --- |
| value | markdown content | String | '' | required |
| style | component container style | Object | {height: '100%'} | not required |
| config | component config | Object | {view: {...}, logger: {...}} | not required |
| onChange | emitting when editor has changed | Function | ({html, md}) => {} | not required |
| onImageUpload | when image uploaded, callback emitting will get image markdown text | (file: File, callback: (url: string) => void) => void; | ({file, callback}) => {} | not required |
| renderHTML | Render markdown text to HTML. You can return either string, function or Promise | (text: string) => string|function|Promise | none | **required** |

### Example

``` js
'use strict';
import React from 'react'
import ReactDOM from 'react-dom'
import MdEditor from 'react-markdown-editor-lite'
import MarkdownIt from 'markdown-it'
import emoji from 'markdown-it-emoji'
import subscript from 'markdown-it-sub'
import superscript from 'markdown-it-sup'
import footnote from 'markdown-it-footnote'
import deflist from 'markdown-it-deflist'
import abbreviation from 'markdown-it-abbr'
import insert from 'markdown-it-ins'
import mark from 'markdown-it-mark'
import tasklists from 'markdown-it-task-lists'
import hljs from 'highlight.js'
import 'highlight.js/styles/atom-one-light.css'
// import 'highlight.js/styles/github.css'
import './index.less';

const MOCK_DATA = "I Love React."
export default class Demo extends React.Component {
  mdEditor = null
  mdParser = null
  constructor(props) {
    super(props)
    // initial a parsera
    this.mdParser = new MarkdownIt({
      html: true,
      linkify: true,
      typographer: true,
      highlight: function (str, lang) {
        if (lang && hljs.getLanguage(lang)) {
          try {
            return hljs.highlight(lang, str).value
          } catch (__) {}
        }    
        return '' // use external default escaping
      }
    })
    .use(emoji)
    .use(subscript)
    .use(superscript)
    .use(footnote)
    .use(deflist)
    .use(abbreviation)
    .use(insert)
    .use(mark)
    .use(tasklists, { enabled: this.taskLists })
    this.renderHTML = this.renderHTML.bind(this)
  }
  handleEditorChange({html, md}) {
    console.log('handleEditorChange', html, md)
  }
  handleImageUpload(file, callback) {
    const reader = new FileReader()
    reader.onload = () => {      
      const convertBase64UrlToBlob = (urlData) => {  
        let arr = urlData.split(','), mime = arr[0].match(/:(.*?);/)[1]
        let bstr = atob(arr[1])
        let n = bstr.length
        let u8arr = new Uint8Array(n)
        while (n--) {
          u8arr[n] = bstr.charCodeAt(n)
        }
        return new Blob([u8arr], {type:mime})
      }
      const blob = convertBase64UrlToBlob(reader.result)
      setTimeout(() => {
        // setTimeout æ¨¡æ‹Ÿå¼‚æ­¥ä¸Šä¼ å›¾ç‰‡
        // å½“å¼‚æ­¥ä¸Šä¼ èŽ·å–å›¾ç‰‡åœ°å€åŽï¼Œæ‰§è¡Œcalbackå›žè°ƒï¼ˆå‚æ•°ä¸ºimageUrlå­—ç¬¦ä¸²ï¼‰ï¼Œå³å¯å°†å›¾ç‰‡åœ°å€å†™å…¥markdown
        callback('https://avatars0.githubusercontent.com/u/21263805?s=40&v=4')
      }, 1000)
    }
    reader.readAsDataURL(file)
  }
  renderHTML(text) {
    // æ¨¡æ‹Ÿå¼‚æ­¥æ¸²æŸ“Markdown
    return new Promise((resolve) => {
      setTimeout(() => {
        resolve(this.mdParser.render(text))
      }, 1000)
    })
  }
  handleGetMdValue = () => {   
    this.mdEditor && alert(this.mdEditor.getMdValue())      
  }
  handleGetHtmlValue = () => {    
    this.mdEditor && alert(this.mdEditor.getHtmlValue())
  }
  render() {
    return (      
      <div>
        <nav>
          <button onClick={this.handleGetMdValue} >getMdValue</button>  
          <button onClick={this.handleGetHtmlValue} >getHtmlValue</button>  
        </nav>
        <section style="height: 500px">
          <MdEditor 
            ref={node => this.mdEditor = node}
            value={MOCK_DATA}
            style={{height: '400px'}}
            renderHTML={this.renderHTML}
            config={{
              view: {
                menu: true,
                md: true,
                html: true
              },
              imageUrl: 'https://octodex.github.com/images/minion.png'
            }}
            onChange={this.handleEditorChange} 
            onImageUpload={this.handleImageUpload}
          />
        </section>                        
      </div>      
    )
  }
}
```

### æœ€åŽ

   æ¬¢è¿Žå¤§å®¶ä½¿ç”¨å’Œåé¦ˆï¼Œ[é¡¹ç›®åœ°å€](https://github.com/HarryChen0506/react-markdown-editor-lite) (https://github.com/HarryChen0506/react-markdown-editor-lite)ï¼Œ ä½ çš„ç‚¹èµžå°†æ˜¯æˆ‘èŽ«å¤§çš„åŠ¨åŠ›ðŸ˜Š

', firstPicture='', viewCount=0, createDate='Sun Nov 07 14:09:29 EST 2021', updateDate='Mon Nov 08 09:15:09 EST 2021'}}, total=null}
2021-11-14 20:56:56:908 [http-nio-8081-exec-1] INFO  com.ivan.sunnyblog.web.aop.ControllerAspect *** Request Success ***: 11ms GET URI=/api/admin/category, methodName=com.ivan.sunnyblog.web.controller.CategoryContoller.getCategoryList, args=[SearchVo{page=1, limit=10, categoryId=null, total=null}], result=ResultInfo{info='null', status=0, data=[Category (1, Life ), Category (2, liddffd)], total=null}
2021-11-14 20:56:56:910 [http-nio-8081-exec-10] INFO  com.ivan.sunnyblog.web.aop.ControllerAspect *** Request Success ***: 13ms GET URI=/api/admin/article/10005, methodName=com.ivan.sunnyblog.web.controller.ArticleController.getArticleDetail, args=[10005], result=ResultInfo{info='null', status=0, data=ArticleDetailVo{categoryId=1, BaseArticleVo{articleId=10005, status=1, title='dd', description='This is the doc of React markdown editor lite.
Enjoy!!', content='| Head | Head | Head | Head |
| --- | --- | --- | --- |
| Data | Data | Data | Data |
| Data | Data | Data | Data |

## æ‰‹æŠŠæ‰‹æ•™ä½ å†™ä¸€ä¸ªmarkdownç¼–è¾‘å™¨

> ç¬”è€…åœ¨18å¹´å¹´æœ«çš„æ—¶å€™æŽ¥åˆ°ä¸€ä¸ªå¼€å‘ä»»åŠ¡â€”â€”æ­å»ºä¸€ä¸ªAIé¡¹ç›®çš„å¼€æ”¾å¹³å°ï¼Œå…¶ä¸­çš„äº§å“æ–‡æ¡£ä¸ºè½¬åŒ–ä¸ºHTMLæ ¼å¼çš„markdownæ–‡æ¡£ã€‚è€ƒè™‘åˆ°æ–‡æ¡£çš„å³æ—¶æ›´æ–°ï¼Œå°†æ–‡æ¡£ä¿¡æ¯åšæˆäº†AjaxæŽ¥å£çš„å½¢å¼ã€‚å› æ­¤ç®¡ç†åŽå°åªéœ€å°†textareaè¡¨å•çš„å†…å®¹é€šè¿‡markdownè§£æžå™¨è¿›è¡ŒHTMLæ ¼å¼è½¬åŒ–ï¼Œç„¶åŽå°†markdownå†…å®¹å’Œç»è½¬åŒ–çš„HTMLæ–‡æ¡£éƒ½ä¿å­˜åˆ°æ•°æ®åº“å³å¯ã€‚
> åŸºæœ¬éœ€æ±‚å®ŒæˆåŽï¼Œä¸ºäº†æ›´å¥½çš„ç”¨æˆ·ä½“éªŒï¼Œè€ƒè™‘å°†å¸¸ç”¨çš„ç¼–è¾‘åŠŸèƒ½æ·»åŠ è¿›æ¥ã€‚æ”¹è¿›ç‰ˆä¸ä»…æ”¯æŒäº†å¸¸ç”¨çš„æ–‡æœ¬ç¼–è¾‘åŠŸèƒ½ï¼Œè¿˜å®žçŽ°çš„UIç•Œé¢çš„é…ç½®åŒ–ï¼Œè‡ªå®šä¹‰è¯­æ³•è§£æžå™¨ã€‚æœ¬ç€é€ ç¦ä¼¸æ‰‹å…šçš„ç›®çš„ï¼Œä»¥åŠç§¯ç´¯äº›å¼€æºç»éªŒï¼Œç¬”è€…å°†è¯¥react ç»„ä»¶ [react-markdown-editor-lite](https://github.com/HarryChen0506/react-markdown-editor-lite) è¿›è¡Œäº†å°è£…æ”¹é€ ï¼Œå¹¶ä¸”å‘å¸ƒåˆ°äº†å¼€æºç¤¾åŒºã€‚

### é¢„è§ˆ
åœ¨çº¿ä½“éªŒ [https://harrychen0506.github.io/react-markdown-editor-lite/](https://harrychen0506.github.io/react-markdown-editor-lite/)

![image](https://github.com//HarryChen0506/react-markdown-editor-lite/blob/master/image/react-markdown-editor-lite-v1.0.0.PNG?raw=true)

### ç‰¹ç‚¹
* è½»é‡ã€åŸºäºŽReact
* UIå¯é…ç½®, å¦‚åªæ˜¾ç¤ºç¼–è¾‘åŒºæˆ–é¢„è§ˆåŒº
* æ”¯æŒè‡ªå®šä¹‰markdownè¯­æ³•è§£æžå™¨,è¯­æ³•é«˜äº®ç­‰
* æ”¯æŒå¸¸ç”¨çš„markdownç¼–è¾‘åŠŸèƒ½ï¼Œå¦‚åŠ ç²—ï¼Œæ–œä½“ç­‰ç­‰...
* æ”¯æŒåŠŸèƒ½æŒ‰é’®æ’æ‹”åŒ–ï¼Œç”¨æˆ·å¯ä»¥è‡ªå®šä¹‰æ‰©å±•ç»„ä»¶
* æ”¯æŒç¼–è¾‘åŒºå’Œé¢„è§ˆåŒºåŒæ­¥æ»šåŠ¨

### å¼€å‘å¿ƒå¾—

- æ–‡æœ¬ç¼–è¾‘

  å¤§å¤šæ•°å¸¸è§çš„ç¼–è¾‘å™¨ï¼ŒåŒ…æ‹¬å¯Œæ–‡æœ¬ç¼–è¾‘å™¨ï¼Œåˆ©ç”¨äº†æŸäº›å…ƒç´ å¦‚divçš„contenteditableå±žæ€§ï¼Œé…åˆselectionã€rangeã€execCommandç­‰APIï¼Œå®žçŽ°äº†å¯Œæ–‡æœ¬ç¼–è¾‘åŠŸèƒ½ã€‚è¿™é‡Œé¢çš„å®žçŽ°æ¯”è¾ƒå¤æ‚ï¼Œæ‰€ä»¥æœ‰äº†"[ä¸ºä»€ä¹ˆéƒ½è¯´å¯Œæ–‡æœ¬ç¼–è¾‘å™¨æ˜¯å¤©å‘ï¼Ÿ](https://www.zhihu.com/question/38699645)"è¿™ä¸ªè¯´æ³•ã€‚

  è€Œmarkdownç¼–è¾‘å™¨ï¼Œæ ¸å¿ƒçš„å¤„ç†å†…å®¹ä¸ºç®€å•è¯­æ³•çš„çº¯æ–‡æœ¬ï¼Œå¤æ‚åº¦ç›¸å¯¹æ¥è¯´æ¯”è¾ƒä½Žï¼Œå¹¶ä¸”inputæ ‡ç­¾è‡ªå¸¦onSelectäº‹ä»¶ï¼Œå¯ä»¥å¾ˆæ–¹ä¾¿çš„èŽ·å–é€‰æ‹©ä¿¡æ¯ï¼ˆé€‰æ‹©èµ·å§‹ä½ç½®å’Œé€‰æ‹©æ–‡æœ¬å€¼ï¼‰ï¼Œå› æ­¤è¦æƒ³å®žçŽ°ç¼–è¾‘åŠŸèƒ½ï¼Œåªéœ€å°†è¦æ”¹åŠ¨çš„å†…å®¹è¿›è¡Œæ–‡æœ¬è½¬æ¢ï¼Œç„¶åŽè¿›è¡Œé‡æ–°æ‹¼æŽ¥é¦–å°¾ï¼Œå¤§åŠŸå‘Šæˆã€‚
  
- markdownè§£æž

  è€ƒå¯Ÿäº†å‡ ä¸ªç¤¾åŒºæµè¡Œçš„markdownè§£æžå™¨ï¼Œæ¯”è¾ƒæµè¡Œçš„æœ‰[markdown](https://www.npmjs.com/package/markdown), [markdown-it](https://www.npmjs.com/package/markdown-it), [marked](https://www.npmjs.com/package/marked) ç­‰ç­‰ã€‚ç»¼åˆè€ƒè™‘æ‰©å±•æ€§ä»¥åŠç¨³å®šæ€§ï¼Œç¬”è€…æŽ¨èä½¿ç”¨markdown-itä½œä¸ºmarkdownçš„è¯æ³•è§£æžå™¨ï¼Œå› ä¸ºè¯¥è§£æžå™¨æœ‰æ¯”è¾ƒå¤šçš„æ’ä»¶ï¼Œå¹¶ä¸”æ”¯æŒè¯­æ³•é«˜äº®ã€‚

- åŒæ­¥æ»šåŠ¨

  å½“é€‰æ‹©åˆ†æ ç¼–è¾‘çš„æ—¶å€™ï¼Œæ»šåŠ¨å·¦ä¾§çš„ç¼–è¾‘åŒºï¼Œå³ä¾§çš„é¢„è§ˆåŒºèƒ½è‡ªåŠ¨æ»šåŠ¨åˆ°å¯¹åº”çš„åŒºåŸŸã€‚æ–¹æ¡ˆå‚è€ƒäº†ã€Š[æ‰‹æŠŠæ‰‹æ•™ä½ ç”¨ 100è¡Œä»£ç å®žçŽ°åŸºäºŽ reactçš„ markdown è¾“å…¥ + å³æ—¶é¢„è§ˆåœ¨çº¿ç¼–è¾‘å™¨ï¼ˆä¸€ï¼‰](https://github.com/accforgit/blog-data/blob/master/%E5%9C%A8%E7%BA%BF%E7%BC%96%E8%BE%91%E5%99%A8/README/README1.md)ã€‹ã€‚åªéœ€å…ˆè®¡ç®—å‡ºè¾“å…¥æ¡†å®¹å™¨å…ƒç´ ä¸Žé¢„è§ˆæ¡†å®¹å™¨å…ƒç´ ä¹‹é—´æœ€å¤§scrollèŒƒå›´çš„æ¯”ä¾‹å€¼ï¼Œç„¶åŽæ ¹æ®ä¸»åŠ¨æ»šåŠ¨å…ƒç´ è‡ªèº«çš„scrollTopåšç›¸åº”çš„æ¯”ä¾‹æ¢ç®—ï¼Œå³å¯çŸ¥é“å¯¹æ–¹åŒºåŸŸçš„scrollTopå€¼ã€‚

- å…³äºŽUI
 
  - é¡¹ç›®çš„å­—ä½“åº“é€‰æ‹©äº†Font Awesomeé£Žæ ¼ï¼Œå¹¶ä¸”åªé€‰å–äº†é¡¹ç›®æ‰€éœ€è¦çš„ä¸€äº›å›¾æ ‡ã€‚
  - ç¼–è¾‘å™¨çš„æ•´ä½“csså‡å¯é€šè¿‡å…¨å±€è¦†ç›–çš„å½¢å¼è¿›è¡Œè‡ªå®šä¹‰ã€‚ç›®å‰æš‚æ—¶åªæ”¯æŒç°è‰²ä¸»é¢˜ã€‚
  - ç¼–è¾‘å™¨çš„æ˜¾ç¤ºåŒºåŸŸåŒ…æ‹¬èœå•æ ï¼Œç¼–è¾‘å™¨ï¼Œé¢„è§ˆåŒºï¼Œå·¥å…·æ ï¼Œé€šè¿‡é…ç½®ç»„ä»¶çš„configå±žæ€§ï¼Œå¯ä»¥é€‰æ‹©é»˜è®¤çš„å±•ç¤ºåŒºåŸŸã€‚
  
### Install

```js
npm install react-markdown-editor-lite --save
```

### Props

| Property | Description | Type | default | Remarks |
| --- | --- | --- | --- | --- |
| value | markdown content | String | '' | required |
| style | component container style | Object | {height: '100%'} | not required |
| config | component config | Object | {view: {...}, logger: {...}} | not required |
| onChange | emitting when editor has changed | Function | ({html, md}) => {} | not required |
| onImageUpload | when image uploaded, callback emitting will get image markdown text | (file: File, callback: (url: string) => void) => void; | ({file, callback}) => {} | not required |
| renderHTML | Render markdown text to HTML. You can return either string, function or Promise | (text: string) => string|function|Promise | none | **required** |

### Example

``` js
'use strict';
import React from 'react'
import ReactDOM from 'react-dom'
import MdEditor from 'react-markdown-editor-lite'
import MarkdownIt from 'markdown-it'
import emoji from 'markdown-it-emoji'
import subscript from 'markdown-it-sub'
import superscript from 'markdown-it-sup'
import footnote from 'markdown-it-footnote'
import deflist from 'markdown-it-deflist'
import abbreviation from 'markdown-it-abbr'
import insert from 'markdown-it-ins'
import mark from 'markdown-it-mark'
import tasklists from 'markdown-it-task-lists'
import hljs from 'highlight.js'
import 'highlight.js/styles/atom-one-light.css'
// import 'highlight.js/styles/github.css'
import './index.less';

const MOCK_DATA = "I Love React."
export default class Demo extends React.Component {
  mdEditor = null
  mdParser = null
  constructor(props) {
    super(props)
    // initial a parsera
    this.mdParser = new MarkdownIt({
      html: true,
      linkify: true,
      typographer: true,
      highlight: function (str, lang) {
        if (lang && hljs.getLanguage(lang)) {
          try {
            return hljs.highlight(lang, str).value
          } catch (__) {}
        }    
        return '' // use external default escaping
      }
    })
    .use(emoji)
    .use(subscript)
    .use(superscript)
    .use(footnote)
    .use(deflist)
    .use(abbreviation)
    .use(insert)
    .use(mark)
    .use(tasklists, { enabled: this.taskLists })
    this.renderHTML = this.renderHTML.bind(this)
  }
  handleEditorChange({html, md}) {
    console.log('handleEditorChange', html, md)
  }
  handleImageUpload(file, callback) {
    const reader = new FileReader()
    reader.onload = () => {      
      const convertBase64UrlToBlob = (urlData) => {  
        let arr = urlData.split(','), mime = arr[0].match(/:(.*?);/)[1]
        let bstr = atob(arr[1])
        let n = bstr.length
        let u8arr = new Uint8Array(n)
        while (n--) {
          u8arr[n] = bstr.charCodeAt(n)
        }
        return new Blob([u8arr], {type:mime})
      }
      const blob = convertBase64UrlToBlob(reader.result)
      setTimeout(() => {
        // setTimeout æ¨¡æ‹Ÿå¼‚æ­¥ä¸Šä¼ å›¾ç‰‡
        // å½“å¼‚æ­¥ä¸Šä¼ èŽ·å–å›¾ç‰‡åœ°å€åŽï¼Œæ‰§è¡Œcalbackå›žè°ƒï¼ˆå‚æ•°ä¸ºimageUrlå­—ç¬¦ä¸²ï¼‰ï¼Œå³å¯å°†å›¾ç‰‡åœ°å€å†™å…¥markdown
        callback('https://avatars0.githubusercontent.com/u/21263805?s=40&v=4')
      }, 1000)
    }
    reader.readAsDataURL(file)
  }
  renderHTML(text) {
    // æ¨¡æ‹Ÿå¼‚æ­¥æ¸²æŸ“Markdown
    return new Promise((resolve) => {
      setTimeout(() => {
        resolve(this.mdParser.render(text))
      }, 1000)
    })
  }
  handleGetMdValue = () => {   
    this.mdEditor && alert(this.mdEditor.getMdValue())      
  }
  handleGetHtmlValue = () => {    
    this.mdEditor && alert(this.mdEditor.getHtmlValue())
  }
  render() {
    return (      
      <div>
        <nav>
          <button onClick={this.handleGetMdValue} >getMdValue</button>  
          <button onClick={this.handleGetHtmlValue} >getHtmlValue</button>  
        </nav>
        <section style="height: 500px">
          <MdEditor 
            ref={node => this.mdEditor = node}
            value={MOCK_DATA}
            style={{height: '400px'}}
            renderHTML={this.renderHTML}
            config={{
              view: {
                menu: true,
                md: true,
                html: true
              },
              imageUrl: 'https://octodex.github.com/images/minion.png'
            }}
            onChange={this.handleEditorChange} 
            onImageUpload={this.handleImageUpload}
          />
        </section>                        
      </div>      
    )
  }
}
```

### æœ€åŽ

   æ¬¢è¿Žå¤§å®¶ä½¿ç”¨å’Œåé¦ˆï¼Œ[é¡¹ç›®åœ°å€](https://github.com/HarryChen0506/react-markdown-editor-lite) (https://github.com/HarryChen0506/react-markdown-editor-lite)ï¼Œ ä½ çš„ç‚¹èµžå°†æ˜¯æˆ‘èŽ«å¤§çš„åŠ¨åŠ›ðŸ˜Š

', firstPicture='', viewCount=0, createDate='Sun Nov 07 14:09:29 EST 2021', updateDate='Mon Nov 08 09:15:09 EST 2021'}}, total=null}
2021-11-14 21:16:47:784 [HikariPool-1 housekeeper] WARN  com.zaxxer.hikari.pool.HikariPool HikariPool-1 - Thread starvation or clock leap detected (housekeeper delta=7m3s504ms).
2021-11-14 21:25:32:612 [Thread-79] INFO  org.springframework.scheduling.concurrent.ThreadPoolTaskScheduler Shutting down ExecutorService 'taskScheduler'
2021-11-14 21:25:32:614 [Thread-79] INFO  org.springframework.scheduling.concurrent.ThreadPoolTaskExecutor Shutting down ExecutorService 'applicationTaskExecutor'
2021-11-14 21:25:32:616 [Thread-79] INFO  com.zaxxer.hikari.HikariDataSource HikariPool-1 - Shutdown initiated...
2021-11-14 21:25:32:618 [Thread-79] INFO  com.zaxxer.hikari.HikariDataSource HikariPool-1 - Shutdown completed.
2021-11-14 21:25:36:062 [restartedMain] INFO  com.ivan.sunnyblog.SunnyBlogApplication Starting SunnyBlogApplication on Jinghaos-MacBook-Air.local with PID 21081 (/Users/jinghaoliang/Documents/tech/Project/blogProject/SunnyBlog/target/classes started by jinghaoliang in /Users/jinghaoliang/Documents/tech/Project/blogProject/SunnyBlog)
2021-11-14 21:25:36:063 [restartedMain] INFO  com.ivan.sunnyblog.SunnyBlogApplication No active profile set, falling back to default profiles: default
2021-11-14 21:25:36:082 [restartedMain] INFO  org.springframework.boot.devtools.env.DevToolsPropertyDefaultsPostProcessor Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2021-11-14 21:25:36:082 [restartedMain] INFO  org.springframework.boot.devtools.env.DevToolsPropertyDefaultsPostProcessor For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2021-11-14 21:25:36:386 [restartedMain] INFO  org.springframework.data.repository.config.RepositoryConfigurationDelegate Multiple Spring Data modules found, entering strict repository configuration mode!
2021-11-14 21:25:36:386 [restartedMain] INFO  org.springframework.data.repository.config.RepositoryConfigurationDelegate Bootstrapping Spring Data repositories in DEFAULT mode.
2021-11-14 21:25:36:407 [restartedMain] INFO  org.springframework.data.repository.config.RepositoryConfigurationDelegate Finished Spring Data repository scanning in 15ms. Found 0 repository interfaces.
2021-11-14 21:25:36:558 [restartedMain] INFO  o.s.context.support.PostProcessorRegistrationDelegate$BeanPostProcessorChecker Bean 'org.springframework.transaction.annotation.ProxyTransactionManagementConfiguration' of type [org.springframework.transaction.annotation.ProxyTransactionManagementConfiguration$$EnhancerBySpringCGLIB$$cdc0a236] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2021-11-14 21:25:36:726 [restartedMain] INFO  org.springframework.boot.web.embedded.tomcat.TomcatWebServer Tomcat initialized with port(s): 8081 (http)
2021-11-14 21:25:36:732 [restartedMain] INFO  org.apache.coyote.http11.Http11NioProtocol Initializing ProtocolHandler ["http-nio-8081"]
2021-11-14 21:25:36:736 [restartedMain] INFO  org.apache.catalina.core.StandardService Starting service [Tomcat]
2021-11-14 21:25:36:736 [restartedMain] INFO  org.apache.catalina.core.StandardEngine Starting Servlet engine: [Apache Tomcat/9.0.21]
2021-11-14 21:25:36:797 [restartedMain] INFO  org.apache.catalina.core.ContainerBase.[Tomcat].[localhost].[/] Initializing Spring embedded WebApplicationContext
2021-11-14 21:25:36:797 [restartedMain] INFO  org.springframework.web.context.ContextLoader Root WebApplicationContext: initialization completed in 715 ms
2021-11-14 21:25:36:940 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource HikariPool-1 - Starting...
2021-11-14 21:25:36:969 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource HikariPool-1 - Start completed.
2021-11-14 21:25:47:430 [restartedMain] INFO  org.springframework.scheduling.concurrent.ThreadPoolTaskExecutor Initializing ExecutorService 'applicationTaskExecutor'
2021-11-14 21:25:47:595 [restartedMain] INFO  org.springframework.scheduling.concurrent.ThreadPoolTaskScheduler Initializing ExecutorService 'taskScheduler'
2021-11-14 21:25:47:614 [restartedMain] INFO  org.springframework.boot.devtools.autoconfigure.OptionalLiveReloadServer LiveReload server is running on port 35729
2021-11-14 21:25:47:655 [restartedMain] INFO  org.apache.coyote.http11.Http11NioProtocol Starting ProtocolHandler ["http-nio-8081"]
2021-11-14 21:25:47:668 [restartedMain] INFO  org.springframework.boot.web.embedded.tomcat.TomcatWebServer Tomcat started on port(s): 8081 (http) with context path ''
2021-11-14 21:25:47:669 [restartedMain] INFO  com.ivan.sunnyblog.SunnyBlogApplication Started SunnyBlogApplication in 11.766 seconds (JVM running for 12.245)
2021-11-14 21:27:48:643 [http-nio-8081-exec-2] INFO  org.apache.catalina.core.ContainerBase.[Tomcat].[localhost].[/] Initializing Spring DispatcherServlet 'dispatcherServlet'
2021-11-14 21:27:48:643 [http-nio-8081-exec-2] INFO  org.springframework.web.servlet.DispatcherServlet Initializing Servlet 'dispatcherServlet'
2021-11-14 21:27:48:649 [http-nio-8081-exec-2] INFO  org.springframework.web.servlet.DispatcherServlet Completed initialization in 6 ms
2021-11-14 21:27:48:858 [http-nio-8081-exec-1] INFO  org.jooq.Constants 
                                      
@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
@@@@@@@@@@@@@@@@  @@        @@@@@@@@@@
@@@@@@@@@@@@@@@@@@@@        @@@@@@@@@@
@@@@@@@@@@@@@@@@  @@  @@    @@@@@@@@@@
@@@@@@@@@@  @@@@  @@  @@    @@@@@@@@@@
@@@@@@@@@@        @@        @@@@@@@@@@
@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
@@@@@@@@@@        @@        @@@@@@@@@@
@@@@@@@@@@    @@  @@  @@@@  @@@@@@@@@@
@@@@@@@@@@    @@  @@  @@@@  @@@@@@@@@@
@@@@@@@@@@        @@  @  @  @@@@@@@@@@
@@@@@@@@@@        @@        @@@@@@@@@@
@@@@@@@@@@@@@@@@@@@@@@@  @@@@@@@@@@@@@
@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@  Thank you for using jOOQ 3.11.11
                                      
2021-11-14 21:27:48:907 [http-nio-8081-exec-1] INFO  com.ivan.sunnyblog.web.aop.ControllerAspect *** Request Success ***: 231ms GET URI=/api/admin/category, methodName=com.ivan.sunnyblog.web.controller.CategoryContoller.getCategoryList, args=[SearchVo{page=1, limit=10, categoryId=null, total=null}], result=ResultInfo{info='null', status=0, data=[Category (1, Life ), Category (2, liddffd)], total=null}
2021-11-14 21:27:48:965 [http-nio-8081-exec-2] INFO  io.lettuce.core.EpollProvider Starting without optional epoll library
2021-11-14 21:27:48:965 [http-nio-8081-exec-2] INFO  io.lettuce.core.KqueueProvider Starting without optional kqueue library
2021-11-14 21:27:49:021 [http-nio-8081-exec-2] INFO  com.ivan.sunnyblog.web.aop.ControllerAspect *** Request Success ***: 348ms GET URI=/api/admin/article/10005, methodName=com.ivan.sunnyblog.web.controller.ArticleController.getArticleDetail, args=[10005], result=ResultInfo{info='null', status=0, data=ArticleDetailVo{categoryId=1, BaseArticleVo{articleId=10005, status=1, title='dd', description='This is the doc of React markdown editor lite.
Enjoy!!', content='| Head | Head | Head | Head |
| --- | --- | --- | --- |
| Data | Data | Data | Data |
| Data | Data | Data | Data |

## æ‰‹æŠŠæ‰‹æ•™ä½ å†™ä¸€ä¸ªmarkdownç¼–è¾‘å™¨

> ç¬”è€…åœ¨18å¹´å¹´æœ«çš„æ—¶å€™æŽ¥åˆ°ä¸€ä¸ªå¼€å‘ä»»åŠ¡â€”â€”æ­å»ºä¸€ä¸ªAIé¡¹ç›®çš„å¼€æ”¾å¹³å°ï¼Œå…¶ä¸­çš„äº§å“æ–‡æ¡£ä¸ºè½¬åŒ–ä¸ºHTMLæ ¼å¼çš„markdownæ–‡æ¡£ã€‚è€ƒè™‘åˆ°æ–‡æ¡£çš„å³æ—¶æ›´æ–°ï¼Œå°†æ–‡æ¡£ä¿¡æ¯åšæˆäº†AjaxæŽ¥å£çš„å½¢å¼ã€‚å› æ­¤ç®¡ç†åŽå°åªéœ€å°†textareaè¡¨å•çš„å†…å®¹é€šè¿‡markdownè§£æžå™¨è¿›è¡ŒHTMLæ ¼å¼è½¬åŒ–ï¼Œç„¶åŽå°†markdownå†…å®¹å’Œç»è½¬åŒ–çš„HTMLæ–‡æ¡£éƒ½ä¿å­˜åˆ°æ•°æ®åº“å³å¯ã€‚
> åŸºæœ¬éœ€æ±‚å®ŒæˆåŽï¼Œä¸ºäº†æ›´å¥½çš„ç”¨æˆ·ä½“éªŒï¼Œè€ƒè™‘å°†å¸¸ç”¨çš„ç¼–è¾‘åŠŸèƒ½æ·»åŠ è¿›æ¥ã€‚æ”¹è¿›ç‰ˆä¸ä»…æ”¯æŒäº†å¸¸ç”¨çš„æ–‡æœ¬ç¼–è¾‘åŠŸèƒ½ï¼Œè¿˜å®žçŽ°çš„UIç•Œé¢çš„é…ç½®åŒ–ï¼Œè‡ªå®šä¹‰è¯­æ³•è§£æžå™¨ã€‚æœ¬ç€é€ ç¦ä¼¸æ‰‹å…šçš„ç›®çš„ï¼Œä»¥åŠç§¯ç´¯äº›å¼€æºç»éªŒï¼Œç¬”è€…å°†è¯¥react ç»„ä»¶ [react-markdown-editor-lite](https://github.com/HarryChen0506/react-markdown-editor-lite) è¿›è¡Œäº†å°è£…æ”¹é€ ï¼Œå¹¶ä¸”å‘å¸ƒåˆ°äº†å¼€æºç¤¾åŒºã€‚

### é¢„è§ˆ
åœ¨çº¿ä½“éªŒ [https://harrychen0506.github.io/react-markdown-editor-lite/](https://harrychen0506.github.io/react-markdown-editor-lite/)

![image](https://github.com//HarryChen0506/react-markdown-editor-lite/blob/master/image/react-markdown-editor-lite-v1.0.0.PNG?raw=true)

### ç‰¹ç‚¹
* è½»é‡ã€åŸºäºŽReact
* UIå¯é…ç½®, å¦‚åªæ˜¾ç¤ºç¼–è¾‘åŒºæˆ–é¢„è§ˆåŒº
* æ”¯æŒè‡ªå®šä¹‰markdownè¯­æ³•è§£æžå™¨,è¯­æ³•é«˜äº®ç­‰
* æ”¯æŒå¸¸ç”¨çš„markdownç¼–è¾‘åŠŸèƒ½ï¼Œå¦‚åŠ ç²—ï¼Œæ–œä½“ç­‰ç­‰...
* æ”¯æŒåŠŸèƒ½æŒ‰é’®æ’æ‹”åŒ–ï¼Œç”¨æˆ·å¯ä»¥è‡ªå®šä¹‰æ‰©å±•ç»„ä»¶
* æ”¯æŒç¼–è¾‘åŒºå’Œé¢„è§ˆåŒºåŒæ­¥æ»šåŠ¨

### å¼€å‘å¿ƒå¾—

- æ–‡æœ¬ç¼–è¾‘

  å¤§å¤šæ•°å¸¸è§çš„ç¼–è¾‘å™¨ï¼ŒåŒ…æ‹¬å¯Œæ–‡æœ¬ç¼–è¾‘å™¨ï¼Œåˆ©ç”¨äº†æŸäº›å…ƒç´ å¦‚divçš„contenteditableå±žæ€§ï¼Œé…åˆselectionã€rangeã€execCommandç­‰APIï¼Œå®žçŽ°äº†å¯Œæ–‡æœ¬ç¼–è¾‘åŠŸèƒ½ã€‚è¿™é‡Œé¢çš„å®žçŽ°æ¯”è¾ƒå¤æ‚ï¼Œæ‰€ä»¥æœ‰äº†"[ä¸ºä»€ä¹ˆéƒ½è¯´å¯Œæ–‡æœ¬ç¼–è¾‘å™¨æ˜¯å¤©å‘ï¼Ÿ](https://www.zhihu.com/question/38699645)"è¿™ä¸ªè¯´æ³•ã€‚

  è€Œmarkdownç¼–è¾‘å™¨ï¼Œæ ¸å¿ƒçš„å¤„ç†å†…å®¹ä¸ºç®€å•è¯­æ³•çš„çº¯æ–‡æœ¬ï¼Œå¤æ‚åº¦ç›¸å¯¹æ¥è¯´æ¯”è¾ƒä½Žï¼Œå¹¶ä¸”inputæ ‡ç­¾è‡ªå¸¦onSelectäº‹ä»¶ï¼Œå¯ä»¥å¾ˆæ–¹ä¾¿çš„èŽ·å–é€‰æ‹©ä¿¡æ¯ï¼ˆé€‰æ‹©èµ·å§‹ä½ç½®å’Œé€‰æ‹©æ–‡æœ¬å€¼ï¼‰ï¼Œå› æ­¤è¦æƒ³å®žçŽ°ç¼–è¾‘åŠŸèƒ½ï¼Œåªéœ€å°†è¦æ”¹åŠ¨çš„å†…å®¹è¿›è¡Œæ–‡æœ¬è½¬æ¢ï¼Œç„¶åŽè¿›è¡Œé‡æ–°æ‹¼æŽ¥é¦–å°¾ï¼Œå¤§åŠŸå‘Šæˆã€‚
  
- markdownè§£æž

  è€ƒå¯Ÿäº†å‡ ä¸ªç¤¾åŒºæµè¡Œçš„markdownè§£æžå™¨ï¼Œæ¯”è¾ƒæµè¡Œçš„æœ‰[markdown](https://www.npmjs.com/package/markdown), [markdown-it](https://www.npmjs.com/package/markdown-it), [marked](https://www.npmjs.com/package/marked) ç­‰ç­‰ã€‚ç»¼åˆè€ƒè™‘æ‰©å±•æ€§ä»¥åŠç¨³å®šæ€§ï¼Œç¬”è€…æŽ¨èä½¿ç”¨markdown-itä½œä¸ºmarkdownçš„è¯æ³•è§£æžå™¨ï¼Œå› ä¸ºè¯¥è§£æžå™¨æœ‰æ¯”è¾ƒå¤šçš„æ’ä»¶ï¼Œå¹¶ä¸”æ”¯æŒè¯­æ³•é«˜äº®ã€‚

- åŒæ­¥æ»šåŠ¨

  å½“é€‰æ‹©åˆ†æ ç¼–è¾‘çš„æ—¶å€™ï¼Œæ»šåŠ¨å·¦ä¾§çš„ç¼–è¾‘åŒºï¼Œå³ä¾§çš„é¢„è§ˆåŒºèƒ½è‡ªåŠ¨æ»šåŠ¨åˆ°å¯¹åº”çš„åŒºåŸŸã€‚æ–¹æ¡ˆå‚è€ƒäº†ã€Š[æ‰‹æŠŠæ‰‹æ•™ä½ ç”¨ 100è¡Œä»£ç å®žçŽ°åŸºäºŽ reactçš„ markdown è¾“å…¥ + å³æ—¶é¢„è§ˆåœ¨çº¿ç¼–è¾‘å™¨ï¼ˆä¸€ï¼‰](https://github.com/accforgit/blog-data/blob/master/%E5%9C%A8%E7%BA%BF%E7%BC%96%E8%BE%91%E5%99%A8/README/README1.md)ã€‹ã€‚åªéœ€å…ˆè®¡ç®—å‡ºè¾“å…¥æ¡†å®¹å™¨å…ƒç´ ä¸Žé¢„è§ˆæ¡†å®¹å™¨å…ƒç´ ä¹‹é—´æœ€å¤§scrollèŒƒå›´çš„æ¯”ä¾‹å€¼ï¼Œç„¶åŽæ ¹æ®ä¸»åŠ¨æ»šåŠ¨å…ƒç´ è‡ªèº«çš„scrollTopåšç›¸åº”çš„æ¯”ä¾‹æ¢ç®—ï¼Œå³å¯çŸ¥é“å¯¹æ–¹åŒºåŸŸçš„scrollTopå€¼ã€‚

- å…³äºŽUI
 
  - é¡¹ç›®çš„å­—ä½“åº“é€‰æ‹©äº†Font Awesomeé£Žæ ¼ï¼Œå¹¶ä¸”åªé€‰å–äº†é¡¹ç›®æ‰€éœ€è¦çš„ä¸€äº›å›¾æ ‡ã€‚
  - ç¼–è¾‘å™¨çš„æ•´ä½“csså‡å¯é€šè¿‡å…¨å±€è¦†ç›–çš„å½¢å¼è¿›è¡Œè‡ªå®šä¹‰ã€‚ç›®å‰æš‚æ—¶åªæ”¯æŒç°è‰²ä¸»é¢˜ã€‚
  - ç¼–è¾‘å™¨çš„æ˜¾ç¤ºåŒºåŸŸåŒ…æ‹¬èœå•æ ï¼Œç¼–è¾‘å™¨ï¼Œé¢„è§ˆåŒºï¼Œå·¥å…·æ ï¼Œé€šè¿‡é…ç½®ç»„ä»¶çš„configå±žæ€§ï¼Œå¯ä»¥é€‰æ‹©é»˜è®¤çš„å±•ç¤ºåŒºåŸŸã€‚
  
### Install

```js
npm install react-markdown-editor-lite --save
```

### Props

| Property | Description | Type | default | Remarks |
| --- | --- | --- | --- | --- |
| value | markdown content | String | '' | required |
| style | component container style | Object | {height: '100%'} | not required |
| config | component config | Object | {view: {...}, logger: {...}} | not required |
| onChange | emitting when editor has changed | Function | ({html, md}) => {} | not required |
| onImageUpload | when image uploaded, callback emitting will get image markdown text | (file: File, callback: (url: string) => void) => void; | ({file, callback}) => {} | not required |
| renderHTML | Render markdown text to HTML. You can return either string, function or Promise | (text: string) => string|function|Promise | none | **required** |

### Example

``` js
'use strict';
import React from 'react'
import ReactDOM from 'react-dom'
import MdEditor from 'react-markdown-editor-lite'
import MarkdownIt from 'markdown-it'
import emoji from 'markdown-it-emoji'
import subscript from 'markdown-it-sub'
import superscript from 'markdown-it-sup'
import footnote from 'markdown-it-footnote'
import deflist from 'markdown-it-deflist'
import abbreviation from 'markdown-it-abbr'
import insert from 'markdown-it-ins'
import mark from 'markdown-it-mark'
import tasklists from 'markdown-it-task-lists'
import hljs from 'highlight.js'
import 'highlight.js/styles/atom-one-light.css'
// import 'highlight.js/styles/github.css'
import './index.less';

const MOCK_DATA = "I Love React."
export default class Demo extends React.Component {
  mdEditor = null
  mdParser = null
  constructor(props) {
    super(props)
    // initial a parsera
    this.mdParser = new MarkdownIt({
      html: true,
      linkify: true,
      typographer: true,
      highlight: function (str, lang) {
        if (lang && hljs.getLanguage(lang)) {
          try {
            return hljs.highlight(lang, str).value
          } catch (__) {}
        }    
        return '' // use external default escaping
      }
    })
    .use(emoji)
    .use(subscript)
    .use(superscript)
    .use(footnote)
    .use(deflist)
    .use(abbreviation)
    .use(insert)
    .use(mark)
    .use(tasklists, { enabled: this.taskLists })
    this.renderHTML = this.renderHTML.bind(this)
  }
  handleEditorChange({html, md}) {
    console.log('handleEditorChange', html, md)
  }
  handleImageUpload(file, callback) {
    const reader = new FileReader()
    reader.onload = () => {      
      const convertBase64UrlToBlob = (urlData) => {  
        let arr = urlData.split(','), mime = arr[0].match(/:(.*?);/)[1]
        let bstr = atob(arr[1])
        let n = bstr.length
        let u8arr = new Uint8Array(n)
        while (n--) {
          u8arr[n] = bstr.charCodeAt(n)
        }
        return new Blob([u8arr], {type:mime})
      }
      const blob = convertBase64UrlToBlob(reader.result)
      setTimeout(() => {
        // setTimeout æ¨¡æ‹Ÿå¼‚æ­¥ä¸Šä¼ å›¾ç‰‡
        // å½“å¼‚æ­¥ä¸Šä¼ èŽ·å–å›¾ç‰‡åœ°å€åŽï¼Œæ‰§è¡Œcalbackå›žè°ƒï¼ˆå‚æ•°ä¸ºimageUrlå­—ç¬¦ä¸²ï¼‰ï¼Œå³å¯å°†å›¾ç‰‡åœ°å€å†™å…¥markdown
        callback('https://avatars0.githubusercontent.com/u/21263805?s=40&v=4')
      }, 1000)
    }
    reader.readAsDataURL(file)
  }
  renderHTML(text) {
    // æ¨¡æ‹Ÿå¼‚æ­¥æ¸²æŸ“Markdown
    return new Promise((resolve) => {
      setTimeout(() => {
        resolve(this.mdParser.render(text))
      }, 1000)
    })
  }
  handleGetMdValue = () => {   
    this.mdEditor && alert(this.mdEditor.getMdValue())      
  }
  handleGetHtmlValue = () => {    
    this.mdEditor && alert(this.mdEditor.getHtmlValue())
  }
  render() {
    return (      
      <div>
        <nav>
          <button onClick={this.handleGetMdValue} >getMdValue</button>  
          <button onClick={this.handleGetHtmlValue} >getHtmlValue</button>  
        </nav>
        <section style="height: 500px">
          <MdEditor 
            ref={node => this.mdEditor = node}
            value={MOCK_DATA}
            style={{height: '400px'}}
            renderHTML={this.renderHTML}
            config={{
              view: {
                menu: true,
                md: true,
                html: true
              },
              imageUrl: 'https://octodex.github.com/images/minion.png'
            }}
            onChange={this.handleEditorChange} 
            onImageUpload={this.handleImageUpload}
          />
        </section>                        
      </div>      
    )
  }
}
```

### æœ€åŽ

   æ¬¢è¿Žå¤§å®¶ä½¿ç”¨å’Œåé¦ˆï¼Œ[é¡¹ç›®åœ°å€](https://github.com/HarryChen0506/react-markdown-editor-lite) (https://github.com/HarryChen0506/react-markdown-editor-lite)ï¼Œ ä½ çš„ç‚¹èµžå°†æ˜¯æˆ‘èŽ«å¤§çš„åŠ¨åŠ›ðŸ˜Š

', firstPicture='', viewCount=0, createDate='Sun Nov 07 14:09:29 EST 2021', updateDate='Mon Nov 08 09:15:09 EST 2021'}}, total=null}
2021-11-14 21:27:54:185 [http-nio-8081-exec-4] INFO  com.ivan.sunnyblog.web.aop.ControllerAspect *** Request Success ***: 1ms POST URI=/api/upload, methodName=com.ivan.sunnyblog.web.controller.ResourceController.upload, args=[org.springframework.web.multipart.support.StandardMultipartHttpServletRequest$StandardMultipartFile@2f6fcd5d], result=null
2021-11-14 21:29:31:568 [http-nio-8081-exec-8] INFO  com.ivan.sunnyblog.web.aop.ControllerAspect *** Request Success ***: 4ms GET URI=/api/admin/category, methodName=com.ivan.sunnyblog.web.controller.CategoryContoller.getCategoryList, args=[SearchVo{page=1, limit=10, categoryId=null, total=null}], result=ResultInfo{info='null', status=0, data=[Category (1, Life ), Category (2, liddffd)], total=null}
2021-11-14 21:29:31:572 [http-nio-8081-exec-7] INFO  com.ivan.sunnyblog.web.aop.ControllerAspect *** Request Success ***: 8ms GET URI=/api/admin/article/10005, methodName=com.ivan.sunnyblog.web.controller.ArticleController.getArticleDetail, args=[10005], result=ResultInfo{info='null', status=0, data=ArticleDetailVo{categoryId=1, BaseArticleVo{articleId=10005, status=1, title='dd', description='This is the doc of React markdown editor lite.
Enjoy!!', content='| Head | Head | Head | Head |
| --- | --- | --- | --- |
| Data | Data | Data | Data |
| Data | Data | Data | Data |

## æ‰‹æŠŠæ‰‹æ•™ä½ å†™ä¸€ä¸ªmarkdownç¼–è¾‘å™¨

> ç¬”è€…åœ¨18å¹´å¹´æœ«çš„æ—¶å€™æŽ¥åˆ°ä¸€ä¸ªå¼€å‘ä»»åŠ¡â€”â€”æ­å»ºä¸€ä¸ªAIé¡¹ç›®çš„å¼€æ”¾å¹³å°ï¼Œå…¶ä¸­çš„äº§å“æ–‡æ¡£ä¸ºè½¬åŒ–ä¸ºHTMLæ ¼å¼çš„markdownæ–‡æ¡£ã€‚è€ƒè™‘åˆ°æ–‡æ¡£çš„å³æ—¶æ›´æ–°ï¼Œå°†æ–‡æ¡£ä¿¡æ¯åšæˆäº†AjaxæŽ¥å£çš„å½¢å¼ã€‚å› æ­¤ç®¡ç†åŽå°åªéœ€å°†textareaè¡¨å•çš„å†…å®¹é€šè¿‡markdownè§£æžå™¨è¿›è¡ŒHTMLæ ¼å¼è½¬åŒ–ï¼Œç„¶åŽå°†markdownå†…å®¹å’Œç»è½¬åŒ–çš„HTMLæ–‡æ¡£éƒ½ä¿å­˜åˆ°æ•°æ®åº“å³å¯ã€‚
> åŸºæœ¬éœ€æ±‚å®ŒæˆåŽï¼Œä¸ºäº†æ›´å¥½çš„ç”¨æˆ·ä½“éªŒï¼Œè€ƒè™‘å°†å¸¸ç”¨çš„ç¼–è¾‘åŠŸèƒ½æ·»åŠ è¿›æ¥ã€‚æ”¹è¿›ç‰ˆä¸ä»…æ”¯æŒäº†å¸¸ç”¨çš„æ–‡æœ¬ç¼–è¾‘åŠŸèƒ½ï¼Œè¿˜å®žçŽ°çš„UIç•Œé¢çš„é…ç½®åŒ–ï¼Œè‡ªå®šä¹‰è¯­æ³•è§£æžå™¨ã€‚æœ¬ç€é€ ç¦ä¼¸æ‰‹å…šçš„ç›®çš„ï¼Œä»¥åŠç§¯ç´¯äº›å¼€æºç»éªŒï¼Œç¬”è€…å°†è¯¥react ç»„ä»¶ [react-markdown-editor-lite](https://github.com/HarryChen0506/react-markdown-editor-lite) è¿›è¡Œäº†å°è£…æ”¹é€ ï¼Œå¹¶ä¸”å‘å¸ƒåˆ°äº†å¼€æºç¤¾åŒºã€‚

### é¢„è§ˆ
åœ¨çº¿ä½“éªŒ [https://harrychen0506.github.io/react-markdown-editor-lite/](https://harrychen0506.github.io/react-markdown-editor-lite/)

![image](https://github.com//HarryChen0506/react-markdown-editor-lite/blob/master/image/react-markdown-editor-lite-v1.0.0.PNG?raw=true)

### ç‰¹ç‚¹
* è½»é‡ã€åŸºäºŽReact
* UIå¯é…ç½®, å¦‚åªæ˜¾ç¤ºç¼–è¾‘åŒºæˆ–é¢„è§ˆåŒº
* æ”¯æŒè‡ªå®šä¹‰markdownè¯­æ³•è§£æžå™¨,è¯­æ³•é«˜äº®ç­‰
* æ”¯æŒå¸¸ç”¨çš„markdownç¼–è¾‘åŠŸèƒ½ï¼Œå¦‚åŠ ç²—ï¼Œæ–œä½“ç­‰ç­‰...
* æ”¯æŒåŠŸèƒ½æŒ‰é’®æ’æ‹”åŒ–ï¼Œç”¨æˆ·å¯ä»¥è‡ªå®šä¹‰æ‰©å±•ç»„ä»¶
* æ”¯æŒç¼–è¾‘åŒºå’Œé¢„è§ˆåŒºåŒæ­¥æ»šåŠ¨

### å¼€å‘å¿ƒå¾—

- æ–‡æœ¬ç¼–è¾‘

  å¤§å¤šæ•°å¸¸è§çš„ç¼–è¾‘å™¨ï¼ŒåŒ…æ‹¬å¯Œæ–‡æœ¬ç¼–è¾‘å™¨ï¼Œåˆ©ç”¨äº†æŸäº›å…ƒç´ å¦‚divçš„contenteditableå±žæ€§ï¼Œé…åˆselectionã€rangeã€execCommandç­‰APIï¼Œå®žçŽ°äº†å¯Œæ–‡æœ¬ç¼–è¾‘åŠŸèƒ½ã€‚è¿™é‡Œé¢çš„å®žçŽ°æ¯”è¾ƒå¤æ‚ï¼Œæ‰€ä»¥æœ‰äº†"[ä¸ºä»€ä¹ˆéƒ½è¯´å¯Œæ–‡æœ¬ç¼–è¾‘å™¨æ˜¯å¤©å‘ï¼Ÿ](https://www.zhihu.com/question/38699645)"è¿™ä¸ªè¯´æ³•ã€‚

  è€Œmarkdownç¼–è¾‘å™¨ï¼Œæ ¸å¿ƒçš„å¤„ç†å†…å®¹ä¸ºç®€å•è¯­æ³•çš„çº¯æ–‡æœ¬ï¼Œå¤æ‚åº¦ç›¸å¯¹æ¥è¯´æ¯”è¾ƒä½Žï¼Œå¹¶ä¸”inputæ ‡ç­¾è‡ªå¸¦onSelectäº‹ä»¶ï¼Œå¯ä»¥å¾ˆæ–¹ä¾¿çš„èŽ·å–é€‰æ‹©ä¿¡æ¯ï¼ˆé€‰æ‹©èµ·å§‹ä½ç½®å’Œé€‰æ‹©æ–‡æœ¬å€¼ï¼‰ï¼Œå› æ­¤è¦æƒ³å®žçŽ°ç¼–è¾‘åŠŸèƒ½ï¼Œåªéœ€å°†è¦æ”¹åŠ¨çš„å†…å®¹è¿›è¡Œæ–‡æœ¬è½¬æ¢ï¼Œç„¶åŽè¿›è¡Œé‡æ–°æ‹¼æŽ¥é¦–å°¾ï¼Œå¤§åŠŸå‘Šæˆã€‚
  
- markdownè§£æž

  è€ƒå¯Ÿäº†å‡ ä¸ªç¤¾åŒºæµè¡Œçš„markdownè§£æžå™¨ï¼Œæ¯”è¾ƒæµè¡Œçš„æœ‰[markdown](https://www.npmjs.com/package/markdown), [markdown-it](https://www.npmjs.com/package/markdown-it), [marked](https://www.npmjs.com/package/marked) ç­‰ç­‰ã€‚ç»¼åˆè€ƒè™‘æ‰©å±•æ€§ä»¥åŠç¨³å®šæ€§ï¼Œç¬”è€…æŽ¨èä½¿ç”¨markdown-itä½œä¸ºmarkdownçš„è¯æ³•è§£æžå™¨ï¼Œå› ä¸ºè¯¥è§£æžå™¨æœ‰æ¯”è¾ƒå¤šçš„æ’ä»¶ï¼Œå¹¶ä¸”æ”¯æŒè¯­æ³•é«˜äº®ã€‚

- åŒæ­¥æ»šåŠ¨

  å½“é€‰æ‹©åˆ†æ ç¼–è¾‘çš„æ—¶å€™ï¼Œæ»šåŠ¨å·¦ä¾§çš„ç¼–è¾‘åŒºï¼Œå³ä¾§çš„é¢„è§ˆåŒºèƒ½è‡ªåŠ¨æ»šåŠ¨åˆ°å¯¹åº”çš„åŒºåŸŸã€‚æ–¹æ¡ˆå‚è€ƒäº†ã€Š[æ‰‹æŠŠæ‰‹æ•™ä½ ç”¨ 100è¡Œä»£ç å®žçŽ°åŸºäºŽ reactçš„ markdown è¾“å…¥ + å³æ—¶é¢„è§ˆåœ¨çº¿ç¼–è¾‘å™¨ï¼ˆä¸€ï¼‰](https://github.com/accforgit/blog-data/blob/master/%E5%9C%A8%E7%BA%BF%E7%BC%96%E8%BE%91%E5%99%A8/README/README1.md)ã€‹ã€‚åªéœ€å…ˆè®¡ç®—å‡ºè¾“å…¥æ¡†å®¹å™¨å…ƒç´ ä¸Žé¢„è§ˆæ¡†å®¹å™¨å…ƒç´ ä¹‹é—´æœ€å¤§scrollèŒƒå›´çš„æ¯”ä¾‹å€¼ï¼Œç„¶åŽæ ¹æ®ä¸»åŠ¨æ»šåŠ¨å…ƒç´ è‡ªèº«çš„scrollTopåšç›¸åº”çš„æ¯”ä¾‹æ¢ç®—ï¼Œå³å¯çŸ¥é“å¯¹æ–¹åŒºåŸŸçš„scrollTopå€¼ã€‚

- å…³äºŽUI
 
  - é¡¹ç›®çš„å­—ä½“åº“é€‰æ‹©äº†Font Awesomeé£Žæ ¼ï¼Œå¹¶ä¸”åªé€‰å–äº†é¡¹ç›®æ‰€éœ€è¦çš„ä¸€äº›å›¾æ ‡ã€‚
  - ç¼–è¾‘å™¨çš„æ•´ä½“csså‡å¯é€šè¿‡å…¨å±€è¦†ç›–çš„å½¢å¼è¿›è¡Œè‡ªå®šä¹‰ã€‚ç›®å‰æš‚æ—¶åªæ”¯æŒç°è‰²ä¸»é¢˜ã€‚
  - ç¼–è¾‘å™¨çš„æ˜¾ç¤ºåŒºåŸŸåŒ…æ‹¬èœå•æ ï¼Œç¼–è¾‘å™¨ï¼Œé¢„è§ˆåŒºï¼Œå·¥å…·æ ï¼Œé€šè¿‡é…ç½®ç»„ä»¶çš„configå±žæ€§ï¼Œå¯ä»¥é€‰æ‹©é»˜è®¤çš„å±•ç¤ºåŒºåŸŸã€‚
  
### Install

```js
npm install react-markdown-editor-lite --save
```

### Props

| Property | Description | Type | default | Remarks |
| --- | --- | --- | --- | --- |
| value | markdown content | String | '' | required |
| style | component container style | Object | {height: '100%'} | not required |
| config | component config | Object | {view: {...}, logger: {...}} | not required |
| onChange | emitting when editor has changed | Function | ({html, md}) => {} | not required |
| onImageUpload | when image uploaded, callback emitting will get image markdown text | (file: File, callback: (url: string) => void) => void; | ({file, callback}) => {} | not required |
| renderHTML | Render markdown text to HTML. You can return either string, function or Promise | (text: string) => string|function|Promise | none | **required** |

### Example

``` js
'use strict';
import React from 'react'
import ReactDOM from 'react-dom'
import MdEditor from 'react-markdown-editor-lite'
import MarkdownIt from 'markdown-it'
import emoji from 'markdown-it-emoji'
import subscript from 'markdown-it-sub'
import superscript from 'markdown-it-sup'
import footnote from 'markdown-it-footnote'
import deflist from 'markdown-it-deflist'
import abbreviation from 'markdown-it-abbr'
import insert from 'markdown-it-ins'
import mark from 'markdown-it-mark'
import tasklists from 'markdown-it-task-lists'
import hljs from 'highlight.js'
import 'highlight.js/styles/atom-one-light.css'
// import 'highlight.js/styles/github.css'
import './index.less';

const MOCK_DATA = "I Love React."
export default class Demo extends React.Component {
  mdEditor = null
  mdParser = null
  constructor(props) {
    super(props)
    // initial a parsera
    this.mdParser = new MarkdownIt({
      html: true,
      linkify: true,
      typographer: true,
      highlight: function (str, lang) {
        if (lang && hljs.getLanguage(lang)) {
          try {
            return hljs.highlight(lang, str).value
          } catch (__) {}
        }    
        return '' // use external default escaping
      }
    })
    .use(emoji)
    .use(subscript)
    .use(superscript)
    .use(footnote)
    .use(deflist)
    .use(abbreviation)
    .use(insert)
    .use(mark)
    .use(tasklists, { enabled: this.taskLists })
    this.renderHTML = this.renderHTML.bind(this)
  }
  handleEditorChange({html, md}) {
    console.log('handleEditorChange', html, md)
  }
  handleImageUpload(file, callback) {
    const reader = new FileReader()
    reader.onload = () => {      
      const convertBase64UrlToBlob = (urlData) => {  
        let arr = urlData.split(','), mime = arr[0].match(/:(.*?);/)[1]
        let bstr = atob(arr[1])
        let n = bstr.length
        let u8arr = new Uint8Array(n)
        while (n--) {
          u8arr[n] = bstr.charCodeAt(n)
        }
        return new Blob([u8arr], {type:mime})
      }
      const blob = convertBase64UrlToBlob(reader.result)
      setTimeout(() => {
        // setTimeout æ¨¡æ‹Ÿå¼‚æ­¥ä¸Šä¼ å›¾ç‰‡
        // å½“å¼‚æ­¥ä¸Šä¼ èŽ·å–å›¾ç‰‡åœ°å€åŽï¼Œæ‰§è¡Œcalbackå›žè°ƒï¼ˆå‚æ•°ä¸ºimageUrlå­—ç¬¦ä¸²ï¼‰ï¼Œå³å¯å°†å›¾ç‰‡åœ°å€å†™å…¥markdown
        callback('https://avatars0.githubusercontent.com/u/21263805?s=40&v=4')
      }, 1000)
    }
    reader.readAsDataURL(file)
  }
  renderHTML(text) {
    // æ¨¡æ‹Ÿå¼‚æ­¥æ¸²æŸ“Markdown
    return new Promise((resolve) => {
      setTimeout(() => {
        resolve(this.mdParser.render(text))
      }, 1000)
    })
  }
  handleGetMdValue = () => {   
    this.mdEditor && alert(this.mdEditor.getMdValue())      
  }
  handleGetHtmlValue = () => {    
    this.mdEditor && alert(this.mdEditor.getHtmlValue())
  }
  render() {
    return (      
      <div>
        <nav>
          <button onClick={this.handleGetMdValue} >getMdValue</button>  
          <button onClick={this.handleGetHtmlValue} >getHtmlValue</button>  
        </nav>
        <section style="height: 500px">
          <MdEditor 
            ref={node => this.mdEditor = node}
            value={MOCK_DATA}
            style={{height: '400px'}}
            renderHTML={this.renderHTML}
            config={{
              view: {
                menu: true,
                md: true,
                html: true
              },
              imageUrl: 'https://octodex.github.com/images/minion.png'
            }}
            onChange={this.handleEditorChange} 
            onImageUpload={this.handleImageUpload}
          />
        </section>                        
      </div>      
    )
  }
}
```

### æœ€åŽ

   æ¬¢è¿Žå¤§å®¶ä½¿ç”¨å’Œåé¦ˆï¼Œ[é¡¹ç›®åœ°å€](https://github.com/HarryChen0506/react-markdown-editor-lite) (https://github.com/HarryChen0506/react-markdown-editor-lite)ï¼Œ ä½ çš„ç‚¹èµžå°†æ˜¯æˆ‘èŽ«å¤§çš„åŠ¨åŠ›ðŸ˜Š

', firstPicture='', viewCount=0, createDate='Sun Nov 07 14:09:29 EST 2021', updateDate='Mon Nov 08 09:15:09 EST 2021'}}, total=null}
2021-11-14 21:29:37:524 [http-nio-8081-exec-9] INFO  com.ivan.sunnyblog.web.aop.ControllerAspect *** Request Success ***: 0ms POST URI=/api/upload, methodName=com.ivan.sunnyblog.web.controller.ResourceController.upload, args=[org.springframework.web.multipart.support.StandardMultipartHttpServletRequest$StandardMultipartFile@6b06f8e5], result=null
2021-11-14 21:42:15:655 [Thread-33] INFO  org.springframework.scheduling.concurrent.ThreadPoolTaskScheduler Shutting down ExecutorService 'taskScheduler'
2021-11-14 21:42:15:656 [Thread-33] INFO  org.springframework.scheduling.concurrent.ThreadPoolTaskExecutor Shutting down ExecutorService 'applicationTaskExecutor'
2021-11-14 21:42:15:657 [Thread-33] INFO  com.zaxxer.hikari.HikariDataSource HikariPool-1 - Shutdown initiated...
2021-11-14 21:42:15:658 [Thread-33] INFO  com.zaxxer.hikari.HikariDataSource HikariPool-1 - Shutdown completed.
2021-11-14 21:42:19:173 [restartedMain] INFO  com.ivan.sunnyblog.SunnyBlogApplication Starting SunnyBlogApplication on Jinghaos-MacBook-Air.local with PID 21234 (/Users/jinghaoliang/Documents/tech/Project/blogProject/SunnyBlog/target/classes started by jinghaoliang in /Users/jinghaoliang/Documents/tech/Project/blogProject/SunnyBlog)
2021-11-14 21:42:19:174 [restartedMain] INFO  com.ivan.sunnyblog.SunnyBlogApplication No active profile set, falling back to default profiles: default
2021-11-14 21:42:19:194 [restartedMain] INFO  org.springframework.boot.devtools.env.DevToolsPropertyDefaultsPostProcessor Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2021-11-14 21:42:19:194 [restartedMain] INFO  org.springframework.boot.devtools.env.DevToolsPropertyDefaultsPostProcessor For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2021-11-14 21:42:19:522 [restartedMain] INFO  org.springframework.data.repository.config.RepositoryConfigurationDelegate Multiple Spring Data modules found, entering strict repository configuration mode!
2021-11-14 21:42:19:524 [restartedMain] INFO  org.springframework.data.repository.config.RepositoryConfigurationDelegate Bootstrapping Spring Data repositories in DEFAULT mode.
2021-11-14 21:42:19:547 [restartedMain] INFO  org.springframework.data.repository.config.RepositoryConfigurationDelegate Finished Spring Data repository scanning in 16ms. Found 0 repository interfaces.
2021-11-14 21:42:19:692 [restartedMain] INFO  o.s.context.support.PostProcessorRegistrationDelegate$BeanPostProcessorChecker Bean 'org.springframework.transaction.annotation.ProxyTransactionManagementConfiguration' of type [org.springframework.transaction.annotation.ProxyTransactionManagementConfiguration$$EnhancerBySpringCGLIB$$d6d3c737] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2021-11-14 21:42:19:861 [restartedMain] INFO  org.springframework.boot.web.embedded.tomcat.TomcatWebServer Tomcat initialized with port(s): 8081 (http)
2021-11-14 21:42:19:867 [restartedMain] INFO  org.apache.coyote.http11.Http11NioProtocol Initializing ProtocolHandler ["http-nio-8081"]
2021-11-14 21:42:19:872 [restartedMain] INFO  org.apache.catalina.core.StandardService Starting service [Tomcat]
2021-11-14 21:42:19:872 [restartedMain] INFO  org.apache.catalina.core.StandardEngine Starting Servlet engine: [Apache Tomcat/9.0.21]
2021-11-14 21:42:19:903 [restartedMain] INFO  org.apache.catalina.core.ContainerBase.[Tomcat].[localhost].[/] Initializing Spring embedded WebApplicationContext
2021-11-14 21:42:19:903 [restartedMain] INFO  org.springframework.web.context.ContextLoader Root WebApplicationContext: initialization completed in 709 ms
2021-11-14 21:42:20:080 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource HikariPool-1 - Starting...
2021-11-14 21:42:20:113 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource HikariPool-1 - Start completed.
2021-11-14 21:42:36:697 [restartedMain] INFO  org.springframework.scheduling.concurrent.ThreadPoolTaskExecutor Initializing ExecutorService 'applicationTaskExecutor'
2021-11-14 21:42:36:855 [restartedMain] INFO  org.springframework.scheduling.concurrent.ThreadPoolTaskScheduler Initializing ExecutorService 'taskScheduler'
2021-11-14 21:42:36:876 [restartedMain] INFO  org.springframework.boot.devtools.autoconfigure.OptionalLiveReloadServer LiveReload server is running on port 35729
2021-11-14 21:42:36:918 [restartedMain] INFO  org.apache.coyote.http11.Http11NioProtocol Starting ProtocolHandler ["http-nio-8081"]
2021-11-14 21:42:36:931 [restartedMain] INFO  org.springframework.boot.web.embedded.tomcat.TomcatWebServer Tomcat started on port(s): 8081 (http) with context path ''
2021-11-14 21:42:36:933 [restartedMain] INFO  com.ivan.sunnyblog.SunnyBlogApplication Started SunnyBlogApplication in 17.922 seconds (JVM running for 18.23)
2021-11-14 21:43:09:245 [http-nio-8081-exec-1] INFO  org.apache.catalina.core.ContainerBase.[Tomcat].[localhost].[/] Initializing Spring DispatcherServlet 'dispatcherServlet'
2021-11-14 21:43:09:246 [http-nio-8081-exec-1] INFO  org.springframework.web.servlet.DispatcherServlet Initializing Servlet 'dispatcherServlet'
2021-11-14 21:43:09:250 [http-nio-8081-exec-1] INFO  org.springframework.web.servlet.DispatcherServlet Completed initialization in 4 ms
2021-11-14 21:43:09:364 [http-nio-8081-exec-3] INFO  org.jooq.Constants 
                                      
@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
@@@@@@@@@@@@@@@@  @@        @@@@@@@@@@
@@@@@@@@@@@@@@@@@@@@        @@@@@@@@@@
@@@@@@@@@@@@@@@@  @@  @@    @@@@@@@@@@
@@@@@@@@@@  @@@@  @@  @@    @@@@@@@@@@
@@@@@@@@@@        @@        @@@@@@@@@@
@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
@@@@@@@@@@        @@        @@@@@@@@@@
@@@@@@@@@@    @@  @@  @@@@  @@@@@@@@@@
@@@@@@@@@@    @@  @@  @@@@  @@@@@@@@@@
@@@@@@@@@@        @@  @  @  @@@@@@@@@@
@@@@@@@@@@        @@        @@@@@@@@@@
@@@@@@@@@@@@@@@@@@@@@@@  @@@@@@@@@@@@@
@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@  Thank you for using jOOQ 3.11.11
                                      
2021-11-14 21:43:09:495 [http-nio-8081-exec-3] INFO  com.ivan.sunnyblog.web.aop.ControllerAspect *** Request Success ***: 214ms GET URI=/api/admin/category, methodName=com.ivan.sunnyblog.web.controller.CategoryContoller.getCategoryList, args=[SearchVo{page=1, limit=10, categoryId=null, total=null}], result=ResultInfo{info='null', status=0, data=[Category (1, Life ), Category (2, liddffd)], total=null}
2021-11-14 21:43:09:559 [http-nio-8081-exec-4] INFO  io.lettuce.core.EpollProvider Starting without optional epoll library
2021-11-14 21:43:09:560 [http-nio-8081-exec-4] INFO  io.lettuce.core.KqueueProvider Starting without optional kqueue library
2021-11-14 21:43:09:622 [http-nio-8081-exec-4] INFO  com.ivan.sunnyblog.web.aop.ControllerAspect *** Request Success ***: 344ms GET URI=/api/admin/article/10005, methodName=com.ivan.sunnyblog.web.controller.ArticleController.getArticleDetail, args=[10005], result=ResultInfo{info='null', status=0, data=ArticleDetailVo{categoryId=1, BaseArticleVo{articleId=10005, status=1, title='dd', description='This is the doc of React markdown editor lite.
Enjoy!!', content='| Head | Head | Head | Head |
| --- | --- | --- | --- |
| Data | Data | Data | Data |
| Data | Data | Data | Data |

## æ‰‹æŠŠæ‰‹æ•™ä½ å†™ä¸€ä¸ªmarkdownç¼–è¾‘å™¨

> ç¬”è€…åœ¨18å¹´å¹´æœ«çš„æ—¶å€™æŽ¥åˆ°ä¸€ä¸ªå¼€å‘ä»»åŠ¡â€”â€”æ­å»ºä¸€ä¸ªAIé¡¹ç›®çš„å¼€æ”¾å¹³å°ï¼Œå…¶ä¸­çš„äº§å“æ–‡æ¡£ä¸ºè½¬åŒ–ä¸ºHTMLæ ¼å¼çš„markdownæ–‡æ¡£ã€‚è€ƒè™‘åˆ°æ–‡æ¡£çš„å³æ—¶æ›´æ–°ï¼Œå°†æ–‡æ¡£ä¿¡æ¯åšæˆäº†AjaxæŽ¥å£çš„å½¢å¼ã€‚å› æ­¤ç®¡ç†åŽå°åªéœ€å°†textareaè¡¨å•çš„å†…å®¹é€šè¿‡markdownè§£æžå™¨è¿›è¡ŒHTMLæ ¼å¼è½¬åŒ–ï¼Œç„¶åŽå°†markdownå†…å®¹å’Œç»è½¬åŒ–çš„HTMLæ–‡æ¡£éƒ½ä¿å­˜åˆ°æ•°æ®åº“å³å¯ã€‚
> åŸºæœ¬éœ€æ±‚å®ŒæˆåŽï¼Œä¸ºäº†æ›´å¥½çš„ç”¨æˆ·ä½“éªŒï¼Œè€ƒè™‘å°†å¸¸ç”¨çš„ç¼–è¾‘åŠŸèƒ½æ·»åŠ è¿›æ¥ã€‚æ”¹è¿›ç‰ˆä¸ä»…æ”¯æŒäº†å¸¸ç”¨çš„æ–‡æœ¬ç¼–è¾‘åŠŸèƒ½ï¼Œè¿˜å®žçŽ°çš„UIç•Œé¢çš„é…ç½®åŒ–ï¼Œè‡ªå®šä¹‰è¯­æ³•è§£æžå™¨ã€‚æœ¬ç€é€ ç¦ä¼¸æ‰‹å…šçš„ç›®çš„ï¼Œä»¥åŠç§¯ç´¯äº›å¼€æºç»éªŒï¼Œç¬”è€…å°†è¯¥react ç»„ä»¶ [react-markdown-editor-lite](https://github.com/HarryChen0506/react-markdown-editor-lite) è¿›è¡Œäº†å°è£…æ”¹é€ ï¼Œå¹¶ä¸”å‘å¸ƒåˆ°äº†å¼€æºç¤¾åŒºã€‚

### é¢„è§ˆ
åœ¨çº¿ä½“éªŒ [https://harrychen0506.github.io/react-markdown-editor-lite/](https://harrychen0506.github.io/react-markdown-editor-lite/)

![image](https://github.com//HarryChen0506/react-markdown-editor-lite/blob/master/image/react-markdown-editor-lite-v1.0.0.PNG?raw=true)

### ç‰¹ç‚¹
* è½»é‡ã€åŸºäºŽReact
* UIå¯é…ç½®, å¦‚åªæ˜¾ç¤ºç¼–è¾‘åŒºæˆ–é¢„è§ˆåŒº
* æ”¯æŒè‡ªå®šä¹‰markdownè¯­æ³•è§£æžå™¨,è¯­æ³•é«˜äº®ç­‰
* æ”¯æŒå¸¸ç”¨çš„markdownç¼–è¾‘åŠŸèƒ½ï¼Œå¦‚åŠ ç²—ï¼Œæ–œä½“ç­‰ç­‰...
* æ”¯æŒåŠŸèƒ½æŒ‰é’®æ’æ‹”åŒ–ï¼Œç”¨æˆ·å¯ä»¥è‡ªå®šä¹‰æ‰©å±•ç»„ä»¶
* æ”¯æŒç¼–è¾‘åŒºå’Œé¢„è§ˆåŒºåŒæ­¥æ»šåŠ¨

### å¼€å‘å¿ƒå¾—

- æ–‡æœ¬ç¼–è¾‘

  å¤§å¤šæ•°å¸¸è§çš„ç¼–è¾‘å™¨ï¼ŒåŒ…æ‹¬å¯Œæ–‡æœ¬ç¼–è¾‘å™¨ï¼Œåˆ©ç”¨äº†æŸäº›å…ƒç´ å¦‚divçš„contenteditableå±žæ€§ï¼Œé…åˆselectionã€rangeã€execCommandç­‰APIï¼Œå®žçŽ°äº†å¯Œæ–‡æœ¬ç¼–è¾‘åŠŸèƒ½ã€‚è¿™é‡Œé¢çš„å®žçŽ°æ¯”è¾ƒå¤æ‚ï¼Œæ‰€ä»¥æœ‰äº†"[ä¸ºä»€ä¹ˆéƒ½è¯´å¯Œæ–‡æœ¬ç¼–è¾‘å™¨æ˜¯å¤©å‘ï¼Ÿ](https://www.zhihu.com/question/38699645)"è¿™ä¸ªè¯´æ³•ã€‚

  è€Œmarkdownç¼–è¾‘å™¨ï¼Œæ ¸å¿ƒçš„å¤„ç†å†…å®¹ä¸ºç®€å•è¯­æ³•çš„çº¯æ–‡æœ¬ï¼Œå¤æ‚åº¦ç›¸å¯¹æ¥è¯´æ¯”è¾ƒä½Žï¼Œå¹¶ä¸”inputæ ‡ç­¾è‡ªå¸¦onSelectäº‹ä»¶ï¼Œå¯ä»¥å¾ˆæ–¹ä¾¿çš„èŽ·å–é€‰æ‹©ä¿¡æ¯ï¼ˆé€‰æ‹©èµ·å§‹ä½ç½®å’Œé€‰æ‹©æ–‡æœ¬å€¼ï¼‰ï¼Œå› æ­¤è¦æƒ³å®žçŽ°ç¼–è¾‘åŠŸèƒ½ï¼Œåªéœ€å°†è¦æ”¹åŠ¨çš„å†…å®¹è¿›è¡Œæ–‡æœ¬è½¬æ¢ï¼Œç„¶åŽè¿›è¡Œé‡æ–°æ‹¼æŽ¥é¦–å°¾ï¼Œå¤§åŠŸå‘Šæˆã€‚
  
- markdownè§£æž

  è€ƒå¯Ÿäº†å‡ ä¸ªç¤¾åŒºæµè¡Œçš„markdownè§£æžå™¨ï¼Œæ¯”è¾ƒæµè¡Œçš„æœ‰[markdown](https://www.npmjs.com/package/markdown), [markdown-it](https://www.npmjs.com/package/markdown-it), [marked](https://www.npmjs.com/package/marked) ç­‰ç­‰ã€‚ç»¼åˆè€ƒè™‘æ‰©å±•æ€§ä»¥åŠç¨³å®šæ€§ï¼Œç¬”è€…æŽ¨èä½¿ç”¨markdown-itä½œä¸ºmarkdownçš„è¯æ³•è§£æžå™¨ï¼Œå› ä¸ºè¯¥è§£æžå™¨æœ‰æ¯”è¾ƒå¤šçš„æ’ä»¶ï¼Œå¹¶ä¸”æ”¯æŒè¯­æ³•é«˜äº®ã€‚

- åŒæ­¥æ»šåŠ¨

  å½“é€‰æ‹©åˆ†æ ç¼–è¾‘çš„æ—¶å€™ï¼Œæ»šåŠ¨å·¦ä¾§çš„ç¼–è¾‘åŒºï¼Œå³ä¾§çš„é¢„è§ˆåŒºèƒ½è‡ªåŠ¨æ»šåŠ¨åˆ°å¯¹åº”çš„åŒºåŸŸã€‚æ–¹æ¡ˆå‚è€ƒäº†ã€Š[æ‰‹æŠŠæ‰‹æ•™ä½ ç”¨ 100è¡Œä»£ç å®žçŽ°åŸºäºŽ reactçš„ markdown è¾“å…¥ + å³æ—¶é¢„è§ˆåœ¨çº¿ç¼–è¾‘å™¨ï¼ˆä¸€ï¼‰](https://github.com/accforgit/blog-data/blob/master/%E5%9C%A8%E7%BA%BF%E7%BC%96%E8%BE%91%E5%99%A8/README/README1.md)ã€‹ã€‚åªéœ€å…ˆè®¡ç®—å‡ºè¾“å…¥æ¡†å®¹å™¨å…ƒç´ ä¸Žé¢„è§ˆæ¡†å®¹å™¨å…ƒç´ ä¹‹é—´æœ€å¤§scrollèŒƒå›´çš„æ¯”ä¾‹å€¼ï¼Œç„¶åŽæ ¹æ®ä¸»åŠ¨æ»šåŠ¨å…ƒç´ è‡ªèº«çš„scrollTopåšç›¸åº”çš„æ¯”ä¾‹æ¢ç®—ï¼Œå³å¯çŸ¥é“å¯¹æ–¹åŒºåŸŸçš„scrollTopå€¼ã€‚

- å…³äºŽUI
 
  - é¡¹ç›®çš„å­—ä½“åº“é€‰æ‹©äº†Font Awesomeé£Žæ ¼ï¼Œå¹¶ä¸”åªé€‰å–äº†é¡¹ç›®æ‰€éœ€è¦çš„ä¸€äº›å›¾æ ‡ã€‚
  - ç¼–è¾‘å™¨çš„æ•´ä½“csså‡å¯é€šè¿‡å…¨å±€è¦†ç›–çš„å½¢å¼è¿›è¡Œè‡ªå®šä¹‰ã€‚ç›®å‰æš‚æ—¶åªæ”¯æŒç°è‰²ä¸»é¢˜ã€‚
  - ç¼–è¾‘å™¨çš„æ˜¾ç¤ºåŒºåŸŸåŒ…æ‹¬èœå•æ ï¼Œç¼–è¾‘å™¨ï¼Œé¢„è§ˆåŒºï¼Œå·¥å…·æ ï¼Œé€šè¿‡é…ç½®ç»„ä»¶çš„configå±žæ€§ï¼Œå¯ä»¥é€‰æ‹©é»˜è®¤çš„å±•ç¤ºåŒºåŸŸã€‚
  
### Install

```js
npm install react-markdown-editor-lite --save
```

### Props

| Property | Description | Type | default | Remarks |
| --- | --- | --- | --- | --- |
| value | markdown content | String | '' | required |
| style | component container style | Object | {height: '100%'} | not required |
| config | component config | Object | {view: {...}, logger: {...}} | not required |
| onChange | emitting when editor has changed | Function | ({html, md}) => {} | not required |
| onImageUpload | when image uploaded, callback emitting will get image markdown text | (file: File, callback: (url: string) => void) => void; | ({file, callback}) => {} | not required |
| renderHTML | Render markdown text to HTML. You can return either string, function or Promise | (text: string) => string|function|Promise | none | **required** |

### Example

``` js
'use strict';
import React from 'react'
import ReactDOM from 'react-dom'
import MdEditor from 'react-markdown-editor-lite'
import MarkdownIt from 'markdown-it'
import emoji from 'markdown-it-emoji'
import subscript from 'markdown-it-sub'
import superscript from 'markdown-it-sup'
import footnote from 'markdown-it-footnote'
import deflist from 'markdown-it-deflist'
import abbreviation from 'markdown-it-abbr'
import insert from 'markdown-it-ins'
import mark from 'markdown-it-mark'
import tasklists from 'markdown-it-task-lists'
import hljs from 'highlight.js'
import 'highlight.js/styles/atom-one-light.css'
// import 'highlight.js/styles/github.css'
import './index.less';

const MOCK_DATA = "I Love React."
export default class Demo extends React.Component {
  mdEditor = null
  mdParser = null
  constructor(props) {
    super(props)
    // initial a parsera
    this.mdParser = new MarkdownIt({
      html: true,
      linkify: true,
      typographer: true,
      highlight: function (str, lang) {
        if (lang && hljs.getLanguage(lang)) {
          try {
            return hljs.highlight(lang, str).value
          } catch (__) {}
        }    
        return '' // use external default escaping
      }
    })
    .use(emoji)
    .use(subscript)
    .use(superscript)
    .use(footnote)
    .use(deflist)
    .use(abbreviation)
    .use(insert)
    .use(mark)
    .use(tasklists, { enabled: this.taskLists })
    this.renderHTML = this.renderHTML.bind(this)
  }
  handleEditorChange({html, md}) {
    console.log('handleEditorChange', html, md)
  }
  handleImageUpload(file, callback) {
    const reader = new FileReader()
    reader.onload = () => {      
      const convertBase64UrlToBlob = (urlData) => {  
        let arr = urlData.split(','), mime = arr[0].match(/:(.*?);/)[1]
        let bstr = atob(arr[1])
        let n = bstr.length
        let u8arr = new Uint8Array(n)
        while (n--) {
          u8arr[n] = bstr.charCodeAt(n)
        }
        return new Blob([u8arr], {type:mime})
      }
      const blob = convertBase64UrlToBlob(reader.result)
      setTimeout(() => {
        // setTimeout æ¨¡æ‹Ÿå¼‚æ­¥ä¸Šä¼ å›¾ç‰‡
        // å½“å¼‚æ­¥ä¸Šä¼ èŽ·å–å›¾ç‰‡åœ°å€åŽï¼Œæ‰§è¡Œcalbackå›žè°ƒï¼ˆå‚æ•°ä¸ºimageUrlå­—ç¬¦ä¸²ï¼‰ï¼Œå³å¯å°†å›¾ç‰‡åœ°å€å†™å…¥markdown
        callback('https://avatars0.githubusercontent.com/u/21263805?s=40&v=4')
      }, 1000)
    }
    reader.readAsDataURL(file)
  }
  renderHTML(text) {
    // æ¨¡æ‹Ÿå¼‚æ­¥æ¸²æŸ“Markdown
    return new Promise((resolve) => {
      setTimeout(() => {
        resolve(this.mdParser.render(text))
      }, 1000)
    })
  }
  handleGetMdValue = () => {   
    this.mdEditor && alert(this.mdEditor.getMdValue())      
  }
  handleGetHtmlValue = () => {    
    this.mdEditor && alert(this.mdEditor.getHtmlValue())
  }
  render() {
    return (      
      <div>
        <nav>
          <button onClick={this.handleGetMdValue} >getMdValue</button>  
          <button onClick={this.handleGetHtmlValue} >getHtmlValue</button>  
        </nav>
        <section style="height: 500px">
          <MdEditor 
            ref={node => this.mdEditor = node}
            value={MOCK_DATA}
            style={{height: '400px'}}
            renderHTML={this.renderHTML}
            config={{
              view: {
                menu: true,
                md: true,
                html: true
              },
              imageUrl: 'https://octodex.github.com/images/minion.png'
            }}
            onChange={this.handleEditorChange} 
            onImageUpload={this.handleImageUpload}
          />
        </section>                        
      </div>      
    )
  }
}
```

### æœ€åŽ

   æ¬¢è¿Žå¤§å®¶ä½¿ç”¨å’Œåé¦ˆï¼Œ[é¡¹ç›®åœ°å€](https://github.com/HarryChen0506/react-markdown-editor-lite) (https://github.com/HarryChen0506/react-markdown-editor-lite)ï¼Œ ä½ çš„ç‚¹èµžå°†æ˜¯æˆ‘èŽ«å¤§çš„åŠ¨åŠ›ðŸ˜Š

', firstPicture='', viewCount=0, createDate='Sun Nov 07 14:09:29 EST 2021', updateDate='Mon Nov 08 09:15:09 EST 2021'}}, total=null}
2021-11-14 21:43:17:893 [http-nio-8081-exec-5] INFO  com.ivan.sunnyblog.web.res.S3ResourceManager uploading file to s3
2021-11-14 21:43:18:231 [http-nio-8081-exec-5] INFO  com.ivan.sunnyblog.web.res.S3ResourceManager uploading done. returned url: https://s3.ca-central-1.amazonaws.com/res-blog-public/res-dev/blog_1636944197893_1.png
2021-11-14 21:43:18:231 [http-nio-8081-exec-5] INFO  com.ivan.sunnyblog.web.aop.ControllerAspect *** Request Success ***: 344ms POST URI=/api/upload, methodName=com.ivan.sunnyblog.web.controller.ResourceController.upload, args=[org.springframework.web.multipart.support.StandardMultipartHttpServletRequest$StandardMultipartFile@757efd4d], result=null
2021-11-14 21:45:06:493 [http-nio-8081-exec-9] INFO  com.ivan.sunnyblog.web.aop.ControllerAspect *** Request Success ***: 2ms GET URI=/api/admin/category, methodName=com.ivan.sunnyblog.web.controller.CategoryContoller.getCategoryList, args=[SearchVo{page=1, limit=10, categoryId=null, total=null}], result=ResultInfo{info='null', status=0, data=[Category (1, Life ), Category (2, liddffd)], total=null}
2021-11-14 21:45:06:498 [http-nio-8081-exec-8] INFO  com.ivan.sunnyblog.web.aop.ControllerAspect *** Request Success ***: 8ms GET URI=/api/admin/article/10005, methodName=com.ivan.sunnyblog.web.controller.ArticleController.getArticleDetail, args=[10005], result=ResultInfo{info='null', status=0, data=ArticleDetailVo{categoryId=1, BaseArticleVo{articleId=10005, status=1, title='dd', description='This is the doc of React markdown editor lite.
Enjoy!!', content='| Head | Head | Head | Head |
| --- | --- | --- | --- |
| Data | Data | Data | Data |
| Data | Data | Data | Data |

## æ‰‹æŠŠæ‰‹æ•™ä½ å†™ä¸€ä¸ªmarkdownç¼–è¾‘å™¨

> ç¬”è€…åœ¨18å¹´å¹´æœ«çš„æ—¶å€™æŽ¥åˆ°ä¸€ä¸ªå¼€å‘ä»»åŠ¡â€”â€”æ­å»ºä¸€ä¸ªAIé¡¹ç›®çš„å¼€æ”¾å¹³å°ï¼Œå…¶ä¸­çš„äº§å“æ–‡æ¡£ä¸ºè½¬åŒ–ä¸ºHTMLæ ¼å¼çš„markdownæ–‡æ¡£ã€‚è€ƒè™‘åˆ°æ–‡æ¡£çš„å³æ—¶æ›´æ–°ï¼Œå°†æ–‡æ¡£ä¿¡æ¯åšæˆäº†AjaxæŽ¥å£çš„å½¢å¼ã€‚å› æ­¤ç®¡ç†åŽå°åªéœ€å°†textareaè¡¨å•çš„å†…å®¹é€šè¿‡markdownè§£æžå™¨è¿›è¡ŒHTMLæ ¼å¼è½¬åŒ–ï¼Œç„¶åŽå°†markdownå†…å®¹å’Œç»è½¬åŒ–çš„HTMLæ–‡æ¡£éƒ½ä¿å­˜åˆ°æ•°æ®åº“å³å¯ã€‚
> åŸºæœ¬éœ€æ±‚å®ŒæˆåŽï¼Œä¸ºäº†æ›´å¥½çš„ç”¨æˆ·ä½“éªŒï¼Œè€ƒè™‘å°†å¸¸ç”¨çš„ç¼–è¾‘åŠŸèƒ½æ·»åŠ è¿›æ¥ã€‚æ”¹è¿›ç‰ˆä¸ä»…æ”¯æŒäº†å¸¸ç”¨çš„æ–‡æœ¬ç¼–è¾‘åŠŸèƒ½ï¼Œè¿˜å®žçŽ°çš„UIç•Œé¢çš„é…ç½®åŒ–ï¼Œè‡ªå®šä¹‰è¯­æ³•è§£æžå™¨ã€‚æœ¬ç€é€ ç¦ä¼¸æ‰‹å…šçš„ç›®çš„ï¼Œä»¥åŠç§¯ç´¯äº›å¼€æºç»éªŒï¼Œç¬”è€…å°†è¯¥react ç»„ä»¶ [react-markdown-editor-lite](https://github.com/HarryChen0506/react-markdown-editor-lite) è¿›è¡Œäº†å°è£…æ”¹é€ ï¼Œå¹¶ä¸”å‘å¸ƒåˆ°äº†å¼€æºç¤¾åŒºã€‚

### é¢„è§ˆ
åœ¨çº¿ä½“éªŒ [https://harrychen0506.github.io/react-markdown-editor-lite/](https://harrychen0506.github.io/react-markdown-editor-lite/)

![image](https://github.com//HarryChen0506/react-markdown-editor-lite/blob/master/image/react-markdown-editor-lite-v1.0.0.PNG?raw=true)

### ç‰¹ç‚¹
* è½»é‡ã€åŸºäºŽReact
* UIå¯é…ç½®, å¦‚åªæ˜¾ç¤ºç¼–è¾‘åŒºæˆ–é¢„è§ˆåŒº
* æ”¯æŒè‡ªå®šä¹‰markdownè¯­æ³•è§£æžå™¨,è¯­æ³•é«˜äº®ç­‰
* æ”¯æŒå¸¸ç”¨çš„markdownç¼–è¾‘åŠŸèƒ½ï¼Œå¦‚åŠ ç²—ï¼Œæ–œä½“ç­‰ç­‰...
* æ”¯æŒåŠŸèƒ½æŒ‰é’®æ’æ‹”åŒ–ï¼Œç”¨æˆ·å¯ä»¥è‡ªå®šä¹‰æ‰©å±•ç»„ä»¶
* æ”¯æŒç¼–è¾‘åŒºå’Œé¢„è§ˆåŒºåŒæ­¥æ»šåŠ¨

### å¼€å‘å¿ƒå¾—

- æ–‡æœ¬ç¼–è¾‘

  å¤§å¤šæ•°å¸¸è§çš„ç¼–è¾‘å™¨ï¼ŒåŒ…æ‹¬å¯Œæ–‡æœ¬ç¼–è¾‘å™¨ï¼Œåˆ©ç”¨äº†æŸäº›å…ƒç´ å¦‚divçš„contenteditableå±žæ€§ï¼Œé…åˆselectionã€rangeã€execCommandç­‰APIï¼Œå®žçŽ°äº†å¯Œæ–‡æœ¬ç¼–è¾‘åŠŸèƒ½ã€‚è¿™é‡Œé¢çš„å®žçŽ°æ¯”è¾ƒå¤æ‚ï¼Œæ‰€ä»¥æœ‰äº†"[ä¸ºä»€ä¹ˆéƒ½è¯´å¯Œæ–‡æœ¬ç¼–è¾‘å™¨æ˜¯å¤©å‘ï¼Ÿ](https://www.zhihu.com/question/38699645)"è¿™ä¸ªè¯´æ³•ã€‚

  è€Œmarkdownç¼–è¾‘å™¨ï¼Œæ ¸å¿ƒçš„å¤„ç†å†…å®¹ä¸ºç®€å•è¯­æ³•çš„çº¯æ–‡æœ¬ï¼Œå¤æ‚åº¦ç›¸å¯¹æ¥è¯´æ¯”è¾ƒä½Žï¼Œå¹¶ä¸”inputæ ‡ç­¾è‡ªå¸¦onSelectäº‹ä»¶ï¼Œå¯ä»¥å¾ˆæ–¹ä¾¿çš„èŽ·å–é€‰æ‹©ä¿¡æ¯ï¼ˆé€‰æ‹©èµ·å§‹ä½ç½®å’Œé€‰æ‹©æ–‡æœ¬å€¼ï¼‰ï¼Œå› æ­¤è¦æƒ³å®žçŽ°ç¼–è¾‘åŠŸèƒ½ï¼Œåªéœ€å°†è¦æ”¹åŠ¨çš„å†…å®¹è¿›è¡Œæ–‡æœ¬è½¬æ¢ï¼Œç„¶åŽè¿›è¡Œé‡æ–°æ‹¼æŽ¥é¦–å°¾ï¼Œå¤§åŠŸå‘Šæˆã€‚
  
- markdownè§£æž

  è€ƒå¯Ÿäº†å‡ ä¸ªç¤¾åŒºæµè¡Œçš„markdownè§£æžå™¨ï¼Œæ¯”è¾ƒæµè¡Œçš„æœ‰[markdown](https://www.npmjs.com/package/markdown), [markdown-it](https://www.npmjs.com/package/markdown-it), [marked](https://www.npmjs.com/package/marked) ç­‰ç­‰ã€‚ç»¼åˆè€ƒè™‘æ‰©å±•æ€§ä»¥åŠç¨³å®šæ€§ï¼Œç¬”è€…æŽ¨èä½¿ç”¨markdown-itä½œä¸ºmarkdownçš„è¯æ³•è§£æžå™¨ï¼Œå› ä¸ºè¯¥è§£æžå™¨æœ‰æ¯”è¾ƒå¤šçš„æ’ä»¶ï¼Œå¹¶ä¸”æ”¯æŒè¯­æ³•é«˜äº®ã€‚

- åŒæ­¥æ»šåŠ¨

  å½“é€‰æ‹©åˆ†æ ç¼–è¾‘çš„æ—¶å€™ï¼Œæ»šåŠ¨å·¦ä¾§çš„ç¼–è¾‘åŒºï¼Œå³ä¾§çš„é¢„è§ˆåŒºèƒ½è‡ªåŠ¨æ»šåŠ¨åˆ°å¯¹åº”çš„åŒºåŸŸã€‚æ–¹æ¡ˆå‚è€ƒäº†ã€Š[æ‰‹æŠŠæ‰‹æ•™ä½ ç”¨ 100è¡Œä»£ç å®žçŽ°åŸºäºŽ reactçš„ markdown è¾“å…¥ + å³æ—¶é¢„è§ˆåœ¨çº¿ç¼–è¾‘å™¨ï¼ˆä¸€ï¼‰](https://github.com/accforgit/blog-data/blob/master/%E5%9C%A8%E7%BA%BF%E7%BC%96%E8%BE%91%E5%99%A8/README/README1.md)ã€‹ã€‚åªéœ€å…ˆè®¡ç®—å‡ºè¾“å…¥æ¡†å®¹å™¨å…ƒç´ ä¸Žé¢„è§ˆæ¡†å®¹å™¨å…ƒç´ ä¹‹é—´æœ€å¤§scrollèŒƒå›´çš„æ¯”ä¾‹å€¼ï¼Œç„¶åŽæ ¹æ®ä¸»åŠ¨æ»šåŠ¨å…ƒç´ è‡ªèº«çš„scrollTopåšç›¸åº”çš„æ¯”ä¾‹æ¢ç®—ï¼Œå³å¯çŸ¥é“å¯¹æ–¹åŒºåŸŸçš„scrollTopå€¼ã€‚

- å…³äºŽUI
 
  - é¡¹ç›®çš„å­—ä½“åº“é€‰æ‹©äº†Font Awesomeé£Žæ ¼ï¼Œå¹¶ä¸”åªé€‰å–äº†é¡¹ç›®æ‰€éœ€è¦çš„ä¸€äº›å›¾æ ‡ã€‚
  - ç¼–è¾‘å™¨çš„æ•´ä½“csså‡å¯é€šè¿‡å…¨å±€è¦†ç›–çš„å½¢å¼è¿›è¡Œè‡ªå®šä¹‰ã€‚ç›®å‰æš‚æ—¶åªæ”¯æŒç°è‰²ä¸»é¢˜ã€‚
  - ç¼–è¾‘å™¨çš„æ˜¾ç¤ºåŒºåŸŸåŒ…æ‹¬èœå•æ ï¼Œç¼–è¾‘å™¨ï¼Œé¢„è§ˆåŒºï¼Œå·¥å…·æ ï¼Œé€šè¿‡é…ç½®ç»„ä»¶çš„configå±žæ€§ï¼Œå¯ä»¥é€‰æ‹©é»˜è®¤çš„å±•ç¤ºåŒºåŸŸã€‚
  
### Install

```js
npm install react-markdown-editor-lite --save
```

### Props

| Property | Description | Type | default | Remarks |
| --- | --- | --- | --- | --- |
| value | markdown content | String | '' | required |
| style | component container style | Object | {height: '100%'} | not required |
| config | component config | Object | {view: {...}, logger: {...}} | not required |
| onChange | emitting when editor has changed | Function | ({html, md}) => {} | not required |
| onImageUpload | when image uploaded, callback emitting will get image markdown text | (file: File, callback: (url: string) => void) => void; | ({file, callback}) => {} | not required |
| renderHTML | Render markdown text to HTML. You can return either string, function or Promise | (text: string) => string|function|Promise | none | **required** |

### Example

``` js
'use strict';
import React from 'react'
import ReactDOM from 'react-dom'
import MdEditor from 'react-markdown-editor-lite'
import MarkdownIt from 'markdown-it'
import emoji from 'markdown-it-emoji'
import subscript from 'markdown-it-sub'
import superscript from 'markdown-it-sup'
import footnote from 'markdown-it-footnote'
import deflist from 'markdown-it-deflist'
import abbreviation from 'markdown-it-abbr'
import insert from 'markdown-it-ins'
import mark from 'markdown-it-mark'
import tasklists from 'markdown-it-task-lists'
import hljs from 'highlight.js'
import 'highlight.js/styles/atom-one-light.css'
// import 'highlight.js/styles/github.css'
import './index.less';

const MOCK_DATA = "I Love React."
export default class Demo extends React.Component {
  mdEditor = null
  mdParser = null
  constructor(props) {
    super(props)
    // initial a parsera
    this.mdParser = new MarkdownIt({
      html: true,
      linkify: true,
      typographer: true,
      highlight: function (str, lang) {
        if (lang && hljs.getLanguage(lang)) {
          try {
            return hljs.highlight(lang, str).value
          } catch (__) {}
        }    
        return '' // use external default escaping
      }
    })
    .use(emoji)
    .use(subscript)
    .use(superscript)
    .use(footnote)
    .use(deflist)
    .use(abbreviation)
    .use(insert)
    .use(mark)
    .use(tasklists, { enabled: this.taskLists })
    this.renderHTML = this.renderHTML.bind(this)
  }
  handleEditorChange({html, md}) {
    console.log('handleEditorChange', html, md)
  }
  handleImageUpload(file, callback) {
    const reader = new FileReader()
    reader.onload = () => {      
      const convertBase64UrlToBlob = (urlData) => {  
        let arr = urlData.split(','), mime = arr[0].match(/:(.*?);/)[1]
        let bstr = atob(arr[1])
        let n = bstr.length
        let u8arr = new Uint8Array(n)
        while (n--) {
          u8arr[n] = bstr.charCodeAt(n)
        }
        return new Blob([u8arr], {type:mime})
      }
      const blob = convertBase64UrlToBlob(reader.result)
      setTimeout(() => {
        // setTimeout æ¨¡æ‹Ÿå¼‚æ­¥ä¸Šä¼ å›¾ç‰‡
        // å½“å¼‚æ­¥ä¸Šä¼ èŽ·å–å›¾ç‰‡åœ°å€åŽï¼Œæ‰§è¡Œcalbackå›žè°ƒï¼ˆå‚æ•°ä¸ºimageUrlå­—ç¬¦ä¸²ï¼‰ï¼Œå³å¯å°†å›¾ç‰‡åœ°å€å†™å…¥markdown
        callback('https://avatars0.githubusercontent.com/u/21263805?s=40&v=4')
      }, 1000)
    }
    reader.readAsDataURL(file)
  }
  renderHTML(text) {
    // æ¨¡æ‹Ÿå¼‚æ­¥æ¸²æŸ“Markdown
    return new Promise((resolve) => {
      setTimeout(() => {
        resolve(this.mdParser.render(text))
      }, 1000)
    })
  }
  handleGetMdValue = () => {   
    this.mdEditor && alert(this.mdEditor.getMdValue())      
  }
  handleGetHtmlValue = () => {    
    this.mdEditor && alert(this.mdEditor.getHtmlValue())
  }
  render() {
    return (      
      <div>
        <nav>
          <button onClick={this.handleGetMdValue} >getMdValue</button>  
          <button onClick={this.handleGetHtmlValue} >getHtmlValue</button>  
        </nav>
        <section style="height: 500px">
          <MdEditor 
            ref={node => this.mdEditor = node}
            value={MOCK_DATA}
            style={{height: '400px'}}
            renderHTML={this.renderHTML}
            config={{
              view: {
                menu: true,
                md: true,
                html: true
              },
              imageUrl: 'https://octodex.github.com/images/minion.png'
            }}
            onChange={this.handleEditorChange} 
            onImageUpload={this.handleImageUpload}
          />
        </section>                        
      </div>      
    )
  }
}
```

### æœ€åŽ

   æ¬¢è¿Žå¤§å®¶ä½¿ç”¨å’Œåé¦ˆï¼Œ[é¡¹ç›®åœ°å€](https://github.com/HarryChen0506/react-markdown-editor-lite) (https://github.com/HarryChen0506/react-markdown-editor-lite)ï¼Œ ä½ çš„ç‚¹èµžå°†æ˜¯æˆ‘èŽ«å¤§çš„åŠ¨åŠ›ðŸ˜Š

', firstPicture='', viewCount=0, createDate='Sun Nov 07 14:09:29 EST 2021', updateDate='Mon Nov 08 09:15:09 EST 2021'}}, total=null}
2021-11-14 21:45:09:562 [http-nio-8081-exec-2] INFO  com.ivan.sunnyblog.web.aop.ControllerAspect *** Request Success ***: 2ms GET URI=/api/admin/category, methodName=com.ivan.sunnyblog.web.controller.CategoryContoller.getCategoryList, args=[SearchVo{page=1, limit=10, categoryId=null, total=null}], result=ResultInfo{info='null', status=0, data=[Category (1, Life ), Category (2, liddffd)], total=null}
2021-11-14 21:45:09:565 [http-nio-8081-exec-10] INFO  com.ivan.sunnyblog.web.aop.ControllerAspect *** Request Success ***: 5ms GET URI=/api/admin/article/10005, methodName=com.ivan.sunnyblog.web.controller.ArticleController.getArticleDetail, args=[10005], result=ResultInfo{info='null', status=0, data=ArticleDetailVo{categoryId=1, BaseArticleVo{articleId=10005, status=1, title='dd', description='This is the doc of React markdown editor lite.
Enjoy!!', content='| Head | Head | Head | Head |
| --- | --- | --- | --- |
| Data | Data | Data | Data |
| Data | Data | Data | Data |

## æ‰‹æŠŠæ‰‹æ•™ä½ å†™ä¸€ä¸ªmarkdownç¼–è¾‘å™¨

> ç¬”è€…åœ¨18å¹´å¹´æœ«çš„æ—¶å€™æŽ¥åˆ°ä¸€ä¸ªå¼€å‘ä»»åŠ¡â€”â€”æ­å»ºä¸€ä¸ªAIé¡¹ç›®çš„å¼€æ”¾å¹³å°ï¼Œå…¶ä¸­çš„äº§å“æ–‡æ¡£ä¸ºè½¬åŒ–ä¸ºHTMLæ ¼å¼çš„markdownæ–‡æ¡£ã€‚è€ƒè™‘åˆ°æ–‡æ¡£çš„å³æ—¶æ›´æ–°ï¼Œå°†æ–‡æ¡£ä¿¡æ¯åšæˆäº†AjaxæŽ¥å£çš„å½¢å¼ã€‚å› æ­¤ç®¡ç†åŽå°åªéœ€å°†textareaè¡¨å•çš„å†…å®¹é€šè¿‡markdownè§£æžå™¨è¿›è¡ŒHTMLæ ¼å¼è½¬åŒ–ï¼Œç„¶åŽå°†markdownå†…å®¹å’Œç»è½¬åŒ–çš„HTMLæ–‡æ¡£éƒ½ä¿å­˜åˆ°æ•°æ®åº“å³å¯ã€‚
> åŸºæœ¬éœ€æ±‚å®ŒæˆåŽï¼Œä¸ºäº†æ›´å¥½çš„ç”¨æˆ·ä½“éªŒï¼Œè€ƒè™‘å°†å¸¸ç”¨çš„ç¼–è¾‘åŠŸèƒ½æ·»åŠ è¿›æ¥ã€‚æ”¹è¿›ç‰ˆä¸ä»…æ”¯æŒäº†å¸¸ç”¨çš„æ–‡æœ¬ç¼–è¾‘åŠŸèƒ½ï¼Œè¿˜å®žçŽ°çš„UIç•Œé¢çš„é…ç½®åŒ–ï¼Œè‡ªå®šä¹‰è¯­æ³•è§£æžå™¨ã€‚æœ¬ç€é€ ç¦ä¼¸æ‰‹å…šçš„ç›®çš„ï¼Œä»¥åŠç§¯ç´¯äº›å¼€æºç»éªŒï¼Œç¬”è€…å°†è¯¥react ç»„ä»¶ [react-markdown-editor-lite](https://github.com/HarryChen0506/react-markdown-editor-lite) è¿›è¡Œäº†å°è£…æ”¹é€ ï¼Œå¹¶ä¸”å‘å¸ƒåˆ°äº†å¼€æºç¤¾åŒºã€‚

### é¢„è§ˆ
åœ¨çº¿ä½“éªŒ [https://harrychen0506.github.io/react-markdown-editor-lite/](https://harrychen0506.github.io/react-markdown-editor-lite/)

![image](https://github.com//HarryChen0506/react-markdown-editor-lite/blob/master/image/react-markdown-editor-lite-v1.0.0.PNG?raw=true)

### ç‰¹ç‚¹
* è½»é‡ã€åŸºäºŽReact
* UIå¯é…ç½®, å¦‚åªæ˜¾ç¤ºç¼–è¾‘åŒºæˆ–é¢„è§ˆåŒº
* æ”¯æŒè‡ªå®šä¹‰markdownè¯­æ³•è§£æžå™¨,è¯­æ³•é«˜äº®ç­‰
* æ”¯æŒå¸¸ç”¨çš„markdownç¼–è¾‘åŠŸèƒ½ï¼Œå¦‚åŠ ç²—ï¼Œæ–œä½“ç­‰ç­‰...
* æ”¯æŒåŠŸèƒ½æŒ‰é’®æ’æ‹”åŒ–ï¼Œç”¨æˆ·å¯ä»¥è‡ªå®šä¹‰æ‰©å±•ç»„ä»¶
* æ”¯æŒç¼–è¾‘åŒºå’Œé¢„è§ˆåŒºåŒæ­¥æ»šåŠ¨

### å¼€å‘å¿ƒå¾—

- æ–‡æœ¬ç¼–è¾‘

  å¤§å¤šæ•°å¸¸è§çš„ç¼–è¾‘å™¨ï¼ŒåŒ…æ‹¬å¯Œæ–‡æœ¬ç¼–è¾‘å™¨ï¼Œåˆ©ç”¨äº†æŸäº›å…ƒç´ å¦‚divçš„contenteditableå±žæ€§ï¼Œé…åˆselectionã€rangeã€execCommandç­‰APIï¼Œå®žçŽ°äº†å¯Œæ–‡æœ¬ç¼–è¾‘åŠŸèƒ½ã€‚è¿™é‡Œé¢çš„å®žçŽ°æ¯”è¾ƒå¤æ‚ï¼Œæ‰€ä»¥æœ‰äº†"[ä¸ºä»€ä¹ˆéƒ½è¯´å¯Œæ–‡æœ¬ç¼–è¾‘å™¨æ˜¯å¤©å‘ï¼Ÿ](https://www.zhihu.com/question/38699645)"è¿™ä¸ªè¯´æ³•ã€‚

  è€Œmarkdownç¼–è¾‘å™¨ï¼Œæ ¸å¿ƒçš„å¤„ç†å†…å®¹ä¸ºç®€å•è¯­æ³•çš„çº¯æ–‡æœ¬ï¼Œå¤æ‚åº¦ç›¸å¯¹æ¥è¯´æ¯”è¾ƒä½Žï¼Œå¹¶ä¸”inputæ ‡ç­¾è‡ªå¸¦onSelectäº‹ä»¶ï¼Œå¯ä»¥å¾ˆæ–¹ä¾¿çš„èŽ·å–é€‰æ‹©ä¿¡æ¯ï¼ˆé€‰æ‹©èµ·å§‹ä½ç½®å’Œé€‰æ‹©æ–‡æœ¬å€¼ï¼‰ï¼Œå› æ­¤è¦æƒ³å®žçŽ°ç¼–è¾‘åŠŸèƒ½ï¼Œåªéœ€å°†è¦æ”¹åŠ¨çš„å†…å®¹è¿›è¡Œæ–‡æœ¬è½¬æ¢ï¼Œç„¶åŽè¿›è¡Œé‡æ–°æ‹¼æŽ¥é¦–å°¾ï¼Œå¤§åŠŸå‘Šæˆã€‚
  
- markdownè§£æž

  è€ƒå¯Ÿäº†å‡ ä¸ªç¤¾åŒºæµè¡Œçš„markdownè§£æžå™¨ï¼Œæ¯”è¾ƒæµè¡Œçš„æœ‰[markdown](https://www.npmjs.com/package/markdown), [markdown-it](https://www.npmjs.com/package/markdown-it), [marked](https://www.npmjs.com/package/marked) ç­‰ç­‰ã€‚ç»¼åˆè€ƒè™‘æ‰©å±•æ€§ä»¥åŠç¨³å®šæ€§ï¼Œç¬”è€…æŽ¨èä½¿ç”¨markdown-itä½œä¸ºmarkdownçš„è¯æ³•è§£æžå™¨ï¼Œå› ä¸ºè¯¥è§£æžå™¨æœ‰æ¯”è¾ƒå¤šçš„æ’ä»¶ï¼Œå¹¶ä¸”æ”¯æŒè¯­æ³•é«˜äº®ã€‚

- åŒæ­¥æ»šåŠ¨

  å½“é€‰æ‹©åˆ†æ ç¼–è¾‘çš„æ—¶å€™ï¼Œæ»šåŠ¨å·¦ä¾§çš„ç¼–è¾‘åŒºï¼Œå³ä¾§çš„é¢„è§ˆåŒºèƒ½è‡ªåŠ¨æ»šåŠ¨åˆ°å¯¹åº”çš„åŒºåŸŸã€‚æ–¹æ¡ˆå‚è€ƒäº†ã€Š[æ‰‹æŠŠæ‰‹æ•™ä½ ç”¨ 100è¡Œä»£ç å®žçŽ°åŸºäºŽ reactçš„ markdown è¾“å…¥ + å³æ—¶é¢„è§ˆåœ¨çº¿ç¼–è¾‘å™¨ï¼ˆä¸€ï¼‰](https://github.com/accforgit/blog-data/blob/master/%E5%9C%A8%E7%BA%BF%E7%BC%96%E8%BE%91%E5%99%A8/README/README1.md)ã€‹ã€‚åªéœ€å…ˆè®¡ç®—å‡ºè¾“å…¥æ¡†å®¹å™¨å…ƒç´ ä¸Žé¢„è§ˆæ¡†å®¹å™¨å…ƒç´ ä¹‹é—´æœ€å¤§scrollèŒƒå›´çš„æ¯”ä¾‹å€¼ï¼Œç„¶åŽæ ¹æ®ä¸»åŠ¨æ»šåŠ¨å…ƒç´ è‡ªèº«çš„scrollTopåšç›¸åº”çš„æ¯”ä¾‹æ¢ç®—ï¼Œå³å¯çŸ¥é“å¯¹æ–¹åŒºåŸŸçš„scrollTopå€¼ã€‚

- å…³äºŽUI
 
  - é¡¹ç›®çš„å­—ä½“åº“é€‰æ‹©äº†Font Awesomeé£Žæ ¼ï¼Œå¹¶ä¸”åªé€‰å–äº†é¡¹ç›®æ‰€éœ€è¦çš„ä¸€äº›å›¾æ ‡ã€‚
  - ç¼–è¾‘å™¨çš„æ•´ä½“csså‡å¯é€šè¿‡å…¨å±€è¦†ç›–çš„å½¢å¼è¿›è¡Œè‡ªå®šä¹‰ã€‚ç›®å‰æš‚æ—¶åªæ”¯æŒç°è‰²ä¸»é¢˜ã€‚
  - ç¼–è¾‘å™¨çš„æ˜¾ç¤ºåŒºåŸŸåŒ…æ‹¬èœå•æ ï¼Œç¼–è¾‘å™¨ï¼Œé¢„è§ˆåŒºï¼Œå·¥å…·æ ï¼Œé€šè¿‡é…ç½®ç»„ä»¶çš„configå±žæ€§ï¼Œå¯ä»¥é€‰æ‹©é»˜è®¤çš„å±•ç¤ºåŒºåŸŸã€‚
  
### Install

```js
npm install react-markdown-editor-lite --save
```

### Props

| Property | Description | Type | default | Remarks |
| --- | --- | --- | --- | --- |
| value | markdown content | String | '' | required |
| style | component container style | Object | {height: '100%'} | not required |
| config | component config | Object | {view: {...}, logger: {...}} | not required |
| onChange | emitting when editor has changed | Function | ({html, md}) => {} | not required |
| onImageUpload | when image uploaded, callback emitting will get image markdown text | (file: File, callback: (url: string) => void) => void; | ({file, callback}) => {} | not required |
| renderHTML | Render markdown text to HTML. You can return either string, function or Promise | (text: string) => string|function|Promise | none | **required** |

### Example

``` js
'use strict';
import React from 'react'
import ReactDOM from 'react-dom'
import MdEditor from 'react-markdown-editor-lite'
import MarkdownIt from 'markdown-it'
import emoji from 'markdown-it-emoji'
import subscript from 'markdown-it-sub'
import superscript from 'markdown-it-sup'
import footnote from 'markdown-it-footnote'
import deflist from 'markdown-it-deflist'
import abbreviation from 'markdown-it-abbr'
import insert from 'markdown-it-ins'
import mark from 'markdown-it-mark'
import tasklists from 'markdown-it-task-lists'
import hljs from 'highlight.js'
import 'highlight.js/styles/atom-one-light.css'
// import 'highlight.js/styles/github.css'
import './index.less';

const MOCK_DATA = "I Love React."
export default class Demo extends React.Component {
  mdEditor = null
  mdParser = null
  constructor(props) {
    super(props)
    // initial a parsera
    this.mdParser = new MarkdownIt({
      html: true,
      linkify: true,
      typographer: true,
      highlight: function (str, lang) {
        if (lang && hljs.getLanguage(lang)) {
          try {
            return hljs.highlight(lang, str).value
          } catch (__) {}
        }    
        return '' // use external default escaping
      }
    })
    .use(emoji)
    .use(subscript)
    .use(superscript)
    .use(footnote)
    .use(deflist)
    .use(abbreviation)
    .use(insert)
    .use(mark)
    .use(tasklists, { enabled: this.taskLists })
    this.renderHTML = this.renderHTML.bind(this)
  }
  handleEditorChange({html, md}) {
    console.log('handleEditorChange', html, md)
  }
  handleImageUpload(file, callback) {
    const reader = new FileReader()
    reader.onload = () => {      
      const convertBase64UrlToBlob = (urlData) => {  
        let arr = urlData.split(','), mime = arr[0].match(/:(.*?);/)[1]
        let bstr = atob(arr[1])
        let n = bstr.length
        let u8arr = new Uint8Array(n)
        while (n--) {
          u8arr[n] = bstr.charCodeAt(n)
        }
        return new Blob([u8arr], {type:mime})
      }
      const blob = convertBase64UrlToBlob(reader.result)
      setTimeout(() => {
        // setTimeout æ¨¡æ‹Ÿå¼‚æ­¥ä¸Šä¼ å›¾ç‰‡
        // å½“å¼‚æ­¥ä¸Šä¼ èŽ·å–å›¾ç‰‡åœ°å€åŽï¼Œæ‰§è¡Œcalbackå›žè°ƒï¼ˆå‚æ•°ä¸ºimageUrlå­—ç¬¦ä¸²ï¼‰ï¼Œå³å¯å°†å›¾ç‰‡åœ°å€å†™å…¥markdown
        callback('https://avatars0.githubusercontent.com/u/21263805?s=40&v=4')
      }, 1000)
    }
    reader.readAsDataURL(file)
  }
  renderHTML(text) {
    // æ¨¡æ‹Ÿå¼‚æ­¥æ¸²æŸ“Markdown
    return new Promise((resolve) => {
      setTimeout(() => {
        resolve(this.mdParser.render(text))
      }, 1000)
    })
  }
  handleGetMdValue = () => {   
    this.mdEditor && alert(this.mdEditor.getMdValue())      
  }
  handleGetHtmlValue = () => {    
    this.mdEditor && alert(this.mdEditor.getHtmlValue())
  }
  render() {
    return (      
      <div>
        <nav>
          <button onClick={this.handleGetMdValue} >getMdValue</button>  
          <button onClick={this.handleGetHtmlValue} >getHtmlValue</button>  
        </nav>
        <section style="height: 500px">
          <MdEditor 
            ref={node => this.mdEditor = node}
            value={MOCK_DATA}
            style={{height: '400px'}}
            renderHTML={this.renderHTML}
            config={{
              view: {
                menu: true,
                md: true,
                html: true
              },
              imageUrl: 'https://octodex.github.com/images/minion.png'
            }}
            onChange={this.handleEditorChange} 
            onImageUpload={this.handleImageUpload}
          />
        </section>                        
      </div>      
    )
  }
}
```

### æœ€åŽ

   æ¬¢è¿Žå¤§å®¶ä½¿ç”¨å’Œåé¦ˆï¼Œ[é¡¹ç›®åœ°å€](https://github.com/HarryChen0506/react-markdown-editor-lite) (https://github.com/HarryChen0506/react-markdown-editor-lite)ï¼Œ ä½ çš„ç‚¹èµžå°†æ˜¯æˆ‘èŽ«å¤§çš„åŠ¨åŠ›ðŸ˜Š

', firstPicture='', viewCount=0, createDate='Sun Nov 07 14:09:29 EST 2021', updateDate='Mon Nov 08 09:15:09 EST 2021'}}, total=null}
2021-11-14 21:45:15:414 [http-nio-8081-exec-1] INFO  com.ivan.sunnyblog.web.res.S3ResourceManager uploading file to s3
2021-11-14 21:45:15:661 [http-nio-8081-exec-1] INFO  com.ivan.sunnyblog.web.res.S3ResourceManager uploading done. returned url: https://s3.ca-central-1.amazonaws.com/res-blog-public/res-dev/blog_1636944315414_1.png
2021-11-14 21:45:15:661 [http-nio-8081-exec-1] INFO  com.ivan.sunnyblog.web.aop.ControllerAspect *** Request Success ***: 248ms POST URI=/api/upload, methodName=com.ivan.sunnyblog.web.controller.ResourceController.upload, args=[org.springframework.web.multipart.support.StandardMultipartHttpServletRequest$StandardMultipartFile@687a8eac], result=null
2021-11-14 21:46:36:902 [Thread-43] INFO  org.springframework.scheduling.concurrent.ThreadPoolTaskScheduler Shutting down ExecutorService 'taskScheduler'
2021-11-14 21:46:36:902 [Thread-43] INFO  org.springframework.scheduling.concurrent.ThreadPoolTaskExecutor Shutting down ExecutorService 'applicationTaskExecutor'
2021-11-14 21:46:36:903 [Thread-43] INFO  com.zaxxer.hikari.HikariDataSource HikariPool-1 - Shutdown initiated...
2021-11-14 21:46:36:904 [Thread-43] INFO  com.zaxxer.hikari.HikariDataSource HikariPool-1 - Shutdown completed.
2021-11-14 21:46:40:327 [restartedMain] INFO  com.ivan.sunnyblog.SunnyBlogApplication Starting SunnyBlogApplication on Jinghaos-MacBook-Air.local with PID 21299 (/Users/jinghaoliang/Documents/tech/Project/blogProject/SunnyBlog/target/classes started by jinghaoliang in /Users/jinghaoliang/Documents/tech/Project/blogProject/SunnyBlog)
2021-11-14 21:46:40:329 [restartedMain] INFO  com.ivan.sunnyblog.SunnyBlogApplication No active profile set, falling back to default profiles: default
2021-11-14 21:46:40:347 [restartedMain] INFO  org.springframework.boot.devtools.env.DevToolsPropertyDefaultsPostProcessor Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2021-11-14 21:46:40:347 [restartedMain] INFO  org.springframework.boot.devtools.env.DevToolsPropertyDefaultsPostProcessor For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2021-11-14 21:46:40:635 [restartedMain] INFO  org.springframework.data.repository.config.RepositoryConfigurationDelegate Multiple Spring Data modules found, entering strict repository configuration mode!
2021-11-14 21:46:40:636 [restartedMain] INFO  org.springframework.data.repository.config.RepositoryConfigurationDelegate Bootstrapping Spring Data repositories in DEFAULT mode.
2021-11-14 21:46:40:657 [restartedMain] INFO  org.springframework.data.repository.config.RepositoryConfigurationDelegate Finished Spring Data repository scanning in 15ms. Found 0 repository interfaces.
2021-11-14 21:46:40:813 [restartedMain] INFO  o.s.context.support.PostProcessorRegistrationDelegate$BeanPostProcessorChecker Bean 'org.springframework.transaction.annotation.ProxyTransactionManagementConfiguration' of type [org.springframework.transaction.annotation.ProxyTransactionManagementConfiguration$$EnhancerBySpringCGLIB$$29fa11a0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2021-11-14 21:46:40:979 [restartedMain] INFO  org.springframework.boot.web.embedded.tomcat.TomcatWebServer Tomcat initialized with port(s): 8081 (http)
2021-11-14 21:46:40:986 [restartedMain] INFO  org.apache.coyote.http11.Http11NioProtocol Initializing ProtocolHandler ["http-nio-8081"]
2021-11-14 21:46:40:991 [restartedMain] INFO  org.apache.catalina.core.StandardService Starting service [Tomcat]
2021-11-14 21:46:40:991 [restartedMain] INFO  org.apache.catalina.core.StandardEngine Starting Servlet engine: [Apache Tomcat/9.0.21]
2021-11-14 21:46:41:054 [restartedMain] INFO  org.apache.catalina.core.ContainerBase.[Tomcat].[localhost].[/] Initializing Spring embedded WebApplicationContext
2021-11-14 21:46:41:054 [restartedMain] INFO  org.springframework.web.context.ContextLoader Root WebApplicationContext: initialization completed in 707 ms
2021-11-14 21:46:41:230 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource HikariPool-1 - Starting...
2021-11-14 21:46:41:260 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource HikariPool-1 - Start completed.
2021-11-14 21:46:53:946 [restartedMain] INFO  org.springframework.scheduling.concurrent.ThreadPoolTaskExecutor Initializing ExecutorService 'applicationTaskExecutor'
2021-11-14 21:46:54:103 [restartedMain] INFO  org.springframework.scheduling.concurrent.ThreadPoolTaskScheduler Initializing ExecutorService 'taskScheduler'
2021-11-14 21:46:54:122 [restartedMain] INFO  org.springframework.boot.devtools.autoconfigure.OptionalLiveReloadServer LiveReload server is running on port 35729
2021-11-14 21:46:54:164 [restartedMain] INFO  org.apache.coyote.http11.Http11NioProtocol Starting ProtocolHandler ["http-nio-8081"]
2021-11-14 21:46:54:178 [restartedMain] INFO  org.springframework.boot.web.embedded.tomcat.TomcatWebServer Tomcat started on port(s): 8081 (http) with context path ''
2021-11-14 21:46:54:180 [restartedMain] INFO  com.ivan.sunnyblog.SunnyBlogApplication Started SunnyBlogApplication in 14.022 seconds (JVM running for 14.609)
2021-11-14 21:46:59:629 [Thread-37] INFO  org.springframework.scheduling.concurrent.ThreadPoolTaskScheduler Shutting down ExecutorService 'taskScheduler'
2021-11-14 21:46:59:630 [Thread-37] INFO  org.springframework.scheduling.concurrent.ThreadPoolTaskExecutor Shutting down ExecutorService 'applicationTaskExecutor'
2021-11-14 21:46:59:632 [Thread-37] INFO  com.zaxxer.hikari.HikariDataSource HikariPool-1 - Shutdown initiated...
2021-11-14 21:46:59:633 [Thread-37] INFO  com.zaxxer.hikari.HikariDataSource HikariPool-1 - Shutdown completed.
2021-11-14 21:47:01:439 [restartedMain] INFO  com.ivan.sunnyblog.SunnyBlogApplication Starting SunnyBlogApplication on Jinghaos-MacBook-Air.local with PID 21314 (/Users/jinghaoliang/Documents/tech/Project/blogProject/SunnyBlog/target/classes started by jinghaoliang in /Users/jinghaoliang/Documents/tech/Project/blogProject/SunnyBlog)
2021-11-14 21:47:01:440 [restartedMain] INFO  com.ivan.sunnyblog.SunnyBlogApplication No active profile set, falling back to default profiles: default
2021-11-14 21:47:01:465 [restartedMain] INFO  org.springframework.boot.devtools.env.DevToolsPropertyDefaultsPostProcessor Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2021-11-14 21:47:01:466 [restartedMain] INFO  org.springframework.boot.devtools.env.DevToolsPropertyDefaultsPostProcessor For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2021-11-14 21:47:01:789 [restartedMain] INFO  org.springframework.data.repository.config.RepositoryConfigurationDelegate Multiple Spring Data modules found, entering strict repository configuration mode!
2021-11-14 21:47:01:790 [restartedMain] INFO  org.springframework.data.repository.config.RepositoryConfigurationDelegate Bootstrapping Spring Data repositories in DEFAULT mode.
2021-11-14 21:47:01:812 [restartedMain] INFO  org.springframework.data.repository.config.RepositoryConfigurationDelegate Finished Spring Data repository scanning in 16ms. Found 0 repository interfaces.
2021-11-14 21:47:01:958 [restartedMain] INFO  o.s.context.support.PostProcessorRegistrationDelegate$BeanPostProcessorChecker Bean 'org.springframework.transaction.annotation.ProxyTransactionManagementConfiguration' of type [org.springframework.transaction.annotation.ProxyTransactionManagementConfiguration$$EnhancerBySpringCGLIB$$2322f72a] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2021-11-14 21:47:02:126 [restartedMain] INFO  org.springframework.boot.web.embedded.tomcat.TomcatWebServer Tomcat initialized with port(s): 8081 (http)
2021-11-14 21:47:02:132 [restartedMain] INFO  org.apache.coyote.http11.Http11NioProtocol Initializing ProtocolHandler ["http-nio-8081"]
2021-11-14 21:47:02:137 [restartedMain] INFO  org.apache.catalina.core.StandardService Starting service [Tomcat]
2021-11-14 21:47:02:137 [restartedMain] INFO  org.apache.catalina.core.StandardEngine Starting Servlet engine: [Apache Tomcat/9.0.21]
2021-11-14 21:47:02:197 [restartedMain] INFO  org.apache.catalina.core.ContainerBase.[Tomcat].[localhost].[/] Initializing Spring embedded WebApplicationContext
2021-11-14 21:47:02:197 [restartedMain] INFO  org.springframework.web.context.ContextLoader Root WebApplicationContext: initialization completed in 731 ms
2021-11-14 21:47:02:337 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource HikariPool-1 - Starting...
2021-11-14 21:47:02:369 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource HikariPool-1 - Start completed.
2021-11-14 21:47:23:505 [restartedMain] INFO  org.springframework.scheduling.concurrent.ThreadPoolTaskExecutor Initializing ExecutorService 'applicationTaskExecutor'
2021-11-14 21:47:23:660 [restartedMain] INFO  org.springframework.scheduling.concurrent.ThreadPoolTaskScheduler Initializing ExecutorService 'taskScheduler'
2021-11-14 21:47:23:678 [restartedMain] INFO  org.springframework.boot.devtools.autoconfigure.OptionalLiveReloadServer LiveReload server is running on port 35729
2021-11-14 21:47:23:718 [restartedMain] INFO  org.apache.coyote.http11.Http11NioProtocol Starting ProtocolHandler ["http-nio-8081"]
2021-11-14 21:47:23:731 [restartedMain] INFO  org.springframework.boot.web.embedded.tomcat.TomcatWebServer Tomcat started on port(s): 8081 (http) with context path ''
2021-11-14 21:47:23:733 [restartedMain] INFO  com.ivan.sunnyblog.SunnyBlogApplication Started SunnyBlogApplication in 22.46 seconds (JVM running for 22.757)
2021-11-14 21:48:24:877 [http-nio-8081-exec-1] INFO  org.apache.catalina.core.ContainerBase.[Tomcat].[localhost].[/] Initializing Spring DispatcherServlet 'dispatcherServlet'
2021-11-14 21:48:24:877 [http-nio-8081-exec-1] INFO  org.springframework.web.servlet.DispatcherServlet Initializing Servlet 'dispatcherServlet'
2021-11-14 21:48:24:882 [http-nio-8081-exec-1] INFO  org.springframework.web.servlet.DispatcherServlet Completed initialization in 5 ms
2021-11-14 21:48:25:089 [http-nio-8081-exec-1] INFO  org.jooq.Constants 
                                      
@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
@@@@@@@@@@@@@@@@  @@        @@@@@@@@@@
@@@@@@@@@@@@@@@@@@@@        @@@@@@@@@@
@@@@@@@@@@@@@@@@  @@  @@    @@@@@@@@@@
@@@@@@@@@@  @@@@  @@  @@    @@@@@@@@@@
@@@@@@@@@@        @@        @@@@@@@@@@
@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
@@@@@@@@@@        @@        @@@@@@@@@@
@@@@@@@@@@    @@  @@  @@@@  @@@@@@@@@@
@@@@@@@@@@    @@  @@  @@@@  @@@@@@@@@@
@@@@@@@@@@        @@  @  @  @@@@@@@@@@
@@@@@@@@@@        @@        @@@@@@@@@@
@@@@@@@@@@@@@@@@@@@@@@@  @@@@@@@@@@@@@
@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@  Thank you for using jOOQ 3.11.11
                                      
2021-11-14 21:48:25:134 [http-nio-8081-exec-2] INFO  com.ivan.sunnyblog.web.aop.ControllerAspect *** Request Success ***: 220ms GET URI=/api/admin/category, methodName=com.ivan.sunnyblog.web.controller.CategoryContoller.getCategoryList, args=[SearchVo{page=1, limit=10, categoryId=null, total=null}], result=ResultInfo{info='null', status=0, data=[Category (1, Life ), Category (2, liddffd)], total=null}
2021-11-14 21:48:25:194 [http-nio-8081-exec-1] INFO  io.lettuce.core.EpollProvider Starting without optional epoll library
2021-11-14 21:48:25:195 [http-nio-8081-exec-1] INFO  io.lettuce.core.KqueueProvider Starting without optional kqueue library
2021-11-14 21:48:25:254 [http-nio-8081-exec-1] INFO  com.ivan.sunnyblog.web.aop.ControllerAspect *** Request Success ***: 341ms GET URI=/api/admin/article/10005, methodName=com.ivan.sunnyblog.web.controller.ArticleController.getArticleDetail, args=[10005], result=ResultInfo{info='null', status=0, data=ArticleDetailVo{categoryId=1, BaseArticleVo{articleId=10005, status=1, title='dd', description='This is the doc of React markdown editor lite.
Enjoy!!', content='| Head | Head | Head | Head |
| --- | --- | --- | --- |
| Data | Data | Data | Data |
| Data | Data | Data | Data |

## æ‰‹æŠŠæ‰‹æ•™ä½ å†™ä¸€ä¸ªmarkdownç¼–è¾‘å™¨

> ç¬”è€…åœ¨18å¹´å¹´æœ«çš„æ—¶å€™æŽ¥åˆ°ä¸€ä¸ªå¼€å‘ä»»åŠ¡â€”â€”æ­å»ºä¸€ä¸ªAIé¡¹ç›®çš„å¼€æ”¾å¹³å°ï¼Œå…¶ä¸­çš„äº§å“æ–‡æ¡£ä¸ºè½¬åŒ–ä¸ºHTMLæ ¼å¼çš„markdownæ–‡æ¡£ã€‚è€ƒè™‘åˆ°æ–‡æ¡£çš„å³æ—¶æ›´æ–°ï¼Œå°†æ–‡æ¡£ä¿¡æ¯åšæˆäº†AjaxæŽ¥å£çš„å½¢å¼ã€‚å› æ­¤ç®¡ç†åŽå°åªéœ€å°†textareaè¡¨å•çš„å†…å®¹é€šè¿‡markdownè§£æžå™¨è¿›è¡ŒHTMLæ ¼å¼è½¬åŒ–ï¼Œç„¶åŽå°†markdownå†…å®¹å’Œç»è½¬åŒ–çš„HTMLæ–‡æ¡£éƒ½ä¿å­˜åˆ°æ•°æ®åº“å³å¯ã€‚
> åŸºæœ¬éœ€æ±‚å®ŒæˆåŽï¼Œä¸ºäº†æ›´å¥½çš„ç”¨æˆ·ä½“éªŒï¼Œè€ƒè™‘å°†å¸¸ç”¨çš„ç¼–è¾‘åŠŸèƒ½æ·»åŠ è¿›æ¥ã€‚æ”¹è¿›ç‰ˆä¸ä»…æ”¯æŒäº†å¸¸ç”¨çš„æ–‡æœ¬ç¼–è¾‘åŠŸèƒ½ï¼Œè¿˜å®žçŽ°çš„UIç•Œé¢çš„é…ç½®åŒ–ï¼Œè‡ªå®šä¹‰è¯­æ³•è§£æžå™¨ã€‚æœ¬ç€é€ ç¦ä¼¸æ‰‹å…šçš„ç›®çš„ï¼Œä»¥åŠç§¯ç´¯äº›å¼€æºç»éªŒï¼Œç¬”è€…å°†è¯¥react ç»„ä»¶ [react-markdown-editor-lite](https://github.com/HarryChen0506/react-markdown-editor-lite) è¿›è¡Œäº†å°è£…æ”¹é€ ï¼Œå¹¶ä¸”å‘å¸ƒåˆ°äº†å¼€æºç¤¾åŒºã€‚

### é¢„è§ˆ
åœ¨çº¿ä½“éªŒ [https://harrychen0506.github.io/react-markdown-editor-lite/](https://harrychen0506.github.io/react-markdown-editor-lite/)

![image](https://github.com//HarryChen0506/react-markdown-editor-lite/blob/master/image/react-markdown-editor-lite-v1.0.0.PNG?raw=true)

### ç‰¹ç‚¹
* è½»é‡ã€åŸºäºŽReact
* UIå¯é…ç½®, å¦‚åªæ˜¾ç¤ºç¼–è¾‘åŒºæˆ–é¢„è§ˆåŒº
* æ”¯æŒè‡ªå®šä¹‰markdownè¯­æ³•è§£æžå™¨,è¯­æ³•é«˜äº®ç­‰
* æ”¯æŒå¸¸ç”¨çš„markdownç¼–è¾‘åŠŸèƒ½ï¼Œå¦‚åŠ ç²—ï¼Œæ–œä½“ç­‰ç­‰...
* æ”¯æŒåŠŸèƒ½æŒ‰é’®æ’æ‹”åŒ–ï¼Œç”¨æˆ·å¯ä»¥è‡ªå®šä¹‰æ‰©å±•ç»„ä»¶
* æ”¯æŒç¼–è¾‘åŒºå’Œé¢„è§ˆåŒºåŒæ­¥æ»šåŠ¨

### å¼€å‘å¿ƒå¾—

- æ–‡æœ¬ç¼–è¾‘

  å¤§å¤šæ•°å¸¸è§çš„ç¼–è¾‘å™¨ï¼ŒåŒ…æ‹¬å¯Œæ–‡æœ¬ç¼–è¾‘å™¨ï¼Œåˆ©ç”¨äº†æŸäº›å…ƒç´ å¦‚divçš„contenteditableå±žæ€§ï¼Œé…åˆselectionã€rangeã€execCommandç­‰APIï¼Œå®žçŽ°äº†å¯Œæ–‡æœ¬ç¼–è¾‘åŠŸèƒ½ã€‚è¿™é‡Œé¢çš„å®žçŽ°æ¯”è¾ƒå¤æ‚ï¼Œæ‰€ä»¥æœ‰äº†"[ä¸ºä»€ä¹ˆéƒ½è¯´å¯Œæ–‡æœ¬ç¼–è¾‘å™¨æ˜¯å¤©å‘ï¼Ÿ](https://www.zhihu.com/question/38699645)"è¿™ä¸ªè¯´æ³•ã€‚

  è€Œmarkdownç¼–è¾‘å™¨ï¼Œæ ¸å¿ƒçš„å¤„ç†å†…å®¹ä¸ºç®€å•è¯­æ³•çš„çº¯æ–‡æœ¬ï¼Œå¤æ‚åº¦ç›¸å¯¹æ¥è¯´æ¯”è¾ƒä½Žï¼Œå¹¶ä¸”inputæ ‡ç­¾è‡ªå¸¦onSelectäº‹ä»¶ï¼Œå¯ä»¥å¾ˆæ–¹ä¾¿çš„èŽ·å–é€‰æ‹©ä¿¡æ¯ï¼ˆé€‰æ‹©èµ·å§‹ä½ç½®å’Œé€‰æ‹©æ–‡æœ¬å€¼ï¼‰ï¼Œå› æ­¤è¦æƒ³å®žçŽ°ç¼–è¾‘åŠŸèƒ½ï¼Œåªéœ€å°†è¦æ”¹åŠ¨çš„å†…å®¹è¿›è¡Œæ–‡æœ¬è½¬æ¢ï¼Œç„¶åŽè¿›è¡Œé‡æ–°æ‹¼æŽ¥é¦–å°¾ï¼Œå¤§åŠŸå‘Šæˆã€‚
  
- markdownè§£æž

  è€ƒå¯Ÿäº†å‡ ä¸ªç¤¾åŒºæµè¡Œçš„markdownè§£æžå™¨ï¼Œæ¯”è¾ƒæµè¡Œçš„æœ‰[markdown](https://www.npmjs.com/package/markdown), [markdown-it](https://www.npmjs.com/package/markdown-it), [marked](https://www.npmjs.com/package/marked) ç­‰ç­‰ã€‚ç»¼åˆè€ƒè™‘æ‰©å±•æ€§ä»¥åŠç¨³å®šæ€§ï¼Œç¬”è€…æŽ¨èä½¿ç”¨markdown-itä½œä¸ºmarkdownçš„è¯æ³•è§£æžå™¨ï¼Œå› ä¸ºè¯¥è§£æžå™¨æœ‰æ¯”è¾ƒå¤šçš„æ’ä»¶ï¼Œå¹¶ä¸”æ”¯æŒè¯­æ³•é«˜äº®ã€‚

- åŒæ­¥æ»šåŠ¨

  å½“é€‰æ‹©åˆ†æ ç¼–è¾‘çš„æ—¶å€™ï¼Œæ»šåŠ¨å·¦ä¾§çš„ç¼–è¾‘åŒºï¼Œå³ä¾§çš„é¢„è§ˆåŒºèƒ½è‡ªåŠ¨æ»šåŠ¨åˆ°å¯¹åº”çš„åŒºåŸŸã€‚æ–¹æ¡ˆå‚è€ƒäº†ã€Š[æ‰‹æŠŠæ‰‹æ•™ä½ ç”¨ 100è¡Œä»£ç å®žçŽ°åŸºäºŽ reactçš„ markdown è¾“å…¥ + å³æ—¶é¢„è§ˆåœ¨çº¿ç¼–è¾‘å™¨ï¼ˆä¸€ï¼‰](https://github.com/accforgit/blog-data/blob/master/%E5%9C%A8%E7%BA%BF%E7%BC%96%E8%BE%91%E5%99%A8/README/README1.md)ã€‹ã€‚åªéœ€å…ˆè®¡ç®—å‡ºè¾“å…¥æ¡†å®¹å™¨å…ƒç´ ä¸Žé¢„è§ˆæ¡†å®¹å™¨å…ƒç´ ä¹‹é—´æœ€å¤§scrollèŒƒå›´çš„æ¯”ä¾‹å€¼ï¼Œç„¶åŽæ ¹æ®ä¸»åŠ¨æ»šåŠ¨å…ƒç´ è‡ªèº«çš„scrollTopåšç›¸åº”çš„æ¯”ä¾‹æ¢ç®—ï¼Œå³å¯çŸ¥é“å¯¹æ–¹åŒºåŸŸçš„scrollTopå€¼ã€‚

- å…³äºŽUI
 
  - é¡¹ç›®çš„å­—ä½“åº“é€‰æ‹©äº†Font Awesomeé£Žæ ¼ï¼Œå¹¶ä¸”åªé€‰å–äº†é¡¹ç›®æ‰€éœ€è¦çš„ä¸€äº›å›¾æ ‡ã€‚
  - ç¼–è¾‘å™¨çš„æ•´ä½“csså‡å¯é€šè¿‡å…¨å±€è¦†ç›–çš„å½¢å¼è¿›è¡Œè‡ªå®šä¹‰ã€‚ç›®å‰æš‚æ—¶åªæ”¯æŒç°è‰²ä¸»é¢˜ã€‚
  - ç¼–è¾‘å™¨çš„æ˜¾ç¤ºåŒºåŸŸåŒ…æ‹¬èœå•æ ï¼Œç¼–è¾‘å™¨ï¼Œé¢„è§ˆåŒºï¼Œå·¥å…·æ ï¼Œé€šè¿‡é…ç½®ç»„ä»¶çš„configå±žæ€§ï¼Œå¯ä»¥é€‰æ‹©é»˜è®¤çš„å±•ç¤ºåŒºåŸŸã€‚
  
### Install

```js
npm install react-markdown-editor-lite --save
```

### Props

| Property | Description | Type | default | Remarks |
| --- | --- | --- | --- | --- |
| value | markdown content | String | '' | required |
| style | component container style | Object | {height: '100%'} | not required |
| config | component config | Object | {view: {...}, logger: {...}} | not required |
| onChange | emitting when editor has changed | Function | ({html, md}) => {} | not required |
| onImageUpload | when image uploaded, callback emitting will get image markdown text | (file: File, callback: (url: string) => void) => void; | ({file, callback}) => {} | not required |
| renderHTML | Render markdown text to HTML. You can return either string, function or Promise | (text: string) => string|function|Promise | none | **required** |

### Example

``` js
'use strict';
import React from 'react'
import ReactDOM from 'react-dom'
import MdEditor from 'react-markdown-editor-lite'
import MarkdownIt from 'markdown-it'
import emoji from 'markdown-it-emoji'
import subscript from 'markdown-it-sub'
import superscript from 'markdown-it-sup'
import footnote from 'markdown-it-footnote'
import deflist from 'markdown-it-deflist'
import abbreviation from 'markdown-it-abbr'
import insert from 'markdown-it-ins'
import mark from 'markdown-it-mark'
import tasklists from 'markdown-it-task-lists'
import hljs from 'highlight.js'
import 'highlight.js/styles/atom-one-light.css'
// import 'highlight.js/styles/github.css'
import './index.less';

const MOCK_DATA = "I Love React."
export default class Demo extends React.Component {
  mdEditor = null
  mdParser = null
  constructor(props) {
    super(props)
    // initial a parsera
    this.mdParser = new MarkdownIt({
      html: true,
      linkify: true,
      typographer: true,
      highlight: function (str, lang) {
        if (lang && hljs.getLanguage(lang)) {
          try {
            return hljs.highlight(lang, str).value
          } catch (__) {}
        }    
        return '' // use external default escaping
      }
    })
    .use(emoji)
    .use(subscript)
    .use(superscript)
    .use(footnote)
    .use(deflist)
    .use(abbreviation)
    .use(insert)
    .use(mark)
    .use(tasklists, { enabled: this.taskLists })
    this.renderHTML = this.renderHTML.bind(this)
  }
  handleEditorChange({html, md}) {
    console.log('handleEditorChange', html, md)
  }
  handleImageUpload(file, callback) {
    const reader = new FileReader()
    reader.onload = () => {      
      const convertBase64UrlToBlob = (urlData) => {  
        let arr = urlData.split(','), mime = arr[0].match(/:(.*?);/)[1]
        let bstr = atob(arr[1])
        let n = bstr.length
        let u8arr = new Uint8Array(n)
        while (n--) {
          u8arr[n] = bstr.charCodeAt(n)
        }
        return new Blob([u8arr], {type:mime})
      }
      const blob = convertBase64UrlToBlob(reader.result)
      setTimeout(() => {
        // setTimeout æ¨¡æ‹Ÿå¼‚æ­¥ä¸Šä¼ å›¾ç‰‡
        // å½“å¼‚æ­¥ä¸Šä¼ èŽ·å–å›¾ç‰‡åœ°å€åŽï¼Œæ‰§è¡Œcalbackå›žè°ƒï¼ˆå‚æ•°ä¸ºimageUrlå­—ç¬¦ä¸²ï¼‰ï¼Œå³å¯å°†å›¾ç‰‡åœ°å€å†™å…¥markdown
        callback('https://avatars0.githubusercontent.com/u/21263805?s=40&v=4')
      }, 1000)
    }
    reader.readAsDataURL(file)
  }
  renderHTML(text) {
    // æ¨¡æ‹Ÿå¼‚æ­¥æ¸²æŸ“Markdown
    return new Promise((resolve) => {
      setTimeout(() => {
        resolve(this.mdParser.render(text))
      }, 1000)
    })
  }
  handleGetMdValue = () => {   
    this.mdEditor && alert(this.mdEditor.getMdValue())      
  }
  handleGetHtmlValue = () => {    
    this.mdEditor && alert(this.mdEditor.getHtmlValue())
  }
  render() {
    return (      
      <div>
        <nav>
          <button onClick={this.handleGetMdValue} >getMdValue</button>  
          <button onClick={this.handleGetHtmlValue} >getHtmlValue</button>  
        </nav>
        <section style="height: 500px">
          <MdEditor 
            ref={node => this.mdEditor = node}
            value={MOCK_DATA}
            style={{height: '400px'}}
            renderHTML={this.renderHTML}
            config={{
              view: {
                menu: true,
                md: true,
                html: true
              },
              imageUrl: 'https://octodex.github.com/images/minion.png'
            }}
            onChange={this.handleEditorChange} 
            onImageUpload={this.handleImageUpload}
          />
        </section>                        
      </div>      
    )
  }
}
```

### æœ€åŽ

   æ¬¢è¿Žå¤§å®¶ä½¿ç”¨å’Œåé¦ˆï¼Œ[é¡¹ç›®åœ°å€](https://github.com/HarryChen0506/react-markdown-editor-lite) (https://github.com/HarryChen0506/react-markdown-editor-lite)ï¼Œ ä½ çš„ç‚¹èµžå°†æ˜¯æˆ‘èŽ«å¤§çš„åŠ¨åŠ›ðŸ˜Š

', firstPicture='', viewCount=0, createDate='Sun Nov 07 14:09:29 EST 2021', updateDate='Mon Nov 08 09:15:09 EST 2021'}}, total=null}
2021-11-14 21:48:31:978 [http-nio-8081-exec-3] INFO  com.ivan.sunnyblog.web.res.S3ResourceManager uploading file to s3
2021-11-14 21:48:32:359 [http-nio-8081-exec-3] INFO  com.ivan.sunnyblog.web.res.S3ResourceManager uploading done. returned url: https://s3.ca-central-1.amazonaws.com/res-blog-public/res-dev/blog_1636944511978_1.png
2021-11-14 21:48:32:359 [http-nio-8081-exec-3] INFO  com.ivan.sunnyblog.web.aop.ControllerAspect *** Request Success ***: 389ms POST URI=/api/upload, methodName=com.ivan.sunnyblog.web.controller.ResourceController.upload, args=[org.springframework.web.multipart.support.StandardMultipartHttpServletRequest$StandardMultipartFile@6d6cd0e9], result=ResultInfo{info='https://s3.ca-central-1.amazonaws.com/res-blog-public/res-dev/blog_1636944511978_1.png', status=0, data=null, total=null}
2021-11-14 21:53:47:351 [Thread-53] INFO  org.springframework.scheduling.concurrent.ThreadPoolTaskScheduler Shutting down ExecutorService 'taskScheduler'
2021-11-14 21:53:47:352 [Thread-53] INFO  org.springframework.scheduling.concurrent.ThreadPoolTaskExecutor Shutting down ExecutorService 'applicationTaskExecutor'
2021-11-14 21:53:47:353 [Thread-53] INFO  com.zaxxer.hikari.HikariDataSource HikariPool-1 - Shutdown initiated...
2021-11-14 21:53:47:354 [Thread-53] INFO  com.zaxxer.hikari.HikariDataSource HikariPool-1 - Shutdown completed.
2021-11-14 21:53:50:719 [restartedMain] INFO  com.ivan.sunnyblog.SunnyBlogApplication Starting SunnyBlogApplication on Jinghaos-MacBook-Air.local with PID 21380 (/Users/jinghaoliang/Documents/tech/Project/blogProject/SunnyBlog/target/classes started by jinghaoliang in /Users/jinghaoliang/Documents/tech/Project/blogProject/SunnyBlog)
2021-11-14 21:53:50:720 [restartedMain] INFO  com.ivan.sunnyblog.SunnyBlogApplication No active profile set, falling back to default profiles: default
2021-11-14 21:53:50:737 [restartedMain] INFO  org.springframework.boot.devtools.env.DevToolsPropertyDefaultsPostProcessor Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2021-11-14 21:53:50:737 [restartedMain] INFO  org.springframework.boot.devtools.env.DevToolsPropertyDefaultsPostProcessor For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2021-11-14 21:53:51:019 [restartedMain] INFO  org.springframework.data.repository.config.RepositoryConfigurationDelegate Multiple Spring Data modules found, entering strict repository configuration mode!
2021-11-14 21:53:51:019 [restartedMain] INFO  org.springframework.data.repository.config.RepositoryConfigurationDelegate Bootstrapping Spring Data repositories in DEFAULT mode.
2021-11-14 21:53:51:041 [restartedMain] INFO  org.springframework.data.repository.config.RepositoryConfigurationDelegate Finished Spring Data repository scanning in 16ms. Found 0 repository interfaces.
2021-11-14 21:53:51:186 [restartedMain] INFO  o.s.context.support.PostProcessorRegistrationDelegate$BeanPostProcessorChecker Bean 'org.springframework.transaction.annotation.ProxyTransactionManagementConfiguration' of type [org.springframework.transaction.annotation.ProxyTransactionManagementConfiguration$$EnhancerBySpringCGLIB$$699f5d12] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2021-11-14 21:53:51:349 [restartedMain] INFO  org.springframework.boot.web.embedded.tomcat.TomcatWebServer Tomcat initialized with port(s): 8081 (http)
2021-11-14 21:53:51:355 [restartedMain] INFO  org.apache.coyote.http11.Http11NioProtocol Initializing ProtocolHandler ["http-nio-8081"]
2021-11-14 21:53:51:361 [restartedMain] INFO  org.apache.catalina.core.StandardService Starting service [Tomcat]
2021-11-14 21:53:51:361 [restartedMain] INFO  org.apache.catalina.core.StandardEngine Starting Servlet engine: [Apache Tomcat/9.0.21]
2021-11-14 21:53:51:423 [restartedMain] INFO  org.apache.catalina.core.ContainerBase.[Tomcat].[localhost].[/] Initializing Spring embedded WebApplicationContext
2021-11-14 21:53:51:423 [restartedMain] INFO  org.springframework.web.context.ContextLoader Root WebApplicationContext: initialization completed in 686 ms
2021-11-14 21:53:51:565 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource HikariPool-1 - Starting...
2021-11-14 21:53:51:595 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource HikariPool-1 - Start completed.
2021-11-14 21:54:22:670 [restartedMain] INFO  org.springframework.scheduling.concurrent.ThreadPoolTaskExecutor Initializing ExecutorService 'applicationTaskExecutor'
2021-11-14 21:54:22:834 [restartedMain] INFO  org.springframework.scheduling.concurrent.ThreadPoolTaskScheduler Initializing ExecutorService 'taskScheduler'
2021-11-14 21:54:22:855 [restartedMain] INFO  org.springframework.boot.devtools.autoconfigure.OptionalLiveReloadServer LiveReload server is running on port 35729
2021-11-14 21:54:22:895 [restartedMain] INFO  org.apache.coyote.http11.Http11NioProtocol Starting ProtocolHandler ["http-nio-8081"]
2021-11-14 21:54:22:920 [restartedMain] INFO  org.springframework.boot.web.embedded.tomcat.TomcatWebServer Tomcat started on port(s): 8081 (http) with context path ''
2021-11-14 21:54:22:921 [restartedMain] INFO  com.ivan.sunnyblog.SunnyBlogApplication Started SunnyBlogApplication in 32.368 seconds (JVM running for 32.894)
2021-11-14 21:55:25:718 [http-nio-8081-exec-4] INFO  org.apache.catalina.core.ContainerBase.[Tomcat].[localhost].[/] Initializing Spring DispatcherServlet 'dispatcherServlet'
2021-11-14 21:55:25:718 [http-nio-8081-exec-4] INFO  org.springframework.web.servlet.DispatcherServlet Initializing Servlet 'dispatcherServlet'
2021-11-14 21:55:25:725 [http-nio-8081-exec-4] INFO  org.springframework.web.servlet.DispatcherServlet Completed initialization in 7 ms
2021-11-14 21:55:25:969 [http-nio-8081-exec-1] INFO  org.jooq.Constants 
                                      
@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
@@@@@@@@@@@@@@@@  @@        @@@@@@@@@@
@@@@@@@@@@@@@@@@@@@@        @@@@@@@@@@
@@@@@@@@@@@@@@@@  @@  @@    @@@@@@@@@@
@@@@@@@@@@  @@@@  @@  @@    @@@@@@@@@@
@@@@@@@@@@        @@        @@@@@@@@@@
@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
@@@@@@@@@@        @@        @@@@@@@@@@
@@@@@@@@@@    @@  @@  @@@@  @@@@@@@@@@
@@@@@@@@@@    @@  @@  @@@@  @@@@@@@@@@
@@@@@@@@@@        @@  @  @  @@@@@@@@@@
@@@@@@@@@@        @@        @@@@@@@@@@
@@@@@@@@@@@@@@@@@@@@@@@  @@@@@@@@@@@@@
@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@  Thank you for using jOOQ 3.11.11
                                      
2021-11-14 21:55:26:012 [http-nio-8081-exec-4] INFO  com.ivan.sunnyblog.web.aop.ControllerAspect *** Request Success ***: 247ms GET URI=/api/admin/category, methodName=com.ivan.sunnyblog.web.controller.CategoryContoller.getCategoryList, args=[SearchVo{page=1, limit=10, categoryId=null, total=null}], result=ResultInfo{info='null', status=0, data=[Category (1, Life ), Category (2, liddffd)], total=null}
2021-11-14 21:55:26:079 [http-nio-8081-exec-1] INFO  io.lettuce.core.EpollProvider Starting without optional epoll library
2021-11-14 21:55:26:079 [http-nio-8081-exec-1] INFO  io.lettuce.core.KqueueProvider Starting without optional kqueue library
2021-11-14 21:55:26:142 [http-nio-8081-exec-1] INFO  com.ivan.sunnyblog.web.aop.ControllerAspect *** Request Success ***: 379ms GET URI=/api/admin/article/10005, methodName=com.ivan.sunnyblog.web.controller.ArticleController.getArticleDetail, args=[10005], result=ResultInfo{info='null', status=0, data=ArticleDetailVo{categoryId=1, BaseArticleVo{articleId=10005, status=1, title='dd', description='This is the doc of React markdown editor lite.
Enjoy!!', content='| Head | Head | Head | Head |
| --- | --- | --- | --- |
| Data | Data | Data | Data |
| Data | Data | Data | Data |

## æ‰‹æŠŠæ‰‹æ•™ä½ å†™ä¸€ä¸ªmarkdownç¼–è¾‘å™¨

> ç¬”è€…åœ¨18å¹´å¹´æœ«çš„æ—¶å€™æŽ¥åˆ°ä¸€ä¸ªå¼€å‘ä»»åŠ¡â€”â€”æ­å»ºä¸€ä¸ªAIé¡¹ç›®çš„å¼€æ”¾å¹³å°ï¼Œå…¶ä¸­çš„äº§å“æ–‡æ¡£ä¸ºè½¬åŒ–ä¸ºHTMLæ ¼å¼çš„markdownæ–‡æ¡£ã€‚è€ƒè™‘åˆ°æ–‡æ¡£çš„å³æ—¶æ›´æ–°ï¼Œå°†æ–‡æ¡£ä¿¡æ¯åšæˆäº†AjaxæŽ¥å£çš„å½¢å¼ã€‚å› æ­¤ç®¡ç†åŽå°åªéœ€å°†textareaè¡¨å•çš„å†…å®¹é€šè¿‡markdownè§£æžå™¨è¿›è¡ŒHTMLæ ¼å¼è½¬åŒ–ï¼Œç„¶åŽå°†markdownå†…å®¹å’Œç»è½¬åŒ–çš„HTMLæ–‡æ¡£éƒ½ä¿å­˜åˆ°æ•°æ®åº“å³å¯ã€‚
> åŸºæœ¬éœ€æ±‚å®ŒæˆåŽï¼Œä¸ºäº†æ›´å¥½çš„ç”¨æˆ·ä½“éªŒï¼Œè€ƒè™‘å°†å¸¸ç”¨çš„ç¼–è¾‘åŠŸèƒ½æ·»åŠ è¿›æ¥ã€‚æ”¹è¿›ç‰ˆä¸ä»…æ”¯æŒäº†å¸¸ç”¨çš„æ–‡æœ¬ç¼–è¾‘åŠŸèƒ½ï¼Œè¿˜å®žçŽ°çš„UIç•Œé¢çš„é…ç½®åŒ–ï¼Œè‡ªå®šä¹‰è¯­æ³•è§£æžå™¨ã€‚æœ¬ç€é€ ç¦ä¼¸æ‰‹å…šçš„ç›®çš„ï¼Œä»¥åŠç§¯ç´¯äº›å¼€æºç»éªŒï¼Œç¬”è€…å°†è¯¥react ç»„ä»¶ [react-markdown-editor-lite](https://github.com/HarryChen0506/react-markdown-editor-lite) è¿›è¡Œäº†å°è£…æ”¹é€ ï¼Œå¹¶ä¸”å‘å¸ƒåˆ°äº†å¼€æºç¤¾åŒºã€‚

### é¢„è§ˆ
åœ¨çº¿ä½“éªŒ [https://harrychen0506.github.io/react-markdown-editor-lite/](https://harrychen0506.github.io/react-markdown-editor-lite/)

![image](https://github.com//HarryChen0506/react-markdown-editor-lite/blob/master/image/react-markdown-editor-lite-v1.0.0.PNG?raw=true)

### ç‰¹ç‚¹
* è½»é‡ã€åŸºäºŽReact
* UIå¯é…ç½®, å¦‚åªæ˜¾ç¤ºç¼–è¾‘åŒºæˆ–é¢„è§ˆåŒº
* æ”¯æŒè‡ªå®šä¹‰markdownè¯­æ³•è§£æžå™¨,è¯­æ³•é«˜äº®ç­‰
* æ”¯æŒå¸¸ç”¨çš„markdownç¼–è¾‘åŠŸèƒ½ï¼Œå¦‚åŠ ç²—ï¼Œæ–œä½“ç­‰ç­‰...
* æ”¯æŒåŠŸèƒ½æŒ‰é’®æ’æ‹”åŒ–ï¼Œç”¨æˆ·å¯ä»¥è‡ªå®šä¹‰æ‰©å±•ç»„ä»¶
* æ”¯æŒç¼–è¾‘åŒºå’Œé¢„è§ˆåŒºåŒæ­¥æ»šåŠ¨

### å¼€å‘å¿ƒå¾—

- æ–‡æœ¬ç¼–è¾‘

  å¤§å¤šæ•°å¸¸è§çš„ç¼–è¾‘å™¨ï¼ŒåŒ…æ‹¬å¯Œæ–‡æœ¬ç¼–è¾‘å™¨ï¼Œåˆ©ç”¨äº†æŸäº›å…ƒç´ å¦‚divçš„contenteditableå±žæ€§ï¼Œé…åˆselectionã€rangeã€execCommandç­‰APIï¼Œå®žçŽ°äº†å¯Œæ–‡æœ¬ç¼–è¾‘åŠŸèƒ½ã€‚è¿™é‡Œé¢çš„å®žçŽ°æ¯”è¾ƒå¤æ‚ï¼Œæ‰€ä»¥æœ‰äº†"[ä¸ºä»€ä¹ˆéƒ½è¯´å¯Œæ–‡æœ¬ç¼–è¾‘å™¨æ˜¯å¤©å‘ï¼Ÿ](https://www.zhihu.com/question/38699645)"è¿™ä¸ªè¯´æ³•ã€‚

  è€Œmarkdownç¼–è¾‘å™¨ï¼Œæ ¸å¿ƒçš„å¤„ç†å†…å®¹ä¸ºç®€å•è¯­æ³•çš„çº¯æ–‡æœ¬ï¼Œå¤æ‚åº¦ç›¸å¯¹æ¥è¯´æ¯”è¾ƒä½Žï¼Œå¹¶ä¸”inputæ ‡ç­¾è‡ªå¸¦onSelectäº‹ä»¶ï¼Œå¯ä»¥å¾ˆæ–¹ä¾¿çš„èŽ·å–é€‰æ‹©ä¿¡æ¯ï¼ˆé€‰æ‹©èµ·å§‹ä½ç½®å’Œé€‰æ‹©æ–‡æœ¬å€¼ï¼‰ï¼Œå› æ­¤è¦æƒ³å®žçŽ°ç¼–è¾‘åŠŸèƒ½ï¼Œåªéœ€å°†è¦æ”¹åŠ¨çš„å†…å®¹è¿›è¡Œæ–‡æœ¬è½¬æ¢ï¼Œç„¶åŽè¿›è¡Œé‡æ–°æ‹¼æŽ¥é¦–å°¾ï¼Œå¤§åŠŸå‘Šæˆã€‚
  
- markdownè§£æž

  è€ƒå¯Ÿäº†å‡ ä¸ªç¤¾åŒºæµè¡Œçš„markdownè§£æžå™¨ï¼Œæ¯”è¾ƒæµè¡Œçš„æœ‰[markdown](https://www.npmjs.com/package/markdown), [markdown-it](https://www.npmjs.com/package/markdown-it), [marked](https://www.npmjs.com/package/marked) ç­‰ç­‰ã€‚ç»¼åˆè€ƒè™‘æ‰©å±•æ€§ä»¥åŠç¨³å®šæ€§ï¼Œç¬”è€…æŽ¨èä½¿ç”¨markdown-itä½œä¸ºmarkdownçš„è¯æ³•è§£æžå™¨ï¼Œå› ä¸ºè¯¥è§£æžå™¨æœ‰æ¯”è¾ƒå¤šçš„æ’ä»¶ï¼Œå¹¶ä¸”æ”¯æŒè¯­æ³•é«˜äº®ã€‚

- åŒæ­¥æ»šåŠ¨

  å½“é€‰æ‹©åˆ†æ ç¼–è¾‘çš„æ—¶å€™ï¼Œæ»šåŠ¨å·¦ä¾§çš„ç¼–è¾‘åŒºï¼Œå³ä¾§çš„é¢„è§ˆåŒºèƒ½è‡ªåŠ¨æ»šåŠ¨åˆ°å¯¹åº”çš„åŒºåŸŸã€‚æ–¹æ¡ˆå‚è€ƒäº†ã€Š[æ‰‹æŠŠæ‰‹æ•™ä½ ç”¨ 100è¡Œä»£ç å®žçŽ°åŸºäºŽ reactçš„ markdown è¾“å…¥ + å³æ—¶é¢„è§ˆåœ¨çº¿ç¼–è¾‘å™¨ï¼ˆä¸€ï¼‰](https://github.com/accforgit/blog-data/blob/master/%E5%9C%A8%E7%BA%BF%E7%BC%96%E8%BE%91%E5%99%A8/README/README1.md)ã€‹ã€‚åªéœ€å…ˆè®¡ç®—å‡ºè¾“å…¥æ¡†å®¹å™¨å…ƒç´ ä¸Žé¢„è§ˆæ¡†å®¹å™¨å…ƒç´ ä¹‹é—´æœ€å¤§scrollèŒƒå›´çš„æ¯”ä¾‹å€¼ï¼Œç„¶åŽæ ¹æ®ä¸»åŠ¨æ»šåŠ¨å…ƒç´ è‡ªèº«çš„scrollTopåšç›¸åº”çš„æ¯”ä¾‹æ¢ç®—ï¼Œå³å¯çŸ¥é“å¯¹æ–¹åŒºåŸŸçš„scrollTopå€¼ã€‚

- å…³äºŽUI
 
  - é¡¹ç›®çš„å­—ä½“åº“é€‰æ‹©äº†Font Awesomeé£Žæ ¼ï¼Œå¹¶ä¸”åªé€‰å–äº†é¡¹ç›®æ‰€éœ€è¦çš„ä¸€äº›å›¾æ ‡ã€‚
  - ç¼–è¾‘å™¨çš„æ•´ä½“csså‡å¯é€šè¿‡å…¨å±€è¦†ç›–çš„å½¢å¼è¿›è¡Œè‡ªå®šä¹‰ã€‚ç›®å‰æš‚æ—¶åªæ”¯æŒç°è‰²ä¸»é¢˜ã€‚
  - ç¼–è¾‘å™¨çš„æ˜¾ç¤ºåŒºåŸŸåŒ…æ‹¬èœå•æ ï¼Œç¼–è¾‘å™¨ï¼Œé¢„è§ˆåŒºï¼Œå·¥å…·æ ï¼Œé€šè¿‡é…ç½®ç»„ä»¶çš„configå±žæ€§ï¼Œå¯ä»¥é€‰æ‹©é»˜è®¤çš„å±•ç¤ºåŒºåŸŸã€‚
  
### Install

```js
npm install react-markdown-editor-lite --save
```

### Props

| Property | Description | Type | default | Remarks |
| --- | --- | --- | --- | --- |
| value | markdown content | String | '' | required |
| style | component container style | Object | {height: '100%'} | not required |
| config | component config | Object | {view: {...}, logger: {...}} | not required |
| onChange | emitting when editor has changed | Function | ({html, md}) => {} | not required |
| onImageUpload | when image uploaded, callback emitting will get image markdown text | (file: File, callback: (url: string) => void) => void; | ({file, callback}) => {} | not required |
| renderHTML | Render markdown text to HTML. You can return either string, function or Promise | (text: string) => string|function|Promise | none | **required** |

### Example

``` js
'use strict';
import React from 'react'
import ReactDOM from 'react-dom'
import MdEditor from 'react-markdown-editor-lite'
import MarkdownIt from 'markdown-it'
import emoji from 'markdown-it-emoji'
import subscript from 'markdown-it-sub'
import superscript from 'markdown-it-sup'
import footnote from 'markdown-it-footnote'
import deflist from 'markdown-it-deflist'
import abbreviation from 'markdown-it-abbr'
import insert from 'markdown-it-ins'
import mark from 'markdown-it-mark'
import tasklists from 'markdown-it-task-lists'
import hljs from 'highlight.js'
import 'highlight.js/styles/atom-one-light.css'
// import 'highlight.js/styles/github.css'
import './index.less';

const MOCK_DATA = "I Love React."
export default class Demo extends React.Component {
  mdEditor = null
  mdParser = null
  constructor(props) {
    super(props)
    // initial a parsera
    this.mdParser = new MarkdownIt({
      html: true,
      linkify: true,
      typographer: true,
      highlight: function (str, lang) {
        if (lang && hljs.getLanguage(lang)) {
          try {
            return hljs.highlight(lang, str).value
          } catch (__) {}
        }    
        return '' // use external default escaping
      }
    })
    .use(emoji)
    .use(subscript)
    .use(superscript)
    .use(footnote)
    .use(deflist)
    .use(abbreviation)
    .use(insert)
    .use(mark)
    .use(tasklists, { enabled: this.taskLists })
    this.renderHTML = this.renderHTML.bind(this)
  }
  handleEditorChange({html, md}) {
    console.log('handleEditorChange', html, md)
  }
  handleImageUpload(file, callback) {
    const reader = new FileReader()
    reader.onload = () => {      
      const convertBase64UrlToBlob = (urlData) => {  
        let arr = urlData.split(','), mime = arr[0].match(/:(.*?);/)[1]
        let bstr = atob(arr[1])
        let n = bstr.length
        let u8arr = new Uint8Array(n)
        while (n--) {
          u8arr[n] = bstr.charCodeAt(n)
        }
        return new Blob([u8arr], {type:mime})
      }
      const blob = convertBase64UrlToBlob(reader.result)
      setTimeout(() => {
        // setTimeout æ¨¡æ‹Ÿå¼‚æ­¥ä¸Šä¼ å›¾ç‰‡
        // å½“å¼‚æ­¥ä¸Šä¼ èŽ·å–å›¾ç‰‡åœ°å€åŽï¼Œæ‰§è¡Œcalbackå›žè°ƒï¼ˆå‚æ•°ä¸ºimageUrlå­—ç¬¦ä¸²ï¼‰ï¼Œå³å¯å°†å›¾ç‰‡åœ°å€å†™å…¥markdown
        callback('https://avatars0.githubusercontent.com/u/21263805?s=40&v=4')
      }, 1000)
    }
    reader.readAsDataURL(file)
  }
  renderHTML(text) {
    // æ¨¡æ‹Ÿå¼‚æ­¥æ¸²æŸ“Markdown
    return new Promise((resolve) => {
      setTimeout(() => {
        resolve(this.mdParser.render(text))
      }, 1000)
    })
  }
  handleGetMdValue = () => {   
    this.mdEditor && alert(this.mdEditor.getMdValue())      
  }
  handleGetHtmlValue = () => {    
    this.mdEditor && alert(this.mdEditor.getHtmlValue())
  }
  render() {
    return (      
      <div>
        <nav>
          <button onClick={this.handleGetMdValue} >getMdValue</button>  
          <button onClick={this.handleGetHtmlValue} >getHtmlValue</button>  
        </nav>
        <section style="height: 500px">
          <MdEditor 
            ref={node => this.mdEditor = node}
            value={MOCK_DATA}
            style={{height: '400px'}}
            renderHTML={this.renderHTML}
            config={{
              view: {
                menu: true,
                md: true,
                html: true
              },
              imageUrl: 'https://octodex.github.com/images/minion.png'
            }}
            onChange={this.handleEditorChange} 
            onImageUpload={this.handleImageUpload}
          />
        </section>                        
      </div>      
    )
  }
}
```

### æœ€åŽ

   æ¬¢è¿Žå¤§å®¶ä½¿ç”¨å’Œåé¦ˆï¼Œ[é¡¹ç›®åœ°å€](https://github.com/HarryChen0506/react-markdown-editor-lite) (https://github.com/HarryChen0506/react-markdown-editor-lite)ï¼Œ ä½ çš„ç‚¹èµžå°†æ˜¯æˆ‘èŽ«å¤§çš„åŠ¨åŠ›ðŸ˜Š

', firstPicture='', viewCount=0, createDate='Sun Nov 07 14:09:29 EST 2021', updateDate='Mon Nov 08 09:15:09 EST 2021'}}, total=null}
2021-11-14 21:55:51:742 [http-nio-8081-exec-3] INFO  com.ivan.sunnyblog.web.res.S3ResourceManager uploading file to s3
2021-11-14 21:55:52:114 [http-nio-8081-exec-3] INFO  com.ivan.sunnyblog.web.res.S3ResourceManager uploading done. returned url: https://s3.ca-central-1.amazonaws.com/res-blog-public/res-dev/blog_1636944951742_1.png
2021-11-14 21:55:52:114 [http-nio-8081-exec-3] INFO  com.ivan.sunnyblog.web.aop.ControllerAspect *** Request Success ***: 378ms POST URI=/api/upload, methodName=com.ivan.sunnyblog.web.controller.ResourceController.upload, args=[org.springframework.web.multipart.support.StandardMultipartHttpServletRequest$StandardMultipartFile@a2f0132], result=ResultInfo{info='null', status=0, data=https://s3.ca-central-1.amazonaws.com/res-blog-public/res-dev/blog_1636944951742_1.png, total=null}
2021-11-14 21:56:28:181 [http-nio-8081-exec-6] INFO  com.ivan.sunnyblog.web.aop.ControllerAspect *** Request Success ***: 12ms GET URI=/api/admin/category, methodName=com.ivan.sunnyblog.web.controller.CategoryContoller.getCategoryList, args=[SearchVo{page=1, limit=10, categoryId=null, total=null}], result=ResultInfo{info='null', status=0, data=[Category (1, Life ), Category (2, liddffd)], total=null}
2021-11-14 21:56:28:186 [http-nio-8081-exec-5] INFO  com.ivan.sunnyblog.web.aop.ControllerAspect *** Request Success ***: 17ms GET URI=/api/admin/article/10005, methodName=com.ivan.sunnyblog.web.controller.ArticleController.getArticleDetail, args=[10005], result=ResultInfo{info='null', status=0, data=ArticleDetailVo{categoryId=1, BaseArticleVo{articleId=10005, status=1, title='dd', description='This is the doc of React markdown editor lite.
Enjoy!!', content='| Head | Head | Head | Head |
| --- | --- | --- | --- |
| Data | Data | Data | Data |
| Data | Data | Data | Data |

## æ‰‹æŠŠæ‰‹æ•™ä½ å†™ä¸€ä¸ªmarkdownç¼–è¾‘å™¨

> ç¬”è€…åœ¨18å¹´å¹´æœ«çš„æ—¶å€™æŽ¥åˆ°ä¸€ä¸ªå¼€å‘ä»»åŠ¡â€”â€”æ­å»ºä¸€ä¸ªAIé¡¹ç›®çš„å¼€æ”¾å¹³å°ï¼Œå…¶ä¸­çš„äº§å“æ–‡æ¡£ä¸ºè½¬åŒ–ä¸ºHTMLæ ¼å¼çš„markdownæ–‡æ¡£ã€‚è€ƒè™‘åˆ°æ–‡æ¡£çš„å³æ—¶æ›´æ–°ï¼Œå°†æ–‡æ¡£ä¿¡æ¯åšæˆäº†AjaxæŽ¥å£çš„å½¢å¼ã€‚å› æ­¤ç®¡ç†åŽå°åªéœ€å°†textareaè¡¨å•çš„å†…å®¹é€šè¿‡markdownè§£æžå™¨è¿›è¡ŒHTMLæ ¼å¼è½¬åŒ–ï¼Œç„¶åŽå°†markdownå†…å®¹å’Œç»è½¬åŒ–çš„HTMLæ–‡æ¡£éƒ½ä¿å­˜åˆ°æ•°æ®åº“å³å¯ã€‚
> åŸºæœ¬éœ€æ±‚å®ŒæˆåŽï¼Œä¸ºäº†æ›´å¥½çš„ç”¨æˆ·ä½“éªŒï¼Œè€ƒè™‘å°†å¸¸ç”¨çš„ç¼–è¾‘åŠŸèƒ½æ·»åŠ è¿›æ¥ã€‚æ”¹è¿›ç‰ˆä¸ä»…æ”¯æŒäº†å¸¸ç”¨çš„æ–‡æœ¬ç¼–è¾‘åŠŸèƒ½ï¼Œè¿˜å®žçŽ°çš„UIç•Œé¢çš„é…ç½®åŒ–ï¼Œè‡ªå®šä¹‰è¯­æ³•è§£æžå™¨ã€‚æœ¬ç€é€ ç¦ä¼¸æ‰‹å…šçš„ç›®çš„ï¼Œä»¥åŠç§¯ç´¯äº›å¼€æºç»éªŒï¼Œç¬”è€…å°†è¯¥react ç»„ä»¶ [react-markdown-editor-lite](https://github.com/HarryChen0506/react-markdown-editor-lite) è¿›è¡Œäº†å°è£…æ”¹é€ ï¼Œå¹¶ä¸”å‘å¸ƒåˆ°äº†å¼€æºç¤¾åŒºã€‚

### é¢„è§ˆ
åœ¨çº¿ä½“éªŒ [https://harrychen0506.github.io/react-markdown-editor-lite/](https://harrychen0506.github.io/react-markdown-editor-lite/)

![image](https://github.com//HarryChen0506/react-markdown-editor-lite/blob/master/image/react-markdown-editor-lite-v1.0.0.PNG?raw=true)

### ç‰¹ç‚¹
* è½»é‡ã€åŸºäºŽReact
* UIå¯é…ç½®, å¦‚åªæ˜¾ç¤ºç¼–è¾‘åŒºæˆ–é¢„è§ˆåŒº
* æ”¯æŒè‡ªå®šä¹‰markdownè¯­æ³•è§£æžå™¨,è¯­æ³•é«˜äº®ç­‰
* æ”¯æŒå¸¸ç”¨çš„markdownç¼–è¾‘åŠŸèƒ½ï¼Œå¦‚åŠ ç²—ï¼Œæ–œä½“ç­‰ç­‰...
* æ”¯æŒåŠŸèƒ½æŒ‰é’®æ’æ‹”åŒ–ï¼Œç”¨æˆ·å¯ä»¥è‡ªå®šä¹‰æ‰©å±•ç»„ä»¶
* æ”¯æŒç¼–è¾‘åŒºå’Œé¢„è§ˆåŒºåŒæ­¥æ»šåŠ¨

### å¼€å‘å¿ƒå¾—

- æ–‡æœ¬ç¼–è¾‘

  å¤§å¤šæ•°å¸¸è§çš„ç¼–è¾‘å™¨ï¼ŒåŒ…æ‹¬å¯Œæ–‡æœ¬ç¼–è¾‘å™¨ï¼Œåˆ©ç”¨äº†æŸäº›å…ƒç´ å¦‚divçš„contenteditableå±žæ€§ï¼Œé…åˆselectionã€rangeã€execCommandç­‰APIï¼Œå®žçŽ°äº†å¯Œæ–‡æœ¬ç¼–è¾‘åŠŸèƒ½ã€‚è¿™é‡Œé¢çš„å®žçŽ°æ¯”è¾ƒå¤æ‚ï¼Œæ‰€ä»¥æœ‰äº†"[ä¸ºä»€ä¹ˆéƒ½è¯´å¯Œæ–‡æœ¬ç¼–è¾‘å™¨æ˜¯å¤©å‘ï¼Ÿ](https://www.zhihu.com/question/38699645)"è¿™ä¸ªè¯´æ³•ã€‚

  è€Œmarkdownç¼–è¾‘å™¨ï¼Œæ ¸å¿ƒçš„å¤„ç†å†…å®¹ä¸ºç®€å•è¯­æ³•çš„çº¯æ–‡æœ¬ï¼Œå¤æ‚åº¦ç›¸å¯¹æ¥è¯´æ¯”è¾ƒä½Žï¼Œå¹¶ä¸”inputæ ‡ç­¾è‡ªå¸¦onSelectäº‹ä»¶ï¼Œå¯ä»¥å¾ˆæ–¹ä¾¿çš„èŽ·å–é€‰æ‹©ä¿¡æ¯ï¼ˆé€‰æ‹©èµ·å§‹ä½ç½®å’Œé€‰æ‹©æ–‡æœ¬å€¼ï¼‰ï¼Œå› æ­¤è¦æƒ³å®žçŽ°ç¼–è¾‘åŠŸèƒ½ï¼Œåªéœ€å°†è¦æ”¹åŠ¨çš„å†…å®¹è¿›è¡Œæ–‡æœ¬è½¬æ¢ï¼Œç„¶åŽè¿›è¡Œé‡æ–°æ‹¼æŽ¥é¦–å°¾ï¼Œå¤§åŠŸå‘Šæˆã€‚
  
- markdownè§£æž

  è€ƒå¯Ÿäº†å‡ ä¸ªç¤¾åŒºæµè¡Œçš„markdownè§£æžå™¨ï¼Œæ¯”è¾ƒæµè¡Œçš„æœ‰[markdown](https://www.npmjs.com/package/markdown), [markdown-it](https://www.npmjs.com/package/markdown-it), [marked](https://www.npmjs.com/package/marked) ç­‰ç­‰ã€‚ç»¼åˆè€ƒè™‘æ‰©å±•æ€§ä»¥åŠç¨³å®šæ€§ï¼Œç¬”è€…æŽ¨èä½¿ç”¨markdown-itä½œä¸ºmarkdownçš„è¯æ³•è§£æžå™¨ï¼Œå› ä¸ºè¯¥è§£æžå™¨æœ‰æ¯”è¾ƒå¤šçš„æ’ä»¶ï¼Œå¹¶ä¸”æ”¯æŒè¯­æ³•é«˜äº®ã€‚

- åŒæ­¥æ»šåŠ¨

  å½“é€‰æ‹©åˆ†æ ç¼–è¾‘çš„æ—¶å€™ï¼Œæ»šåŠ¨å·¦ä¾§çš„ç¼–è¾‘åŒºï¼Œå³ä¾§çš„é¢„è§ˆåŒºèƒ½è‡ªåŠ¨æ»šåŠ¨åˆ°å¯¹åº”çš„åŒºåŸŸã€‚æ–¹æ¡ˆå‚è€ƒäº†ã€Š[æ‰‹æŠŠæ‰‹æ•™ä½ ç”¨ 100è¡Œä»£ç å®žçŽ°åŸºäºŽ reactçš„ markdown è¾“å…¥ + å³æ—¶é¢„è§ˆåœ¨çº¿ç¼–è¾‘å™¨ï¼ˆä¸€ï¼‰](https://github.com/accforgit/blog-data/blob/master/%E5%9C%A8%E7%BA%BF%E7%BC%96%E8%BE%91%E5%99%A8/README/README1.md)ã€‹ã€‚åªéœ€å…ˆè®¡ç®—å‡ºè¾“å…¥æ¡†å®¹å™¨å…ƒç´ ä¸Žé¢„è§ˆæ¡†å®¹å™¨å…ƒç´ ä¹‹é—´æœ€å¤§scrollèŒƒå›´çš„æ¯”ä¾‹å€¼ï¼Œç„¶åŽæ ¹æ®ä¸»åŠ¨æ»šåŠ¨å…ƒç´ è‡ªèº«çš„scrollTopåšç›¸åº”çš„æ¯”ä¾‹æ¢ç®—ï¼Œå³å¯çŸ¥é“å¯¹æ–¹åŒºåŸŸçš„scrollTopå€¼ã€‚

- å…³äºŽUI
 
  - é¡¹ç›®çš„å­—ä½“åº“é€‰æ‹©äº†Font Awesomeé£Žæ ¼ï¼Œå¹¶ä¸”åªé€‰å–äº†é¡¹ç›®æ‰€éœ€è¦çš„ä¸€äº›å›¾æ ‡ã€‚
  - ç¼–è¾‘å™¨çš„æ•´ä½“csså‡å¯é€šè¿‡å…¨å±€è¦†ç›–çš„å½¢å¼è¿›è¡Œè‡ªå®šä¹‰ã€‚ç›®å‰æš‚æ—¶åªæ”¯æŒç°è‰²ä¸»é¢˜ã€‚
  - ç¼–è¾‘å™¨çš„æ˜¾ç¤ºåŒºåŸŸåŒ…æ‹¬èœå•æ ï¼Œç¼–è¾‘å™¨ï¼Œé¢„è§ˆåŒºï¼Œå·¥å…·æ ï¼Œé€šè¿‡é…ç½®ç»„ä»¶çš„configå±žæ€§ï¼Œå¯ä»¥é€‰æ‹©é»˜è®¤çš„å±•ç¤ºåŒºåŸŸã€‚
  
### Install

```js
npm install react-markdown-editor-lite --save
```

### Props

| Property | Description | Type | default | Remarks |
| --- | --- | --- | --- | --- |
| value | markdown content | String | '' | required |
| style | component container style | Object | {height: '100%'} | not required |
| config | component config | Object | {view: {...}, logger: {...}} | not required |
| onChange | emitting when editor has changed | Function | ({html, md}) => {} | not required |
| onImageUpload | when image uploaded, callback emitting will get image markdown text | (file: File, callback: (url: string) => void) => void; | ({file, callback}) => {} | not required |
| renderHTML | Render markdown text to HTML. You can return either string, function or Promise | (text: string) => string|function|Promise | none | **required** |

### Example

``` js
'use strict';
import React from 'react'
import ReactDOM from 'react-dom'
import MdEditor from 'react-markdown-editor-lite'
import MarkdownIt from 'markdown-it'
import emoji from 'markdown-it-emoji'
import subscript from 'markdown-it-sub'
import superscript from 'markdown-it-sup'
import footnote from 'markdown-it-footnote'
import deflist from 'markdown-it-deflist'
import abbreviation from 'markdown-it-abbr'
import insert from 'markdown-it-ins'
import mark from 'markdown-it-mark'
import tasklists from 'markdown-it-task-lists'
import hljs from 'highlight.js'
import 'highlight.js/styles/atom-one-light.css'
// import 'highlight.js/styles/github.css'
import './index.less';

const MOCK_DATA = "I Love React."
export default class Demo extends React.Component {
  mdEditor = null
  mdParser = null
  constructor(props) {
    super(props)
    // initial a parsera
    this.mdParser = new MarkdownIt({
      html: true,
      linkify: true,
      typographer: true,
      highlight: function (str, lang) {
        if (lang && hljs.getLanguage(lang)) {
          try {
            return hljs.highlight(lang, str).value
          } catch (__) {}
        }    
        return '' // use external default escaping
      }
    })
    .use(emoji)
    .use(subscript)
    .use(superscript)
    .use(footnote)
    .use(deflist)
    .use(abbreviation)
    .use(insert)
    .use(mark)
    .use(tasklists, { enabled: this.taskLists })
    this.renderHTML = this.renderHTML.bind(this)
  }
  handleEditorChange({html, md}) {
    console.log('handleEditorChange', html, md)
  }
  handleImageUpload(file, callback) {
    const reader = new FileReader()
    reader.onload = () => {      
      const convertBase64UrlToBlob = (urlData) => {  
        let arr = urlData.split(','), mime = arr[0].match(/:(.*?);/)[1]
        let bstr = atob(arr[1])
        let n = bstr.length
        let u8arr = new Uint8Array(n)
        while (n--) {
          u8arr[n] = bstr.charCodeAt(n)
        }
        return new Blob([u8arr], {type:mime})
      }
      const blob = convertBase64UrlToBlob(reader.result)
      setTimeout(() => {
        // setTimeout æ¨¡æ‹Ÿå¼‚æ­¥ä¸Šä¼ å›¾ç‰‡
        // å½“å¼‚æ­¥ä¸Šä¼ èŽ·å–å›¾ç‰‡åœ°å€åŽï¼Œæ‰§è¡Œcalbackå›žè°ƒï¼ˆå‚æ•°ä¸ºimageUrlå­—ç¬¦ä¸²ï¼‰ï¼Œå³å¯å°†å›¾ç‰‡åœ°å€å†™å…¥markdown
        callback('https://avatars0.githubusercontent.com/u/21263805?s=40&v=4')
      }, 1000)
    }
    reader.readAsDataURL(file)
  }
  renderHTML(text) {
    // æ¨¡æ‹Ÿå¼‚æ­¥æ¸²æŸ“Markdown
    return new Promise((resolve) => {
      setTimeout(() => {
        resolve(this.mdParser.render(text))
      }, 1000)
    })
  }
  handleGetMdValue = () => {   
    this.mdEditor && alert(this.mdEditor.getMdValue())      
  }
  handleGetHtmlValue = () => {    
    this.mdEditor && alert(this.mdEditor.getHtmlValue())
  }
  render() {
    return (      
      <div>
        <nav>
          <button onClick={this.handleGetMdValue} >getMdValue</button>  
          <button onClick={this.handleGetHtmlValue} >getHtmlValue</button>  
        </nav>
        <section style="height: 500px">
          <MdEditor 
            ref={node => this.mdEditor = node}
            value={MOCK_DATA}
            style={{height: '400px'}}
            renderHTML={this.renderHTML}
            config={{
              view: {
                menu: true,
                md: true,
                html: true
              },
              imageUrl: 'https://octodex.github.com/images/minion.png'
            }}
            onChange={this.handleEditorChange} 
            onImageUpload={this.handleImageUpload}
          />
        </section>                        
      </div>      
    )
  }
}
```

### æœ€åŽ

   æ¬¢è¿Žå¤§å®¶ä½¿ç”¨å’Œåé¦ˆï¼Œ[é¡¹ç›®åœ°å€](https://github.com/HarryChen0506/react-markdown-editor-lite) (https://github.com/HarryChen0506/react-markdown-editor-lite)ï¼Œ ä½ çš„ç‚¹èµžå°†æ˜¯æˆ‘èŽ«å¤§çš„åŠ¨åŠ›ðŸ˜Š

', firstPicture='', viewCount=0, createDate='Sun Nov 07 14:09:29 EST 2021', updateDate='Mon Nov 08 09:15:09 EST 2021'}}, total=null}
2021-11-14 21:56:34:144 [http-nio-8081-exec-7] INFO  com.ivan.sunnyblog.web.res.S3ResourceManager uploading file to s3
2021-11-14 21:56:34:425 [http-nio-8081-exec-7] INFO  com.ivan.sunnyblog.web.res.S3ResourceManager uploading done. returned url: https://s3.ca-central-1.amazonaws.com/res-blog-public/res-dev/blog_1636944994144_1.png
2021-11-14 21:56:34:425 [http-nio-8081-exec-7] INFO  com.ivan.sunnyblog.web.aop.ControllerAspect *** Request Success ***: 281ms POST URI=/api/upload, methodName=com.ivan.sunnyblog.web.controller.ResourceController.upload, args=[org.springframework.web.multipart.support.StandardMultipartHttpServletRequest$StandardMultipartFile@1f3e17da], result=ResultInfo{info='null', status=0, data=https://s3.ca-central-1.amazonaws.com/res-blog-public/res-dev/blog_1636944994144_1.png, total=null}
2021-11-14 21:57:48:839 [http-nio-8081-exec-4] INFO  com.ivan.sunnyblog.web.aop.ControllerAspect *** Request Success ***: 2ms GET URI=/api/admin/category, methodName=com.ivan.sunnyblog.web.controller.CategoryContoller.getCategoryList, args=[SearchVo{page=1, limit=10, categoryId=null, total=null}], result=ResultInfo{info='null', status=0, data=[Category (1, Life ), Category (2, liddffd)], total=null}
2021-11-14 21:57:48:842 [http-nio-8081-exec-10] INFO  com.ivan.sunnyblog.web.aop.ControllerAspect *** Request Success ***: 5ms GET URI=/api/admin/article/10005, methodName=com.ivan.sunnyblog.web.controller.ArticleController.getArticleDetail, args=[10005], result=ResultInfo{info='null', status=0, data=ArticleDetailVo{categoryId=1, BaseArticleVo{articleId=10005, status=1, title='dd', description='This is the doc of React markdown editor lite.
Enjoy!!', content='| Head | Head | Head | Head |
| --- | --- | --- | --- |
| Data | Data | Data | Data |
| Data | Data | Data | Data |

## æ‰‹æŠŠæ‰‹æ•™ä½ å†™ä¸€ä¸ªmarkdownç¼–è¾‘å™¨

> ç¬”è€…åœ¨18å¹´å¹´æœ«çš„æ—¶å€™æŽ¥åˆ°ä¸€ä¸ªå¼€å‘ä»»åŠ¡â€”â€”æ­å»ºä¸€ä¸ªAIé¡¹ç›®çš„å¼€æ”¾å¹³å°ï¼Œå…¶ä¸­çš„äº§å“æ–‡æ¡£ä¸ºè½¬åŒ–ä¸ºHTMLæ ¼å¼çš„markdownæ–‡æ¡£ã€‚è€ƒè™‘åˆ°æ–‡æ¡£çš„å³æ—¶æ›´æ–°ï¼Œå°†æ–‡æ¡£ä¿¡æ¯åšæˆäº†AjaxæŽ¥å£çš„å½¢å¼ã€‚å› æ­¤ç®¡ç†åŽå°åªéœ€å°†textareaè¡¨å•çš„å†…å®¹é€šè¿‡markdownè§£æžå™¨è¿›è¡ŒHTMLæ ¼å¼è½¬åŒ–ï¼Œç„¶åŽå°†markdownå†…å®¹å’Œç»è½¬åŒ–çš„HTMLæ–‡æ¡£éƒ½ä¿å­˜åˆ°æ•°æ®åº“å³å¯ã€‚
> åŸºæœ¬éœ€æ±‚å®ŒæˆåŽï¼Œä¸ºäº†æ›´å¥½çš„ç”¨æˆ·ä½“éªŒï¼Œè€ƒè™‘å°†å¸¸ç”¨çš„ç¼–è¾‘åŠŸèƒ½æ·»åŠ è¿›æ¥ã€‚æ”¹è¿›ç‰ˆä¸ä»…æ”¯æŒäº†å¸¸ç”¨çš„æ–‡æœ¬ç¼–è¾‘åŠŸèƒ½ï¼Œè¿˜å®žçŽ°çš„UIç•Œé¢çš„é…ç½®åŒ–ï¼Œè‡ªå®šä¹‰è¯­æ³•è§£æžå™¨ã€‚æœ¬ç€é€ ç¦ä¼¸æ‰‹å…šçš„ç›®çš„ï¼Œä»¥åŠç§¯ç´¯äº›å¼€æºç»éªŒï¼Œç¬”è€…å°†è¯¥react ç»„ä»¶ [react-markdown-editor-lite](https://github.com/HarryChen0506/react-markdown-editor-lite) è¿›è¡Œäº†å°è£…æ”¹é€ ï¼Œå¹¶ä¸”å‘å¸ƒåˆ°äº†å¼€æºç¤¾åŒºã€‚

### é¢„è§ˆ
åœ¨çº¿ä½“éªŒ [https://harrychen0506.github.io/react-markdown-editor-lite/](https://harrychen0506.github.io/react-markdown-editor-lite/)

![image](https://github.com//HarryChen0506/react-markdown-editor-lite/blob/master/image/react-markdown-editor-lite-v1.0.0.PNG?raw=true)

### ç‰¹ç‚¹
* è½»é‡ã€åŸºäºŽReact
* UIå¯é…ç½®, å¦‚åªæ˜¾ç¤ºç¼–è¾‘åŒºæˆ–é¢„è§ˆåŒº
* æ”¯æŒè‡ªå®šä¹‰markdownè¯­æ³•è§£æžå™¨,è¯­æ³•é«˜äº®ç­‰
* æ”¯æŒå¸¸ç”¨çš„markdownç¼–è¾‘åŠŸèƒ½ï¼Œå¦‚åŠ ç²—ï¼Œæ–œä½“ç­‰ç­‰...
* æ”¯æŒåŠŸèƒ½æŒ‰é’®æ’æ‹”åŒ–ï¼Œç”¨æˆ·å¯ä»¥è‡ªå®šä¹‰æ‰©å±•ç»„ä»¶
* æ”¯æŒç¼–è¾‘åŒºå’Œé¢„è§ˆåŒºåŒæ­¥æ»šåŠ¨

### å¼€å‘å¿ƒå¾—

- æ–‡æœ¬ç¼–è¾‘

  å¤§å¤šæ•°å¸¸è§çš„ç¼–è¾‘å™¨ï¼ŒåŒ…æ‹¬å¯Œæ–‡æœ¬ç¼–è¾‘å™¨ï¼Œåˆ©ç”¨äº†æŸäº›å…ƒç´ å¦‚divçš„contenteditableå±žæ€§ï¼Œé…åˆselectionã€rangeã€execCommandç­‰APIï¼Œå®žçŽ°äº†å¯Œæ–‡æœ¬ç¼–è¾‘åŠŸèƒ½ã€‚è¿™é‡Œé¢çš„å®žçŽ°æ¯”è¾ƒå¤æ‚ï¼Œæ‰€ä»¥æœ‰äº†"[ä¸ºä»€ä¹ˆéƒ½è¯´å¯Œæ–‡æœ¬ç¼–è¾‘å™¨æ˜¯å¤©å‘ï¼Ÿ](https://www.zhihu.com/question/38699645)"è¿™ä¸ªè¯´æ³•ã€‚

  è€Œmarkdownç¼–è¾‘å™¨ï¼Œæ ¸å¿ƒçš„å¤„ç†å†…å®¹ä¸ºç®€å•è¯­æ³•çš„çº¯æ–‡æœ¬ï¼Œå¤æ‚åº¦ç›¸å¯¹æ¥è¯´æ¯”è¾ƒä½Žï¼Œå¹¶ä¸”inputæ ‡ç­¾è‡ªå¸¦onSelectäº‹ä»¶ï¼Œå¯ä»¥å¾ˆæ–¹ä¾¿çš„èŽ·å–é€‰æ‹©ä¿¡æ¯ï¼ˆé€‰æ‹©èµ·å§‹ä½ç½®å’Œé€‰æ‹©æ–‡æœ¬å€¼ï¼‰ï¼Œå› æ­¤è¦æƒ³å®žçŽ°ç¼–è¾‘åŠŸèƒ½ï¼Œåªéœ€å°†è¦æ”¹åŠ¨çš„å†…å®¹è¿›è¡Œæ–‡æœ¬è½¬æ¢ï¼Œç„¶åŽè¿›è¡Œé‡æ–°æ‹¼æŽ¥é¦–å°¾ï¼Œå¤§åŠŸå‘Šæˆã€‚
  
- markdownè§£æž

  è€ƒå¯Ÿäº†å‡ ä¸ªç¤¾åŒºæµè¡Œçš„markdownè§£æžå™¨ï¼Œæ¯”è¾ƒæµè¡Œçš„æœ‰[markdown](https://www.npmjs.com/package/markdown), [markdown-it](https://www.npmjs.com/package/markdown-it), [marked](https://www.npmjs.com/package/marked) ç­‰ç­‰ã€‚ç»¼åˆè€ƒè™‘æ‰©å±•æ€§ä»¥åŠç¨³å®šæ€§ï¼Œç¬”è€…æŽ¨èä½¿ç”¨markdown-itä½œä¸ºmarkdownçš„è¯æ³•è§£æžå™¨ï¼Œå› ä¸ºè¯¥è§£æžå™¨æœ‰æ¯”è¾ƒå¤šçš„æ’ä»¶ï¼Œå¹¶ä¸”æ”¯æŒè¯­æ³•é«˜äº®ã€‚

- åŒæ­¥æ»šåŠ¨

  å½“é€‰æ‹©åˆ†æ ç¼–è¾‘çš„æ—¶å€™ï¼Œæ»šåŠ¨å·¦ä¾§çš„ç¼–è¾‘åŒºï¼Œå³ä¾§çš„é¢„è§ˆåŒºèƒ½è‡ªåŠ¨æ»šåŠ¨åˆ°å¯¹åº”çš„åŒºåŸŸã€‚æ–¹æ¡ˆå‚è€ƒäº†ã€Š[æ‰‹æŠŠæ‰‹æ•™ä½ ç”¨ 100è¡Œä»£ç å®žçŽ°åŸºäºŽ reactçš„ markdown è¾“å…¥ + å³æ—¶é¢„è§ˆåœ¨çº¿ç¼–è¾‘å™¨ï¼ˆä¸€ï¼‰](https://github.com/accforgit/blog-data/blob/master/%E5%9C%A8%E7%BA%BF%E7%BC%96%E8%BE%91%E5%99%A8/README/README1.md)ã€‹ã€‚åªéœ€å…ˆè®¡ç®—å‡ºè¾“å…¥æ¡†å®¹å™¨å…ƒç´ ä¸Žé¢„è§ˆæ¡†å®¹å™¨å…ƒç´ ä¹‹é—´æœ€å¤§scrollèŒƒå›´çš„æ¯”ä¾‹å€¼ï¼Œç„¶åŽæ ¹æ®ä¸»åŠ¨æ»šåŠ¨å…ƒç´ è‡ªèº«çš„scrollTopåšç›¸åº”çš„æ¯”ä¾‹æ¢ç®—ï¼Œå³å¯çŸ¥é“å¯¹æ–¹åŒºåŸŸçš„scrollTopå€¼ã€‚

- å…³äºŽUI
 
  - é¡¹ç›®çš„å­—ä½“åº“é€‰æ‹©äº†Font Awesomeé£Žæ ¼ï¼Œå¹¶ä¸”åªé€‰å–äº†é¡¹ç›®æ‰€éœ€è¦çš„ä¸€äº›å›¾æ ‡ã€‚
  - ç¼–è¾‘å™¨çš„æ•´ä½“csså‡å¯é€šè¿‡å…¨å±€è¦†ç›–çš„å½¢å¼è¿›è¡Œè‡ªå®šä¹‰ã€‚ç›®å‰æš‚æ—¶åªæ”¯æŒç°è‰²ä¸»é¢˜ã€‚
  - ç¼–è¾‘å™¨çš„æ˜¾ç¤ºåŒºåŸŸåŒ…æ‹¬èœå•æ ï¼Œç¼–è¾‘å™¨ï¼Œé¢„è§ˆåŒºï¼Œå·¥å…·æ ï¼Œé€šè¿‡é…ç½®ç»„ä»¶çš„configå±žæ€§ï¼Œå¯ä»¥é€‰æ‹©é»˜è®¤çš„å±•ç¤ºåŒºåŸŸã€‚
  
### Install

```js
npm install react-markdown-editor-lite --save
```

### Props

| Property | Description | Type | default | Remarks |
| --- | --- | --- | --- | --- |
| value | markdown content | String | '' | required |
| style | component container style | Object | {height: '100%'} | not required |
| config | component config | Object | {view: {...}, logger: {...}} | not required |
| onChange | emitting when editor has changed | Function | ({html, md}) => {} | not required |
| onImageUpload | when image uploaded, callback emitting will get image markdown text | (file: File, callback: (url: string) => void) => void; | ({file, callback}) => {} | not required |
| renderHTML | Render markdown text to HTML. You can return either string, function or Promise | (text: string) => string|function|Promise | none | **required** |

### Example

``` js
'use strict';
import React from 'react'
import ReactDOM from 'react-dom'
import MdEditor from 'react-markdown-editor-lite'
import MarkdownIt from 'markdown-it'
import emoji from 'markdown-it-emoji'
import subscript from 'markdown-it-sub'
import superscript from 'markdown-it-sup'
import footnote from 'markdown-it-footnote'
import deflist from 'markdown-it-deflist'
import abbreviation from 'markdown-it-abbr'
import insert from 'markdown-it-ins'
import mark from 'markdown-it-mark'
import tasklists from 'markdown-it-task-lists'
import hljs from 'highlight.js'
import 'highlight.js/styles/atom-one-light.css'
// import 'highlight.js/styles/github.css'
import './index.less';

const MOCK_DATA = "I Love React."
export default class Demo extends React.Component {
  mdEditor = null
  mdParser = null
  constructor(props) {
    super(props)
    // initial a parsera
    this.mdParser = new MarkdownIt({
      html: true,
      linkify: true,
      typographer: true,
      highlight: function (str, lang) {
        if (lang && hljs.getLanguage(lang)) {
          try {
            return hljs.highlight(lang, str).value
          } catch (__) {}
        }    
        return '' // use external default escaping
      }
    })
    .use(emoji)
    .use(subscript)
    .use(superscript)
    .use(footnote)
    .use(deflist)
    .use(abbreviation)
    .use(insert)
    .use(mark)
    .use(tasklists, { enabled: this.taskLists })
    this.renderHTML = this.renderHTML.bind(this)
  }
  handleEditorChange({html, md}) {
    console.log('handleEditorChange', html, md)
  }
  handleImageUpload(file, callback) {
    const reader = new FileReader()
    reader.onload = () => {      
      const convertBase64UrlToBlob = (urlData) => {  
        let arr = urlData.split(','), mime = arr[0].match(/:(.*?);/)[1]
        let bstr = atob(arr[1])
        let n = bstr.length
        let u8arr = new Uint8Array(n)
        while (n--) {
          u8arr[n] = bstr.charCodeAt(n)
        }
        return new Blob([u8arr], {type:mime})
      }
      const blob = convertBase64UrlToBlob(reader.result)
      setTimeout(() => {
        // setTimeout æ¨¡æ‹Ÿå¼‚æ­¥ä¸Šä¼ å›¾ç‰‡
        // å½“å¼‚æ­¥ä¸Šä¼ èŽ·å–å›¾ç‰‡åœ°å€åŽï¼Œæ‰§è¡Œcalbackå›žè°ƒï¼ˆå‚æ•°ä¸ºimageUrlå­—ç¬¦ä¸²ï¼‰ï¼Œå³å¯å°†å›¾ç‰‡åœ°å€å†™å…¥markdown
        callback('https://avatars0.githubusercontent.com/u/21263805?s=40&v=4')
      }, 1000)
    }
    reader.readAsDataURL(file)
  }
  renderHTML(text) {
    // æ¨¡æ‹Ÿå¼‚æ­¥æ¸²æŸ“Markdown
    return new Promise((resolve) => {
      setTimeout(() => {
        resolve(this.mdParser.render(text))
      }, 1000)
    })
  }
  handleGetMdValue = () => {   
    this.mdEditor && alert(this.mdEditor.getMdValue())      
  }
  handleGetHtmlValue = () => {    
    this.mdEditor && alert(this.mdEditor.getHtmlValue())
  }
  render() {
    return (      
      <div>
        <nav>
          <button onClick={this.handleGetMdValue} >getMdValue</button>  
          <button onClick={this.handleGetHtmlValue} >getHtmlValue</button>  
        </nav>
        <section style="height: 500px">
          <MdEditor 
            ref={node => this.mdEditor = node}
            value={MOCK_DATA}
            style={{height: '400px'}}
            renderHTML={this.renderHTML}
            config={{
              view: {
                menu: true,
                md: true,
                html: true
              },
              imageUrl: 'https://octodex.github.com/images/minion.png'
            }}
            onChange={this.handleEditorChange} 
            onImageUpload={this.handleImageUpload}
          />
        </section>                        
      </div>      
    )
  }
}
```

### æœ€åŽ

   æ¬¢è¿Žå¤§å®¶ä½¿ç”¨å’Œåé¦ˆï¼Œ[é¡¹ç›®åœ°å€](https://github.com/HarryChen0506/react-markdown-editor-lite) (https://github.com/HarryChen0506/react-markdown-editor-lite)ï¼Œ ä½ çš„ç‚¹èµžå°†æ˜¯æˆ‘èŽ«å¤§çš„åŠ¨åŠ›ðŸ˜Š

', firstPicture='', viewCount=0, createDate='Sun Nov 07 14:09:29 EST 2021', updateDate='Mon Nov 08 09:15:09 EST 2021'}}, total=null}
2021-11-14 21:57:54:598 [http-nio-8081-exec-1] INFO  com.ivan.sunnyblog.web.res.S3ResourceManager uploading file to s3
2021-11-14 21:57:54:920 [http-nio-8081-exec-1] INFO  com.ivan.sunnyblog.web.res.S3ResourceManager uploading done. returned url: https://s3.ca-central-1.amazonaws.com/res-blog-public/res-dev/blog_1636945074598_test.png
2021-11-14 21:57:54:921 [http-nio-8081-exec-1] INFO  com.ivan.sunnyblog.web.aop.ControllerAspect *** Request Success ***: 323ms POST URI=/api/upload, methodName=com.ivan.sunnyblog.web.controller.ResourceController.upload, args=[org.springframework.web.multipart.support.StandardMultipartHttpServletRequest$StandardMultipartFile@10d69e71], result=ResultInfo{info='null', status=0, data=https://s3.ca-central-1.amazonaws.com/res-blog-public/res-dev/blog_1636945074598_test.png, total=null}
2021-11-14 22:05:25:541 [http-nio-8081-exec-5] INFO  com.ivan.sunnyblog.web.aop.ControllerAspect *** Request Success ***: 4ms GET URI=/api/admin/category, methodName=com.ivan.sunnyblog.web.controller.CategoryContoller.getCategoryList, args=[SearchVo{page=1, limit=10, categoryId=null, total=null}], result=ResultInfo{info='null', status=0, data=[Category (1, Life ), Category (2, liddffd)], total=null}
2021-11-14 22:05:25:545 [http-nio-8081-exec-6] INFO  com.ivan.sunnyblog.web.aop.ControllerAspect *** Request Success ***: 9ms GET URI=/api/admin/article/10005, methodName=com.ivan.sunnyblog.web.controller.ArticleController.getArticleDetail, args=[10005], result=ResultInfo{info='null', status=0, data=ArticleDetailVo{categoryId=1, BaseArticleVo{articleId=10005, status=1, title='dd', description='This is the doc of React markdown editor lite.
Enjoy!!', content='| Head | Head | Head | Head |
| --- | --- | --- | --- |
| Data | Data | Data | Data |
| Data | Data | Data | Data |

## æ‰‹æŠŠæ‰‹æ•™ä½ å†™ä¸€ä¸ªmarkdownç¼–è¾‘å™¨

> ç¬”è€…åœ¨18å¹´å¹´æœ«çš„æ—¶å€™æŽ¥åˆ°ä¸€ä¸ªå¼€å‘ä»»åŠ¡â€”â€”æ­å»ºä¸€ä¸ªAIé¡¹ç›®çš„å¼€æ”¾å¹³å°ï¼Œå…¶ä¸­çš„äº§å“æ–‡æ¡£ä¸ºè½¬åŒ–ä¸ºHTMLæ ¼å¼çš„markdownæ–‡æ¡£ã€‚è€ƒè™‘åˆ°æ–‡æ¡£çš„å³æ—¶æ›´æ–°ï¼Œå°†æ–‡æ¡£ä¿¡æ¯åšæˆäº†AjaxæŽ¥å£çš„å½¢å¼ã€‚å› æ­¤ç®¡ç†åŽå°åªéœ€å°†textareaè¡¨å•çš„å†…å®¹é€šè¿‡markdownè§£æžå™¨è¿›è¡ŒHTMLæ ¼å¼è½¬åŒ–ï¼Œç„¶åŽå°†markdownå†…å®¹å’Œç»è½¬åŒ–çš„HTMLæ–‡æ¡£éƒ½ä¿å­˜åˆ°æ•°æ®åº“å³å¯ã€‚
> åŸºæœ¬éœ€æ±‚å®ŒæˆåŽï¼Œä¸ºäº†æ›´å¥½çš„ç”¨æˆ·ä½“éªŒï¼Œè€ƒè™‘å°†å¸¸ç”¨çš„ç¼–è¾‘åŠŸèƒ½æ·»åŠ è¿›æ¥ã€‚æ”¹è¿›ç‰ˆä¸ä»…æ”¯æŒäº†å¸¸ç”¨çš„æ–‡æœ¬ç¼–è¾‘åŠŸèƒ½ï¼Œè¿˜å®žçŽ°çš„UIç•Œé¢çš„é…ç½®åŒ–ï¼Œè‡ªå®šä¹‰è¯­æ³•è§£æžå™¨ã€‚æœ¬ç€é€ ç¦ä¼¸æ‰‹å…šçš„ç›®çš„ï¼Œä»¥åŠç§¯ç´¯äº›å¼€æºç»éªŒï¼Œç¬”è€…å°†è¯¥react ç»„ä»¶ [react-markdown-editor-lite](https://github.com/HarryChen0506/react-markdown-editor-lite) è¿›è¡Œäº†å°è£…æ”¹é€ ï¼Œå¹¶ä¸”å‘å¸ƒåˆ°äº†å¼€æºç¤¾åŒºã€‚

### é¢„è§ˆ
åœ¨çº¿ä½“éªŒ [https://harrychen0506.github.io/react-markdown-editor-lite/](https://harrychen0506.github.io/react-markdown-editor-lite/)

![image](https://github.com//HarryChen0506/react-markdown-editor-lite/blob/master/image/react-markdown-editor-lite-v1.0.0.PNG?raw=true)

### ç‰¹ç‚¹
* è½»é‡ã€åŸºäºŽReact
* UIå¯é…ç½®, å¦‚åªæ˜¾ç¤ºç¼–è¾‘åŒºæˆ–é¢„è§ˆåŒº
* æ”¯æŒè‡ªå®šä¹‰markdownè¯­æ³•è§£æžå™¨,è¯­æ³•é«˜äº®ç­‰
* æ”¯æŒå¸¸ç”¨çš„markdownç¼–è¾‘åŠŸèƒ½ï¼Œå¦‚åŠ ç²—ï¼Œæ–œä½“ç­‰ç­‰...
* æ”¯æŒåŠŸèƒ½æŒ‰é’®æ’æ‹”åŒ–ï¼Œç”¨æˆ·å¯ä»¥è‡ªå®šä¹‰æ‰©å±•ç»„ä»¶
* æ”¯æŒç¼–è¾‘åŒºå’Œé¢„è§ˆåŒºåŒæ­¥æ»šåŠ¨

### å¼€å‘å¿ƒå¾—

- æ–‡æœ¬ç¼–è¾‘

  å¤§å¤šæ•°å¸¸è§çš„ç¼–è¾‘å™¨ï¼ŒåŒ…æ‹¬å¯Œæ–‡æœ¬ç¼–è¾‘å™¨ï¼Œåˆ©ç”¨äº†æŸäº›å…ƒç´ å¦‚divçš„contenteditableå±žæ€§ï¼Œé…åˆselectionã€rangeã€execCommandç­‰APIï¼Œå®žçŽ°äº†å¯Œæ–‡æœ¬ç¼–è¾‘åŠŸèƒ½ã€‚è¿™é‡Œé¢çš„å®žçŽ°æ¯”è¾ƒå¤æ‚ï¼Œæ‰€ä»¥æœ‰äº†"[ä¸ºä»€ä¹ˆéƒ½è¯´å¯Œæ–‡æœ¬ç¼–è¾‘å™¨æ˜¯å¤©å‘ï¼Ÿ](https://www.zhihu.com/question/38699645)"è¿™ä¸ªè¯´æ³•ã€‚

  è€Œmarkdownç¼–è¾‘å™¨ï¼Œæ ¸å¿ƒçš„å¤„ç†å†…å®¹ä¸ºç®€å•è¯­æ³•çš„çº¯æ–‡æœ¬ï¼Œå¤æ‚åº¦ç›¸å¯¹æ¥è¯´æ¯”è¾ƒä½Žï¼Œå¹¶ä¸”inputæ ‡ç­¾è‡ªå¸¦onSelectäº‹ä»¶ï¼Œå¯ä»¥å¾ˆæ–¹ä¾¿çš„èŽ·å–é€‰æ‹©ä¿¡æ¯ï¼ˆé€‰æ‹©èµ·å§‹ä½ç½®å’Œé€‰æ‹©æ–‡æœ¬å€¼ï¼‰ï¼Œå› æ­¤è¦æƒ³å®žçŽ°ç¼–è¾‘åŠŸèƒ½ï¼Œåªéœ€å°†è¦æ”¹åŠ¨çš„å†…å®¹è¿›è¡Œæ–‡æœ¬è½¬æ¢ï¼Œç„¶åŽè¿›è¡Œé‡æ–°æ‹¼æŽ¥é¦–å°¾ï¼Œå¤§åŠŸå‘Šæˆã€‚
  
- markdownè§£æž

  è€ƒå¯Ÿäº†å‡ ä¸ªç¤¾åŒºæµè¡Œçš„markdownè§£æžå™¨ï¼Œæ¯”è¾ƒæµè¡Œçš„æœ‰[markdown](https://www.npmjs.com/package/markdown), [markdown-it](https://www.npmjs.com/package/markdown-it), [marked](https://www.npmjs.com/package/marked) ç­‰ç­‰ã€‚ç»¼åˆè€ƒè™‘æ‰©å±•æ€§ä»¥åŠç¨³å®šæ€§ï¼Œç¬”è€…æŽ¨èä½¿ç”¨markdown-itä½œä¸ºmarkdownçš„è¯æ³•è§£æžå™¨ï¼Œå› ä¸ºè¯¥è§£æžå™¨æœ‰æ¯”è¾ƒå¤šçš„æ’ä»¶ï¼Œå¹¶ä¸”æ”¯æŒè¯­æ³•é«˜äº®ã€‚

- åŒæ­¥æ»šåŠ¨

  å½“é€‰æ‹©åˆ†æ ç¼–è¾‘çš„æ—¶å€™ï¼Œæ»šåŠ¨å·¦ä¾§çš„ç¼–è¾‘åŒºï¼Œå³ä¾§çš„é¢„è§ˆåŒºèƒ½è‡ªåŠ¨æ»šåŠ¨åˆ°å¯¹åº”çš„åŒºåŸŸã€‚æ–¹æ¡ˆå‚è€ƒäº†ã€Š[æ‰‹æŠŠæ‰‹æ•™ä½ ç”¨ 100è¡Œä»£ç å®žçŽ°åŸºäºŽ reactçš„ markdown è¾“å…¥ + å³æ—¶é¢„è§ˆåœ¨çº¿ç¼–è¾‘å™¨ï¼ˆä¸€ï¼‰](https://github.com/accforgit/blog-data/blob/master/%E5%9C%A8%E7%BA%BF%E7%BC%96%E8%BE%91%E5%99%A8/README/README1.md)ã€‹ã€‚åªéœ€å…ˆè®¡ç®—å‡ºè¾“å…¥æ¡†å®¹å™¨å…ƒç´ ä¸Žé¢„è§ˆæ¡†å®¹å™¨å…ƒç´ ä¹‹é—´æœ€å¤§scrollèŒƒå›´çš„æ¯”ä¾‹å€¼ï¼Œç„¶åŽæ ¹æ®ä¸»åŠ¨æ»šåŠ¨å…ƒç´ è‡ªèº«çš„scrollTopåšç›¸åº”çš„æ¯”ä¾‹æ¢ç®—ï¼Œå³å¯çŸ¥é“å¯¹æ–¹åŒºåŸŸçš„scrollTopå€¼ã€‚

- å…³äºŽUI
 
  - é¡¹ç›®çš„å­—ä½“åº“é€‰æ‹©äº†Font Awesomeé£Žæ ¼ï¼Œå¹¶ä¸”åªé€‰å–äº†é¡¹ç›®æ‰€éœ€è¦çš„ä¸€äº›å›¾æ ‡ã€‚
  - ç¼–è¾‘å™¨çš„æ•´ä½“csså‡å¯é€šè¿‡å…¨å±€è¦†ç›–çš„å½¢å¼è¿›è¡Œè‡ªå®šä¹‰ã€‚ç›®å‰æš‚æ—¶åªæ”¯æŒç°è‰²ä¸»é¢˜ã€‚
  - ç¼–è¾‘å™¨çš„æ˜¾ç¤ºåŒºåŸŸåŒ…æ‹¬èœå•æ ï¼Œç¼–è¾‘å™¨ï¼Œé¢„è§ˆåŒºï¼Œå·¥å…·æ ï¼Œé€šè¿‡é…ç½®ç»„ä»¶çš„configå±žæ€§ï¼Œå¯ä»¥é€‰æ‹©é»˜è®¤çš„å±•ç¤ºåŒºåŸŸã€‚
  
### Install

```js
npm install react-markdown-editor-lite --save
```

### Props

| Property | Description | Type | default | Remarks |
| --- | --- | --- | --- | --- |
| value | markdown content | String | '' | required |
| style | component container style | Object | {height: '100%'} | not required |
| config | component config | Object | {view: {...}, logger: {...}} | not required |
| onChange | emitting when editor has changed | Function | ({html, md}) => {} | not required |
| onImageUpload | when image uploaded, callback emitting will get image markdown text | (file: File, callback: (url: string) => void) => void; | ({file, callback}) => {} | not required |
| renderHTML | Render markdown text to HTML. You can return either string, function or Promise | (text: string) => string|function|Promise | none | **required** |

### Example

``` js
'use strict';
import React from 'react'
import ReactDOM from 'react-dom'
import MdEditor from 'react-markdown-editor-lite'
import MarkdownIt from 'markdown-it'
import emoji from 'markdown-it-emoji'
import subscript from 'markdown-it-sub'
import superscript from 'markdown-it-sup'
import footnote from 'markdown-it-footnote'
import deflist from 'markdown-it-deflist'
import abbreviation from 'markdown-it-abbr'
import insert from 'markdown-it-ins'
import mark from 'markdown-it-mark'
import tasklists from 'markdown-it-task-lists'
import hljs from 'highlight.js'
import 'highlight.js/styles/atom-one-light.css'
// import 'highlight.js/styles/github.css'
import './index.less';

const MOCK_DATA = "I Love React."
export default class Demo extends React.Component {
  mdEditor = null
  mdParser = null
  constructor(props) {
    super(props)
    // initial a parsera
    this.mdParser = new MarkdownIt({
      html: true,
      linkify: true,
      typographer: true,
      highlight: function (str, lang) {
        if (lang && hljs.getLanguage(lang)) {
          try {
            return hljs.highlight(lang, str).value
          } catch (__) {}
        }    
        return '' // use external default escaping
      }
    })
    .use(emoji)
    .use(subscript)
    .use(superscript)
    .use(footnote)
    .use(deflist)
    .use(abbreviation)
    .use(insert)
    .use(mark)
    .use(tasklists, { enabled: this.taskLists })
    this.renderHTML = this.renderHTML.bind(this)
  }
  handleEditorChange({html, md}) {
    console.log('handleEditorChange', html, md)
  }
  handleImageUpload(file, callback) {
    const reader = new FileReader()
    reader.onload = () => {      
      const convertBase64UrlToBlob = (urlData) => {  
        let arr = urlData.split(','), mime = arr[0].match(/:(.*?);/)[1]
        let bstr = atob(arr[1])
        let n = bstr.length
        let u8arr = new Uint8Array(n)
        while (n--) {
          u8arr[n] = bstr.charCodeAt(n)
        }
        return new Blob([u8arr], {type:mime})
      }
      const blob = convertBase64UrlToBlob(reader.result)
      setTimeout(() => {
        // setTimeout æ¨¡æ‹Ÿå¼‚æ­¥ä¸Šä¼ å›¾ç‰‡
        // å½“å¼‚æ­¥ä¸Šä¼ èŽ·å–å›¾ç‰‡åœ°å€åŽï¼Œæ‰§è¡Œcalbackå›žè°ƒï¼ˆå‚æ•°ä¸ºimageUrlå­—ç¬¦ä¸²ï¼‰ï¼Œå³å¯å°†å›¾ç‰‡åœ°å€å†™å…¥markdown
        callback('https://avatars0.githubusercontent.com/u/21263805?s=40&v=4')
      }, 1000)
    }
    reader.readAsDataURL(file)
  }
  renderHTML(text) {
    // æ¨¡æ‹Ÿå¼‚æ­¥æ¸²æŸ“Markdown
    return new Promise((resolve) => {
      setTimeout(() => {
        resolve(this.mdParser.render(text))
      }, 1000)
    })
  }
  handleGetMdValue = () => {   
    this.mdEditor && alert(this.mdEditor.getMdValue())      
  }
  handleGetHtmlValue = () => {    
    this.mdEditor && alert(this.mdEditor.getHtmlValue())
  }
  render() {
    return (      
      <div>
        <nav>
          <button onClick={this.handleGetMdValue} >getMdValue</button>  
          <button onClick={this.handleGetHtmlValue} >getHtmlValue</button>  
        </nav>
        <section style="height: 500px">
          <MdEditor 
            ref={node => this.mdEditor = node}
            value={MOCK_DATA}
            style={{height: '400px'}}
            renderHTML={this.renderHTML}
            config={{
              view: {
                menu: true,
                md: true,
                html: true
              },
              imageUrl: 'https://octodex.github.com/images/minion.png'
            }}
            onChange={this.handleEditorChange} 
            onImageUpload={this.handleImageUpload}
          />
        </section>                        
      </div>      
    )
  }
}
```

### æœ€åŽ

   æ¬¢è¿Žå¤§å®¶ä½¿ç”¨å’Œåé¦ˆï¼Œ[é¡¹ç›®åœ°å€](https://github.com/HarryChen0506/react-markdown-editor-lite) (https://github.com/HarryChen0506/react-markdown-editor-lite)ï¼Œ ä½ çš„ç‚¹èµžå°†æ˜¯æˆ‘èŽ«å¤§çš„åŠ¨åŠ›ðŸ˜Š

', firstPicture='', viewCount=0, createDate='Sun Nov 07 14:09:29 EST 2021', updateDate='Mon Nov 08 09:15:09 EST 2021'}}, total=null}
2021-11-14 22:05:41:497 [http-nio-8081-exec-7] INFO  com.ivan.sunnyblog.web.res.S3ResourceManager uploading file to s3
2021-11-14 22:05:41:779 [http-nio-8081-exec-7] INFO  com.ivan.sunnyblog.web.res.S3ResourceManager uploading done. returned url: https://s3.ca-central-1.amazonaws.com/res-blog-public/res-dev/blog_1636945541497_1.png
2021-11-14 22:05:41:780 [http-nio-8081-exec-7] INFO  com.ivan.sunnyblog.web.aop.ControllerAspect *** Request Success ***: 283ms POST URI=/api/upload, methodName=com.ivan.sunnyblog.web.controller.ResourceController.upload, args=[org.springframework.web.multipart.support.StandardMultipartHttpServletRequest$StandardMultipartFile@14dc0bec], result=ResultInfo{info='null', status=0, data=https://s3.ca-central-1.amazonaws.com/res-blog-public/res-dev/blog_1636945541497_1.png, total=null}
2021-11-14 22:06:51:932 [http-nio-8081-exec-10] INFO  com.ivan.sunnyblog.web.aop.ControllerAspect *** Request Success ***: 1ms GET URI=/api/admin/category, methodName=com.ivan.sunnyblog.web.controller.CategoryContoller.getCategoryList, args=[SearchVo{page=1, limit=10, categoryId=null, total=null}], result=ResultInfo{info='null', status=0, data=[Category (1, Life ), Category (2, liddffd)], total=null}
2021-11-14 22:06:51:935 [http-nio-8081-exec-4] INFO  com.ivan.sunnyblog.web.aop.ControllerAspect *** Request Success ***: 4ms GET URI=/api/admin/article/10005, methodName=com.ivan.sunnyblog.web.controller.ArticleController.getArticleDetail, args=[10005], result=ResultInfo{info='null', status=0, data=ArticleDetailVo{categoryId=1, BaseArticleVo{articleId=10005, status=1, title='dd', description='This is the doc of React markdown editor lite.
Enjoy!!', content='| Head | Head | Head | Head |
| --- | --- | --- | --- |
| Data | Data | Data | Data |
| Data | Data | Data | Data |

## æ‰‹æŠŠæ‰‹æ•™ä½ å†™ä¸€ä¸ªmarkdownç¼–è¾‘å™¨

> ç¬”è€…åœ¨18å¹´å¹´æœ«çš„æ—¶å€™æŽ¥åˆ°ä¸€ä¸ªå¼€å‘ä»»åŠ¡â€”â€”æ­å»ºä¸€ä¸ªAIé¡¹ç›®çš„å¼€æ”¾å¹³å°ï¼Œå…¶ä¸­çš„äº§å“æ–‡æ¡£ä¸ºè½¬åŒ–ä¸ºHTMLæ ¼å¼çš„markdownæ–‡æ¡£ã€‚è€ƒè™‘åˆ°æ–‡æ¡£çš„å³æ—¶æ›´æ–°ï¼Œå°†æ–‡æ¡£ä¿¡æ¯åšæˆäº†AjaxæŽ¥å£çš„å½¢å¼ã€‚å› æ­¤ç®¡ç†åŽå°åªéœ€å°†textareaè¡¨å•çš„å†…å®¹é€šè¿‡markdownè§£æžå™¨è¿›è¡ŒHTMLæ ¼å¼è½¬åŒ–ï¼Œç„¶åŽå°†markdownå†…å®¹å’Œç»è½¬åŒ–çš„HTMLæ–‡æ¡£éƒ½ä¿å­˜åˆ°æ•°æ®åº“å³å¯ã€‚
> åŸºæœ¬éœ€æ±‚å®ŒæˆåŽï¼Œä¸ºäº†æ›´å¥½çš„ç”¨æˆ·ä½“éªŒï¼Œè€ƒè™‘å°†å¸¸ç”¨çš„ç¼–è¾‘åŠŸèƒ½æ·»åŠ è¿›æ¥ã€‚æ”¹è¿›ç‰ˆä¸ä»…æ”¯æŒäº†å¸¸ç”¨çš„æ–‡æœ¬ç¼–è¾‘åŠŸèƒ½ï¼Œè¿˜å®žçŽ°çš„UIç•Œé¢çš„é…ç½®åŒ–ï¼Œè‡ªå®šä¹‰è¯­æ³•è§£æžå™¨ã€‚æœ¬ç€é€ ç¦ä¼¸æ‰‹å…šçš„ç›®çš„ï¼Œä»¥åŠç§¯ç´¯äº›å¼€æºç»éªŒï¼Œç¬”è€…å°†è¯¥react ç»„ä»¶ [react-markdown-editor-lite](https://github.com/HarryChen0506/react-markdown-editor-lite) è¿›è¡Œäº†å°è£…æ”¹é€ ï¼Œå¹¶ä¸”å‘å¸ƒåˆ°äº†å¼€æºç¤¾åŒºã€‚

### é¢„è§ˆ
åœ¨çº¿ä½“éªŒ [https://harrychen0506.github.io/react-markdown-editor-lite/](https://harrychen0506.github.io/react-markdown-editor-lite/)

![image](https://github.com//HarryChen0506/react-markdown-editor-lite/blob/master/image/react-markdown-editor-lite-v1.0.0.PNG?raw=true)

### ç‰¹ç‚¹
* è½»é‡ã€åŸºäºŽReact
* UIå¯é…ç½®, å¦‚åªæ˜¾ç¤ºç¼–è¾‘åŒºæˆ–é¢„è§ˆåŒº
* æ”¯æŒè‡ªå®šä¹‰markdownè¯­æ³•è§£æžå™¨,è¯­æ³•é«˜äº®ç­‰
* æ”¯æŒå¸¸ç”¨çš„markdownç¼–è¾‘åŠŸèƒ½ï¼Œå¦‚åŠ ç²—ï¼Œæ–œä½“ç­‰ç­‰...
* æ”¯æŒåŠŸèƒ½æŒ‰é’®æ’æ‹”åŒ–ï¼Œç”¨æˆ·å¯ä»¥è‡ªå®šä¹‰æ‰©å±•ç»„ä»¶
* æ”¯æŒç¼–è¾‘åŒºå’Œé¢„è§ˆåŒºåŒæ­¥æ»šåŠ¨

### å¼€å‘å¿ƒå¾—

- æ–‡æœ¬ç¼–è¾‘

  å¤§å¤šæ•°å¸¸è§çš„ç¼–è¾‘å™¨ï¼ŒåŒ…æ‹¬å¯Œæ–‡æœ¬ç¼–è¾‘å™¨ï¼Œåˆ©ç”¨äº†æŸäº›å…ƒç´ å¦‚divçš„contenteditableå±žæ€§ï¼Œé…åˆselectionã€rangeã€execCommandç­‰APIï¼Œå®žçŽ°äº†å¯Œæ–‡æœ¬ç¼–è¾‘åŠŸèƒ½ã€‚è¿™é‡Œé¢çš„å®žçŽ°æ¯”è¾ƒå¤æ‚ï¼Œæ‰€ä»¥æœ‰äº†"[ä¸ºä»€ä¹ˆéƒ½è¯´å¯Œæ–‡æœ¬ç¼–è¾‘å™¨æ˜¯å¤©å‘ï¼Ÿ](https://www.zhihu.com/question/38699645)"è¿™ä¸ªè¯´æ³•ã€‚

  è€Œmarkdownç¼–è¾‘å™¨ï¼Œæ ¸å¿ƒçš„å¤„ç†å†…å®¹ä¸ºç®€å•è¯­æ³•çš„çº¯æ–‡æœ¬ï¼Œå¤æ‚åº¦ç›¸å¯¹æ¥è¯´æ¯”è¾ƒä½Žï¼Œå¹¶ä¸”inputæ ‡ç­¾è‡ªå¸¦onSelectäº‹ä»¶ï¼Œå¯ä»¥å¾ˆæ–¹ä¾¿çš„èŽ·å–é€‰æ‹©ä¿¡æ¯ï¼ˆé€‰æ‹©èµ·å§‹ä½ç½®å’Œé€‰æ‹©æ–‡æœ¬å€¼ï¼‰ï¼Œå› æ­¤è¦æƒ³å®žçŽ°ç¼–è¾‘åŠŸèƒ½ï¼Œåªéœ€å°†è¦æ”¹åŠ¨çš„å†…å®¹è¿›è¡Œæ–‡æœ¬è½¬æ¢ï¼Œç„¶åŽè¿›è¡Œé‡æ–°æ‹¼æŽ¥é¦–å°¾ï¼Œå¤§åŠŸå‘Šæˆã€‚
  
- markdownè§£æž

  è€ƒå¯Ÿäº†å‡ ä¸ªç¤¾åŒºæµè¡Œçš„markdownè§£æžå™¨ï¼Œæ¯”è¾ƒæµè¡Œçš„æœ‰[markdown](https://www.npmjs.com/package/markdown), [markdown-it](https://www.npmjs.com/package/markdown-it), [marked](https://www.npmjs.com/package/marked) ç­‰ç­‰ã€‚ç»¼åˆè€ƒè™‘æ‰©å±•æ€§ä»¥åŠç¨³å®šæ€§ï¼Œç¬”è€…æŽ¨èä½¿ç”¨markdown-itä½œä¸ºmarkdownçš„è¯æ³•è§£æžå™¨ï¼Œå› ä¸ºè¯¥è§£æžå™¨æœ‰æ¯”è¾ƒå¤šçš„æ’ä»¶ï¼Œå¹¶ä¸”æ”¯æŒè¯­æ³•é«˜äº®ã€‚

- åŒæ­¥æ»šåŠ¨

  å½“é€‰æ‹©åˆ†æ ç¼–è¾‘çš„æ—¶å€™ï¼Œæ»šåŠ¨å·¦ä¾§çš„ç¼–è¾‘åŒºï¼Œå³ä¾§çš„é¢„è§ˆåŒºèƒ½è‡ªåŠ¨æ»šåŠ¨åˆ°å¯¹åº”çš„åŒºåŸŸã€‚æ–¹æ¡ˆå‚è€ƒäº†ã€Š[æ‰‹æŠŠæ‰‹æ•™ä½ ç”¨ 100è¡Œä»£ç å®žçŽ°åŸºäºŽ reactçš„ markdown è¾“å…¥ + å³æ—¶é¢„è§ˆåœ¨çº¿ç¼–è¾‘å™¨ï¼ˆä¸€ï¼‰](https://github.com/accforgit/blog-data/blob/master/%E5%9C%A8%E7%BA%BF%E7%BC%96%E8%BE%91%E5%99%A8/README/README1.md)ã€‹ã€‚åªéœ€å…ˆè®¡ç®—å‡ºè¾“å…¥æ¡†å®¹å™¨å…ƒç´ ä¸Žé¢„è§ˆæ¡†å®¹å™¨å…ƒç´ ä¹‹é—´æœ€å¤§scrollèŒƒå›´çš„æ¯”ä¾‹å€¼ï¼Œç„¶åŽæ ¹æ®ä¸»åŠ¨æ»šåŠ¨å…ƒç´ è‡ªèº«çš„scrollTopåšç›¸åº”çš„æ¯”ä¾‹æ¢ç®—ï¼Œå³å¯çŸ¥é“å¯¹æ–¹åŒºåŸŸçš„scrollTopå€¼ã€‚

- å…³äºŽUI
 
  - é¡¹ç›®çš„å­—ä½“åº“é€‰æ‹©äº†Font Awesomeé£Žæ ¼ï¼Œå¹¶ä¸”åªé€‰å–äº†é¡¹ç›®æ‰€éœ€è¦çš„ä¸€äº›å›¾æ ‡ã€‚
  - ç¼–è¾‘å™¨çš„æ•´ä½“csså‡å¯é€šè¿‡å…¨å±€è¦†ç›–çš„å½¢å¼è¿›è¡Œè‡ªå®šä¹‰ã€‚ç›®å‰æš‚æ—¶åªæ”¯æŒç°è‰²ä¸»é¢˜ã€‚
  - ç¼–è¾‘å™¨çš„æ˜¾ç¤ºåŒºåŸŸåŒ…æ‹¬èœå•æ ï¼Œç¼–è¾‘å™¨ï¼Œé¢„è§ˆåŒºï¼Œå·¥å…·æ ï¼Œé€šè¿‡é…ç½®ç»„ä»¶çš„configå±žæ€§ï¼Œå¯ä»¥é€‰æ‹©é»˜è®¤çš„å±•ç¤ºåŒºåŸŸã€‚
  
### Install

```js
npm install react-markdown-editor-lite --save
```

### Props

| Property | Description | Type | default | Remarks |
| --- | --- | --- | --- | --- |
| value | markdown content | String | '' | required |
| style | component container style | Object | {height: '100%'} | not required |
| config | component config | Object | {view: {...}, logger: {...}} | not required |
| onChange | emitting when editor has changed | Function | ({html, md}) => {} | not required |
| onImageUpload | when image uploaded, callback emitting will get image markdown text | (file: File, callback: (url: string) => void) => void; | ({file, callback}) => {} | not required |
| renderHTML | Render markdown text to HTML. You can return either string, function or Promise | (text: string) => string|function|Promise | none | **required** |

### Example

``` js
'use strict';
import React from 'react'
import ReactDOM from 'react-dom'
import MdEditor from 'react-markdown-editor-lite'
import MarkdownIt from 'markdown-it'
import emoji from 'markdown-it-emoji'
import subscript from 'markdown-it-sub'
import superscript from 'markdown-it-sup'
import footnote from 'markdown-it-footnote'
import deflist from 'markdown-it-deflist'
import abbreviation from 'markdown-it-abbr'
import insert from 'markdown-it-ins'
import mark from 'markdown-it-mark'
import tasklists from 'markdown-it-task-lists'
import hljs from 'highlight.js'
import 'highlight.js/styles/atom-one-light.css'
// import 'highlight.js/styles/github.css'
import './index.less';

const MOCK_DATA = "I Love React."
export default class Demo extends React.Component {
  mdEditor = null
  mdParser = null
  constructor(props) {
    super(props)
    // initial a parsera
    this.mdParser = new MarkdownIt({
      html: true,
      linkify: true,
      typographer: true,
      highlight: function (str, lang) {
        if (lang && hljs.getLanguage(lang)) {
          try {
            return hljs.highlight(lang, str).value
          } catch (__) {}
        }    
        return '' // use external default escaping
      }
    })
    .use(emoji)
    .use(subscript)
    .use(superscript)
    .use(footnote)
    .use(deflist)
    .use(abbreviation)
    .use(insert)
    .use(mark)
    .use(tasklists, { enabled: this.taskLists })
    this.renderHTML = this.renderHTML.bind(this)
  }
  handleEditorChange({html, md}) {
    console.log('handleEditorChange', html, md)
  }
  handleImageUpload(file, callback) {
    const reader = new FileReader()
    reader.onload = () => {      
      const convertBase64UrlToBlob = (urlData) => {  
        let arr = urlData.split(','), mime = arr[0].match(/:(.*?);/)[1]
        let bstr = atob(arr[1])
        let n = bstr.length
        let u8arr = new Uint8Array(n)
        while (n--) {
          u8arr[n] = bstr.charCodeAt(n)
        }
        return new Blob([u8arr], {type:mime})
      }
      const blob = convertBase64UrlToBlob(reader.result)
      setTimeout(() => {
        // setTimeout æ¨¡æ‹Ÿå¼‚æ­¥ä¸Šä¼ å›¾ç‰‡
        // å½“å¼‚æ­¥ä¸Šä¼ èŽ·å–å›¾ç‰‡åœ°å€åŽï¼Œæ‰§è¡Œcalbackå›žè°ƒï¼ˆå‚æ•°ä¸ºimageUrlå­—ç¬¦ä¸²ï¼‰ï¼Œå³å¯å°†å›¾ç‰‡åœ°å€å†™å…¥markdown
        callback('https://avatars0.githubusercontent.com/u/21263805?s=40&v=4')
      }, 1000)
    }
    reader.readAsDataURL(file)
  }
  renderHTML(text) {
    // æ¨¡æ‹Ÿå¼‚æ­¥æ¸²æŸ“Markdown
    return new Promise((resolve) => {
      setTimeout(() => {
        resolve(this.mdParser.render(text))
      }, 1000)
    })
  }
  handleGetMdValue = () => {   
    this.mdEditor && alert(this.mdEditor.getMdValue())      
  }
  handleGetHtmlValue = () => {    
    this.mdEditor && alert(this.mdEditor.getHtmlValue())
  }
  render() {
    return (      
      <div>
        <nav>
          <button onClick={this.handleGetMdValue} >getMdValue</button>  
          <button onClick={this.handleGetHtmlValue} >getHtmlValue</button>  
        </nav>
        <section style="height: 500px">
          <MdEditor 
            ref={node => this.mdEditor = node}
            value={MOCK_DATA}
            style={{height: '400px'}}
            renderHTML={this.renderHTML}
            config={{
              view: {
                menu: true,
                md: true,
                html: true
              },
              imageUrl: 'https://octodex.github.com/images/minion.png'
            }}
            onChange={this.handleEditorChange} 
            onImageUpload={this.handleImageUpload}
          />
        </section>                        
      </div>      
    )
  }
}
```

### æœ€åŽ

   æ¬¢è¿Žå¤§å®¶ä½¿ç”¨å’Œåé¦ˆï¼Œ[é¡¹ç›®åœ°å€](https://github.com/HarryChen0506/react-markdown-editor-lite) (https://github.com/HarryChen0506/react-markdown-editor-lite)ï¼Œ ä½ çš„ç‚¹èµžå°†æ˜¯æˆ‘èŽ«å¤§çš„åŠ¨åŠ›ðŸ˜Š

', firstPicture='', viewCount=0, createDate='Sun Nov 07 14:09:29 EST 2021', updateDate='Mon Nov 08 09:15:09 EST 2021'}}, total=null}
2021-11-14 22:06:58:501 [http-nio-8081-exec-1] INFO  com.ivan.sunnyblog.web.res.S3ResourceManager uploading file to s3
2021-11-14 22:06:58:787 [http-nio-8081-exec-1] INFO  com.ivan.sunnyblog.web.res.S3ResourceManager uploading done. returned url: https://s3.ca-central-1.amazonaws.com/res-blog-public/res-dev/blog_1636945618501_1.png
2021-11-14 22:06:58:787 [http-nio-8081-exec-1] INFO  com.ivan.sunnyblog.web.aop.ControllerAspect *** Request Success ***: 286ms POST URI=/api/upload, methodName=com.ivan.sunnyblog.web.controller.ResourceController.upload, args=[org.springframework.web.multipart.support.StandardMultipartHttpServletRequest$StandardMultipartFile@3c3cea0c], result=ResultInfo{info='null', status=0, data=https://s3.ca-central-1.amazonaws.com/res-blog-public/res-dev/blog_1636945618501_1.png, total=null}
2021-11-14 22:15:43:998 [http-nio-8081-exec-6] INFO  com.ivan.sunnyblog.web.aop.ControllerAspect *** Request Success ***: 9ms GET URI=/api/admin/category, methodName=com.ivan.sunnyblog.web.controller.CategoryContoller.getCategoryList, args=[SearchVo{page=1, limit=10, categoryId=null, total=null}], result=ResultInfo{info='null', status=0, data=[Category (1, Life ), Category (2, liddffd)], total=null}
2021-11-14 22:15:44:001 [http-nio-8081-exec-5] INFO  com.ivan.sunnyblog.web.aop.ControllerAspect *** Request Success ***: 10ms GET URI=/api/admin/article/10005, methodName=com.ivan.sunnyblog.web.controller.ArticleController.getArticleDetail, args=[10005], result=ResultInfo{info='null', status=0, data=ArticleDetailVo{categoryId=1, BaseArticleVo{articleId=10005, status=1, title='dd', description='This is the doc of React markdown editor lite.
Enjoy!!', content='| Head | Head | Head | Head |
| --- | --- | --- | --- |
| Data | Data | Data | Data |
| Data | Data | Data | Data |

## æ‰‹æŠŠæ‰‹æ•™ä½ å†™ä¸€ä¸ªmarkdownç¼–è¾‘å™¨

> ç¬”è€…åœ¨18å¹´å¹´æœ«çš„æ—¶å€™æŽ¥åˆ°ä¸€ä¸ªå¼€å‘ä»»åŠ¡â€”â€”æ­å»ºä¸€ä¸ªAIé¡¹ç›®çš„å¼€æ”¾å¹³å°ï¼Œå…¶ä¸­çš„äº§å“æ–‡æ¡£ä¸ºè½¬åŒ–ä¸ºHTMLæ ¼å¼çš„markdownæ–‡æ¡£ã€‚è€ƒè™‘åˆ°æ–‡æ¡£çš„å³æ—¶æ›´æ–°ï¼Œå°†æ–‡æ¡£ä¿¡æ¯åšæˆäº†AjaxæŽ¥å£çš„å½¢å¼ã€‚å› æ­¤ç®¡ç†åŽå°åªéœ€å°†textareaè¡¨å•çš„å†…å®¹é€šè¿‡markdownè§£æžå™¨è¿›è¡ŒHTMLæ ¼å¼è½¬åŒ–ï¼Œç„¶åŽå°†markdownå†…å®¹å’Œç»è½¬åŒ–çš„HTMLæ–‡æ¡£éƒ½ä¿å­˜åˆ°æ•°æ®åº“å³å¯ã€‚
> åŸºæœ¬éœ€æ±‚å®ŒæˆåŽï¼Œä¸ºäº†æ›´å¥½çš„ç”¨æˆ·ä½“éªŒï¼Œè€ƒè™‘å°†å¸¸ç”¨çš„ç¼–è¾‘åŠŸèƒ½æ·»åŠ è¿›æ¥ã€‚æ”¹è¿›ç‰ˆä¸ä»…æ”¯æŒäº†å¸¸ç”¨çš„æ–‡æœ¬ç¼–è¾‘åŠŸèƒ½ï¼Œè¿˜å®žçŽ°çš„UIç•Œé¢çš„é…ç½®åŒ–ï¼Œè‡ªå®šä¹‰è¯­æ³•è§£æžå™¨ã€‚æœ¬ç€é€ ç¦ä¼¸æ‰‹å…šçš„ç›®çš„ï¼Œä»¥åŠç§¯ç´¯äº›å¼€æºç»éªŒï¼Œç¬”è€…å°†è¯¥react ç»„ä»¶ [react-markdown-editor-lite](https://github.com/HarryChen0506/react-markdown-editor-lite) è¿›è¡Œäº†å°è£…æ”¹é€ ï¼Œå¹¶ä¸”å‘å¸ƒåˆ°äº†å¼€æºç¤¾åŒºã€‚

### é¢„è§ˆ
åœ¨çº¿ä½“éªŒ [https://harrychen0506.github.io/react-markdown-editor-lite/](https://harrychen0506.github.io/react-markdown-editor-lite/)

![image](https://github.com//HarryChen0506/react-markdown-editor-lite/blob/master/image/react-markdown-editor-lite-v1.0.0.PNG?raw=true)

### ç‰¹ç‚¹
* è½»é‡ã€åŸºäºŽReact
* UIå¯é…ç½®, å¦‚åªæ˜¾ç¤ºç¼–è¾‘åŒºæˆ–é¢„è§ˆåŒº
* æ”¯æŒè‡ªå®šä¹‰markdownè¯­æ³•è§£æžå™¨,è¯­æ³•é«˜äº®ç­‰
* æ”¯æŒå¸¸ç”¨çš„markdownç¼–è¾‘åŠŸèƒ½ï¼Œå¦‚åŠ ç²—ï¼Œæ–œä½“ç­‰ç­‰...
* æ”¯æŒåŠŸèƒ½æŒ‰é’®æ’æ‹”åŒ–ï¼Œç”¨æˆ·å¯ä»¥è‡ªå®šä¹‰æ‰©å±•ç»„ä»¶
* æ”¯æŒç¼–è¾‘åŒºå’Œé¢„è§ˆåŒºåŒæ­¥æ»šåŠ¨

### å¼€å‘å¿ƒå¾—

- æ–‡æœ¬ç¼–è¾‘

  å¤§å¤šæ•°å¸¸è§çš„ç¼–è¾‘å™¨ï¼ŒåŒ…æ‹¬å¯Œæ–‡æœ¬ç¼–è¾‘å™¨ï¼Œåˆ©ç”¨äº†æŸäº›å…ƒç´ å¦‚divçš„contenteditableå±žæ€§ï¼Œé…åˆselectionã€rangeã€execCommandç­‰APIï¼Œå®žçŽ°äº†å¯Œæ–‡æœ¬ç¼–è¾‘åŠŸèƒ½ã€‚è¿™é‡Œé¢çš„å®žçŽ°æ¯”è¾ƒå¤æ‚ï¼Œæ‰€ä»¥æœ‰äº†"[ä¸ºä»€ä¹ˆéƒ½è¯´å¯Œæ–‡æœ¬ç¼–è¾‘å™¨æ˜¯å¤©å‘ï¼Ÿ](https://www.zhihu.com/question/38699645)"è¿™ä¸ªè¯´æ³•ã€‚

  è€Œmarkdownç¼–è¾‘å™¨ï¼Œæ ¸å¿ƒçš„å¤„ç†å†…å®¹ä¸ºç®€å•è¯­æ³•çš„çº¯æ–‡æœ¬ï¼Œå¤æ‚åº¦ç›¸å¯¹æ¥è¯´æ¯”è¾ƒä½Žï¼Œå¹¶ä¸”inputæ ‡ç­¾è‡ªå¸¦onSelectäº‹ä»¶ï¼Œå¯ä»¥å¾ˆæ–¹ä¾¿çš„èŽ·å–é€‰æ‹©ä¿¡æ¯ï¼ˆé€‰æ‹©èµ·å§‹ä½ç½®å’Œé€‰æ‹©æ–‡æœ¬å€¼ï¼‰ï¼Œå› æ­¤è¦æƒ³å®žçŽ°ç¼–è¾‘åŠŸèƒ½ï¼Œåªéœ€å°†è¦æ”¹åŠ¨çš„å†…å®¹è¿›è¡Œæ–‡æœ¬è½¬æ¢ï¼Œç„¶åŽè¿›è¡Œé‡æ–°æ‹¼æŽ¥é¦–å°¾ï¼Œå¤§åŠŸå‘Šæˆã€‚
  
- markdownè§£æž

  è€ƒå¯Ÿäº†å‡ ä¸ªç¤¾åŒºæµè¡Œçš„markdownè§£æžå™¨ï¼Œæ¯”è¾ƒæµè¡Œçš„æœ‰[markdown](https://www.npmjs.com/package/markdown), [markdown-it](https://www.npmjs.com/package/markdown-it), [marked](https://www.npmjs.com/package/marked) ç­‰ç­‰ã€‚ç»¼åˆè€ƒè™‘æ‰©å±•æ€§ä»¥åŠç¨³å®šæ€§ï¼Œç¬”è€…æŽ¨èä½¿ç”¨markdown-itä½œä¸ºmarkdownçš„è¯æ³•è§£æžå™¨ï¼Œå› ä¸ºè¯¥è§£æžå™¨æœ‰æ¯”è¾ƒå¤šçš„æ’ä»¶ï¼Œå¹¶ä¸”æ”¯æŒè¯­æ³•é«˜äº®ã€‚

- åŒæ­¥æ»šåŠ¨

  å½“é€‰æ‹©åˆ†æ ç¼–è¾‘çš„æ—¶å€™ï¼Œæ»šåŠ¨å·¦ä¾§çš„ç¼–è¾‘åŒºï¼Œå³ä¾§çš„é¢„è§ˆåŒºèƒ½è‡ªåŠ¨æ»šåŠ¨åˆ°å¯¹åº”çš„åŒºåŸŸã€‚æ–¹æ¡ˆå‚è€ƒäº†ã€Š[æ‰‹æŠŠæ‰‹æ•™ä½ ç”¨ 100è¡Œä»£ç å®žçŽ°åŸºäºŽ reactçš„ markdown è¾“å…¥ + å³æ—¶é¢„è§ˆåœ¨çº¿ç¼–è¾‘å™¨ï¼ˆä¸€ï¼‰](https://github.com/accforgit/blog-data/blob/master/%E5%9C%A8%E7%BA%BF%E7%BC%96%E8%BE%91%E5%99%A8/README/README1.md)ã€‹ã€‚åªéœ€å…ˆè®¡ç®—å‡ºè¾“å…¥æ¡†å®¹å™¨å…ƒç´ ä¸Žé¢„è§ˆæ¡†å®¹å™¨å…ƒç´ ä¹‹é—´æœ€å¤§scrollèŒƒå›´çš„æ¯”ä¾‹å€¼ï¼Œç„¶åŽæ ¹æ®ä¸»åŠ¨æ»šåŠ¨å…ƒç´ è‡ªèº«çš„scrollTopåšç›¸åº”çš„æ¯”ä¾‹æ¢ç®—ï¼Œå³å¯çŸ¥é“å¯¹æ–¹åŒºåŸŸçš„scrollTopå€¼ã€‚

- å…³äºŽUI
 
  - é¡¹ç›®çš„å­—ä½“åº“é€‰æ‹©äº†Font Awesomeé£Žæ ¼ï¼Œå¹¶ä¸”åªé€‰å–äº†é¡¹ç›®æ‰€éœ€è¦çš„ä¸€äº›å›¾æ ‡ã€‚
  - ç¼–è¾‘å™¨çš„æ•´ä½“csså‡å¯é€šè¿‡å…¨å±€è¦†ç›–çš„å½¢å¼è¿›è¡Œè‡ªå®šä¹‰ã€‚ç›®å‰æš‚æ—¶åªæ”¯æŒç°è‰²ä¸»é¢˜ã€‚
  - ç¼–è¾‘å™¨çš„æ˜¾ç¤ºåŒºåŸŸåŒ…æ‹¬èœå•æ ï¼Œç¼–è¾‘å™¨ï¼Œé¢„è§ˆåŒºï¼Œå·¥å…·æ ï¼Œé€šè¿‡é…ç½®ç»„ä»¶çš„configå±žæ€§ï¼Œå¯ä»¥é€‰æ‹©é»˜è®¤çš„å±•ç¤ºåŒºåŸŸã€‚
  
### Install

```js
npm install react-markdown-editor-lite --save
```

### Props

| Property | Description | Type | default | Remarks |
| --- | --- | --- | --- | --- |
| value | markdown content | String | '' | required |
| style | component container style | Object | {height: '100%'} | not required |
| config | component config | Object | {view: {...}, logger: {...}} | not required |
| onChange | emitting when editor has changed | Function | ({html, md}) => {} | not required |
| onImageUpload | when image uploaded, callback emitting will get image markdown text | (file: File, callback: (url: string) => void) => void; | ({file, callback}) => {} | not required |
| renderHTML | Render markdown text to HTML. You can return either string, function or Promise | (text: string) => string|function|Promise | none | **required** |

### Example

``` js
'use strict';
import React from 'react'
import ReactDOM from 'react-dom'
import MdEditor from 'react-markdown-editor-lite'
import MarkdownIt from 'markdown-it'
import emoji from 'markdown-it-emoji'
import subscript from 'markdown-it-sub'
import superscript from 'markdown-it-sup'
import footnote from 'markdown-it-footnote'
import deflist from 'markdown-it-deflist'
import abbreviation from 'markdown-it-abbr'
import insert from 'markdown-it-ins'
import mark from 'markdown-it-mark'
import tasklists from 'markdown-it-task-lists'
import hljs from 'highlight.js'
import 'highlight.js/styles/atom-one-light.css'
// import 'highlight.js/styles/github.css'
import './index.less';

const MOCK_DATA = "I Love React."
export default class Demo extends React.Component {
  mdEditor = null
  mdParser = null
  constructor(props) {
    super(props)
    // initial a parsera
    this.mdParser = new MarkdownIt({
      html: true,
      linkify: true,
      typographer: true,
      highlight: function (str, lang) {
        if (lang && hljs.getLanguage(lang)) {
          try {
            return hljs.highlight(lang, str).value
          } catch (__) {}
        }    
        return '' // use external default escaping
      }
    })
    .use(emoji)
    .use(subscript)
    .use(superscript)
    .use(footnote)
    .use(deflist)
    .use(abbreviation)
    .use(insert)
    .use(mark)
    .use(tasklists, { enabled: this.taskLists })
    this.renderHTML = this.renderHTML.bind(this)
  }
  handleEditorChange({html, md}) {
    console.log('handleEditorChange', html, md)
  }
  handleImageUpload(file, callback) {
    const reader = new FileReader()
    reader.onload = () => {      
      const convertBase64UrlToBlob = (urlData) => {  
        let arr = urlData.split(','), mime = arr[0].match(/:(.*?);/)[1]
        let bstr = atob(arr[1])
        let n = bstr.length
        let u8arr = new Uint8Array(n)
        while (n--) {
          u8arr[n] = bstr.charCodeAt(n)
        }
        return new Blob([u8arr], {type:mime})
      }
      const blob = convertBase64UrlToBlob(reader.result)
      setTimeout(() => {
        // setTimeout æ¨¡æ‹Ÿå¼‚æ­¥ä¸Šä¼ å›¾ç‰‡
        // å½“å¼‚æ­¥ä¸Šä¼ èŽ·å–å›¾ç‰‡åœ°å€åŽï¼Œæ‰§è¡Œcalbackå›žè°ƒï¼ˆå‚æ•°ä¸ºimageUrlå­—ç¬¦ä¸²ï¼‰ï¼Œå³å¯å°†å›¾ç‰‡åœ°å€å†™å…¥markdown
        callback('https://avatars0.githubusercontent.com/u/21263805?s=40&v=4')
      }, 1000)
    }
    reader.readAsDataURL(file)
  }
  renderHTML(text) {
    // æ¨¡æ‹Ÿå¼‚æ­¥æ¸²æŸ“Markdown
    return new Promise((resolve) => {
      setTimeout(() => {
        resolve(this.mdParser.render(text))
      }, 1000)
    })
  }
  handleGetMdValue = () => {   
    this.mdEditor && alert(this.mdEditor.getMdValue())      
  }
  handleGetHtmlValue = () => {    
    this.mdEditor && alert(this.mdEditor.getHtmlValue())
  }
  render() {
    return (      
      <div>
        <nav>
          <button onClick={this.handleGetMdValue} >getMdValue</button>  
          <button onClick={this.handleGetHtmlValue} >getHtmlValue</button>  
        </nav>
        <section style="height: 500px">
          <MdEditor 
            ref={node => this.mdEditor = node}
            value={MOCK_DATA}
            style={{height: '400px'}}
            renderHTML={this.renderHTML}
            config={{
              view: {
                menu: true,
                md: true,
                html: true
              },
              imageUrl: 'https://octodex.github.com/images/minion.png'
            }}
            onChange={this.handleEditorChange} 
            onImageUpload={this.handleImageUpload}
          />
        </section>                        
      </div>      
    )
  }
}
```

### æœ€åŽ

   æ¬¢è¿Žå¤§å®¶ä½¿ç”¨å’Œåé¦ˆï¼Œ[é¡¹ç›®åœ°å€](https://github.com/HarryChen0506/react-markdown-editor-lite) (https://github.com/HarryChen0506/react-markdown-editor-lite)ï¼Œ ä½ çš„ç‚¹èµžå°†æ˜¯æˆ‘èŽ«å¤§çš„åŠ¨åŠ›ðŸ˜Š

', firstPicture='', viewCount=0, createDate='Sun Nov 07 14:09:29 EST 2021', updateDate='Mon Nov 08 09:15:09 EST 2021'}}, total=null}
2021-11-14 22:15:59:884 [http-nio-8081-exec-7] INFO  com.ivan.sunnyblog.web.res.S3ResourceManager uploading file to s3
2021-11-14 22:16:00:096 [http-nio-8081-exec-7] INFO  com.ivan.sunnyblog.web.res.S3ResourceManager uploading done. returned url: https://s3.ca-central-1.amazonaws.com/res-blog-public/res-dev/blog_1636946159884_1.png
2021-11-14 22:16:00:097 [http-nio-8081-exec-7] INFO  com.ivan.sunnyblog.web.aop.ControllerAspect *** Request Success ***: 213ms POST URI=/api/upload, methodName=com.ivan.sunnyblog.web.controller.ResourceController.upload, args=[org.springframework.web.multipart.support.StandardMultipartHttpServletRequest$StandardMultipartFile@431e6e3b], result=ResultInfo{info='null', status=0, data=https://s3.ca-central-1.amazonaws.com/res-blog-public/res-dev/blog_1636946159884_1.png, total=null}
2021-11-14 22:16:48:768 [http-nio-8081-exec-10] INFO  com.ivan.sunnyblog.web.aop.ControllerAspect *** Request Success ***: 1ms GET URI=/api/admin/category, methodName=com.ivan.sunnyblog.web.controller.CategoryContoller.getCategoryList, args=[SearchVo{page=1, limit=10, categoryId=null, total=null}], result=ResultInfo{info='null', status=0, data=[Category (1, Life ), Category (2, liddffd)], total=null}
2021-11-14 22:16:48:771 [http-nio-8081-exec-9] INFO  com.ivan.sunnyblog.web.aop.ControllerAspect *** Request Success ***: 4ms GET URI=/api/admin/article/10005, methodName=com.ivan.sunnyblog.web.controller.ArticleController.getArticleDetail, args=[10005], result=ResultInfo{info='null', status=0, data=ArticleDetailVo{categoryId=1, BaseArticleVo{articleId=10005, status=1, title='dd', description='This is the doc of React markdown editor lite.
Enjoy!!', content='| Head | Head | Head | Head |
| --- | --- | --- | --- |
| Data | Data | Data | Data |
| Data | Data | Data | Data |

## æ‰‹æŠŠæ‰‹æ•™ä½ å†™ä¸€ä¸ªmarkdownç¼–è¾‘å™¨

> ç¬”è€…åœ¨18å¹´å¹´æœ«çš„æ—¶å€™æŽ¥åˆ°ä¸€ä¸ªå¼€å‘ä»»åŠ¡â€”â€”æ­å»ºä¸€ä¸ªAIé¡¹ç›®çš„å¼€æ”¾å¹³å°ï¼Œå…¶ä¸­çš„äº§å“æ–‡æ¡£ä¸ºè½¬åŒ–ä¸ºHTMLæ ¼å¼çš„markdownæ–‡æ¡£ã€‚è€ƒè™‘åˆ°æ–‡æ¡£çš„å³æ—¶æ›´æ–°ï¼Œå°†æ–‡æ¡£ä¿¡æ¯åšæˆäº†AjaxæŽ¥å£çš„å½¢å¼ã€‚å› æ­¤ç®¡ç†åŽå°åªéœ€å°†textareaè¡¨å•çš„å†…å®¹é€šè¿‡markdownè§£æžå™¨è¿›è¡ŒHTMLæ ¼å¼è½¬åŒ–ï¼Œç„¶åŽå°†markdownå†…å®¹å’Œç»è½¬åŒ–çš„HTMLæ–‡æ¡£éƒ½ä¿å­˜åˆ°æ•°æ®åº“å³å¯ã€‚
> åŸºæœ¬éœ€æ±‚å®ŒæˆåŽï¼Œä¸ºäº†æ›´å¥½çš„ç”¨æˆ·ä½“éªŒï¼Œè€ƒè™‘å°†å¸¸ç”¨çš„ç¼–è¾‘åŠŸèƒ½æ·»åŠ è¿›æ¥ã€‚æ”¹è¿›ç‰ˆä¸ä»…æ”¯æŒäº†å¸¸ç”¨çš„æ–‡æœ¬ç¼–è¾‘åŠŸèƒ½ï¼Œè¿˜å®žçŽ°çš„UIç•Œé¢çš„é…ç½®åŒ–ï¼Œè‡ªå®šä¹‰è¯­æ³•è§£æžå™¨ã€‚æœ¬ç€é€ ç¦ä¼¸æ‰‹å…šçš„ç›®çš„ï¼Œä»¥åŠç§¯ç´¯äº›å¼€æºç»éªŒï¼Œç¬”è€…å°†è¯¥react ç»„ä»¶ [react-markdown-editor-lite](https://github.com/HarryChen0506/react-markdown-editor-lite) è¿›è¡Œäº†å°è£…æ”¹é€ ï¼Œå¹¶ä¸”å‘å¸ƒåˆ°äº†å¼€æºç¤¾åŒºã€‚

### é¢„è§ˆ
åœ¨çº¿ä½“éªŒ [https://harrychen0506.github.io/react-markdown-editor-lite/](https://harrychen0506.github.io/react-markdown-editor-lite/)

![image](https://github.com//HarryChen0506/react-markdown-editor-lite/blob/master/image/react-markdown-editor-lite-v1.0.0.PNG?raw=true)

### ç‰¹ç‚¹
* è½»é‡ã€åŸºäºŽReact
* UIå¯é…ç½®, å¦‚åªæ˜¾ç¤ºç¼–è¾‘åŒºæˆ–é¢„è§ˆåŒº
* æ”¯æŒè‡ªå®šä¹‰markdownè¯­æ³•è§£æžå™¨,è¯­æ³•é«˜äº®ç­‰
* æ”¯æŒå¸¸ç”¨çš„markdownç¼–è¾‘åŠŸèƒ½ï¼Œå¦‚åŠ ç²—ï¼Œæ–œä½“ç­‰ç­‰...
* æ”¯æŒåŠŸèƒ½æŒ‰é’®æ’æ‹”åŒ–ï¼Œç”¨æˆ·å¯ä»¥è‡ªå®šä¹‰æ‰©å±•ç»„ä»¶
* æ”¯æŒç¼–è¾‘åŒºå’Œé¢„è§ˆåŒºåŒæ­¥æ»šåŠ¨

### å¼€å‘å¿ƒå¾—

- æ–‡æœ¬ç¼–è¾‘

  å¤§å¤šæ•°å¸¸è§çš„ç¼–è¾‘å™¨ï¼ŒåŒ…æ‹¬å¯Œæ–‡æœ¬ç¼–è¾‘å™¨ï¼Œåˆ©ç”¨äº†æŸäº›å…ƒç´ å¦‚divçš„contenteditableå±žæ€§ï¼Œé…åˆselectionã€rangeã€execCommandç­‰APIï¼Œå®žçŽ°äº†å¯Œæ–‡æœ¬ç¼–è¾‘åŠŸèƒ½ã€‚è¿™é‡Œé¢çš„å®žçŽ°æ¯”è¾ƒå¤æ‚ï¼Œæ‰€ä»¥æœ‰äº†"[ä¸ºä»€ä¹ˆéƒ½è¯´å¯Œæ–‡æœ¬ç¼–è¾‘å™¨æ˜¯å¤©å‘ï¼Ÿ](https://www.zhihu.com/question/38699645)"è¿™ä¸ªè¯´æ³•ã€‚

  è€Œmarkdownç¼–è¾‘å™¨ï¼Œæ ¸å¿ƒçš„å¤„ç†å†…å®¹ä¸ºç®€å•è¯­æ³•çš„çº¯æ–‡æœ¬ï¼Œå¤æ‚åº¦ç›¸å¯¹æ¥è¯´æ¯”è¾ƒä½Žï¼Œå¹¶ä¸”inputæ ‡ç­¾è‡ªå¸¦onSelectäº‹ä»¶ï¼Œå¯ä»¥å¾ˆæ–¹ä¾¿çš„èŽ·å–é€‰æ‹©ä¿¡æ¯ï¼ˆé€‰æ‹©èµ·å§‹ä½ç½®å’Œé€‰æ‹©æ–‡æœ¬å€¼ï¼‰ï¼Œå› æ­¤è¦æƒ³å®žçŽ°ç¼–è¾‘åŠŸèƒ½ï¼Œåªéœ€å°†è¦æ”¹åŠ¨çš„å†…å®¹è¿›è¡Œæ–‡æœ¬è½¬æ¢ï¼Œç„¶åŽè¿›è¡Œé‡æ–°æ‹¼æŽ¥é¦–å°¾ï¼Œå¤§åŠŸå‘Šæˆã€‚
  
- markdownè§£æž

  è€ƒå¯Ÿäº†å‡ ä¸ªç¤¾åŒºæµè¡Œçš„markdownè§£æžå™¨ï¼Œæ¯”è¾ƒæµè¡Œçš„æœ‰[markdown](https://www.npmjs.com/package/markdown), [markdown-it](https://www.npmjs.com/package/markdown-it), [marked](https://www.npmjs.com/package/marked) ç­‰ç­‰ã€‚ç»¼åˆè€ƒè™‘æ‰©å±•æ€§ä»¥åŠç¨³å®šæ€§ï¼Œç¬”è€…æŽ¨èä½¿ç”¨markdown-itä½œä¸ºmarkdownçš„è¯æ³•è§£æžå™¨ï¼Œå› ä¸ºè¯¥è§£æžå™¨æœ‰æ¯”è¾ƒå¤šçš„æ’ä»¶ï¼Œå¹¶ä¸”æ”¯æŒè¯­æ³•é«˜äº®ã€‚

- åŒæ­¥æ»šåŠ¨

  å½“é€‰æ‹©åˆ†æ ç¼–è¾‘çš„æ—¶å€™ï¼Œæ»šåŠ¨å·¦ä¾§çš„ç¼–è¾‘åŒºï¼Œå³ä¾§çš„é¢„è§ˆåŒºèƒ½è‡ªåŠ¨æ»šåŠ¨åˆ°å¯¹åº”çš„åŒºåŸŸã€‚æ–¹æ¡ˆå‚è€ƒäº†ã€Š[æ‰‹æŠŠæ‰‹æ•™ä½ ç”¨ 100è¡Œä»£ç å®žçŽ°åŸºäºŽ reactçš„ markdown è¾“å…¥ + å³æ—¶é¢„è§ˆåœ¨çº¿ç¼–è¾‘å™¨ï¼ˆä¸€ï¼‰](https://github.com/accforgit/blog-data/blob/master/%E5%9C%A8%E7%BA%BF%E7%BC%96%E8%BE%91%E5%99%A8/README/README1.md)ã€‹ã€‚åªéœ€å…ˆè®¡ç®—å‡ºè¾“å…¥æ¡†å®¹å™¨å…ƒç´ ä¸Žé¢„è§ˆæ¡†å®¹å™¨å…ƒç´ ä¹‹é—´æœ€å¤§scrollèŒƒå›´çš„æ¯”ä¾‹å€¼ï¼Œç„¶åŽæ ¹æ®ä¸»åŠ¨æ»šåŠ¨å…ƒç´ è‡ªèº«çš„scrollTopåšç›¸åº”çš„æ¯”ä¾‹æ¢ç®—ï¼Œå³å¯çŸ¥é“å¯¹æ–¹åŒºåŸŸçš„scrollTopå€¼ã€‚

- å…³äºŽUI
 
  - é¡¹ç›®çš„å­—ä½“åº“é€‰æ‹©äº†Font Awesomeé£Žæ ¼ï¼Œå¹¶ä¸”åªé€‰å–äº†é¡¹ç›®æ‰€éœ€è¦çš„ä¸€äº›å›¾æ ‡ã€‚
  - ç¼–è¾‘å™¨çš„æ•´ä½“csså‡å¯é€šè¿‡å…¨å±€è¦†ç›–çš„å½¢å¼è¿›è¡Œè‡ªå®šä¹‰ã€‚ç›®å‰æš‚æ—¶åªæ”¯æŒç°è‰²ä¸»é¢˜ã€‚
  - ç¼–è¾‘å™¨çš„æ˜¾ç¤ºåŒºåŸŸåŒ…æ‹¬èœå•æ ï¼Œç¼–è¾‘å™¨ï¼Œé¢„è§ˆåŒºï¼Œå·¥å…·æ ï¼Œé€šè¿‡é…ç½®ç»„ä»¶çš„configå±žæ€§ï¼Œå¯ä»¥é€‰æ‹©é»˜è®¤çš„å±•ç¤ºåŒºåŸŸã€‚
  
### Install

```js
npm install react-markdown-editor-lite --save
```

### Props

| Property | Description | Type | default | Remarks |
| --- | --- | --- | --- | --- |
| value | markdown content | String | '' | required |
| style | component container style | Object | {height: '100%'} | not required |
| config | component config | Object | {view: {...}, logger: {...}} | not required |
| onChange | emitting when editor has changed | Function | ({html, md}) => {} | not required |
| onImageUpload | when image uploaded, callback emitting will get image markdown text | (file: File, callback: (url: string) => void) => void; | ({file, callback}) => {} | not required |
| renderHTML | Render markdown text to HTML. You can return either string, function or Promise | (text: string) => string|function|Promise | none | **required** |

### Example

``` js
'use strict';
import React from 'react'
import ReactDOM from 'react-dom'
import MdEditor from 'react-markdown-editor-lite'
import MarkdownIt from 'markdown-it'
import emoji from 'markdown-it-emoji'
import subscript from 'markdown-it-sub'
import superscript from 'markdown-it-sup'
import footnote from 'markdown-it-footnote'
import deflist from 'markdown-it-deflist'
import abbreviation from 'markdown-it-abbr'
import insert from 'markdown-it-ins'
import mark from 'markdown-it-mark'
import tasklists from 'markdown-it-task-lists'
import hljs from 'highlight.js'
import 'highlight.js/styles/atom-one-light.css'
// import 'highlight.js/styles/github.css'
import './index.less';

const MOCK_DATA = "I Love React."
export default class Demo extends React.Component {
  mdEditor = null
  mdParser = null
  constructor(props) {
    super(props)
    // initial a parsera
    this.mdParser = new MarkdownIt({
      html: true,
      linkify: true,
      typographer: true,
      highlight: function (str, lang) {
        if (lang && hljs.getLanguage(lang)) {
          try {
            return hljs.highlight(lang, str).value
          } catch (__) {}
        }    
        return '' // use external default escaping
      }
    })
    .use(emoji)
    .use(subscript)
    .use(superscript)
    .use(footnote)
    .use(deflist)
    .use(abbreviation)
    .use(insert)
    .use(mark)
    .use(tasklists, { enabled: this.taskLists })
    this.renderHTML = this.renderHTML.bind(this)
  }
  handleEditorChange({html, md}) {
    console.log('handleEditorChange', html, md)
  }
  handleImageUpload(file, callback) {
    const reader = new FileReader()
    reader.onload = () => {      
      const convertBase64UrlToBlob = (urlData) => {  
        let arr = urlData.split(','), mime = arr[0].match(/:(.*?);/)[1]
        let bstr = atob(arr[1])
        let n = bstr.length
        let u8arr = new Uint8Array(n)
        while (n--) {
          u8arr[n] = bstr.charCodeAt(n)
        }
        return new Blob([u8arr], {type:mime})
      }
      const blob = convertBase64UrlToBlob(reader.result)
      setTimeout(() => {
        // setTimeout æ¨¡æ‹Ÿå¼‚æ­¥ä¸Šä¼ å›¾ç‰‡
        // å½“å¼‚æ­¥ä¸Šä¼ èŽ·å–å›¾ç‰‡åœ°å€åŽï¼Œæ‰§è¡Œcalbackå›žè°ƒï¼ˆå‚æ•°ä¸ºimageUrlå­—ç¬¦ä¸²ï¼‰ï¼Œå³å¯å°†å›¾ç‰‡åœ°å€å†™å…¥markdown
        callback('https://avatars0.githubusercontent.com/u/21263805?s=40&v=4')
      }, 1000)
    }
    reader.readAsDataURL(file)
  }
  renderHTML(text) {
    // æ¨¡æ‹Ÿå¼‚æ­¥æ¸²æŸ“Markdown
    return new Promise((resolve) => {
      setTimeout(() => {
        resolve(this.mdParser.render(text))
      }, 1000)
    })
  }
  handleGetMdValue = () => {   
    this.mdEditor && alert(this.mdEditor.getMdValue())      
  }
  handleGetHtmlValue = () => {    
    this.mdEditor && alert(this.mdEditor.getHtmlValue())
  }
  render() {
    return (      
      <div>
        <nav>
          <button onClick={this.handleGetMdValue} >getMdValue</button>  
          <button onClick={this.handleGetHtmlValue} >getHtmlValue</button>  
        </nav>
        <section style="height: 500px">
          <MdEditor 
            ref={node => this.mdEditor = node}
            value={MOCK_DATA}
            style={{height: '400px'}}
            renderHTML={this.renderHTML}
            config={{
              view: {
                menu: true,
                md: true,
                html: true
              },
              imageUrl: 'https://octodex.github.com/images/minion.png'
            }}
            onChange={this.handleEditorChange} 
            onImageUpload={this.handleImageUpload}
          />
        </section>                        
      </div>      
    )
  }
}
```

### æœ€åŽ

   æ¬¢è¿Žå¤§å®¶ä½¿ç”¨å’Œåé¦ˆï¼Œ[é¡¹ç›®åœ°å€](https://github.com/HarryChen0506/react-markdown-editor-lite) (https://github.com/HarryChen0506/react-markdown-editor-lite)ï¼Œ ä½ çš„ç‚¹èµžå°†æ˜¯æˆ‘èŽ«å¤§çš„åŠ¨åŠ›ðŸ˜Š

', firstPicture='', viewCount=0, createDate='Sun Nov 07 14:09:29 EST 2021', updateDate='Mon Nov 08 09:15:09 EST 2021'}}, total=null}
2021-11-14 22:16:55:240 [http-nio-8081-exec-4] INFO  com.ivan.sunnyblog.web.res.S3ResourceManager uploading file to s3
2021-11-14 22:16:55:462 [http-nio-8081-exec-4] INFO  com.ivan.sunnyblog.web.res.S3ResourceManager uploading done. returned url: https://s3.ca-central-1.amazonaws.com/res-blog-public/res-dev/blog_1636946215240_1.png
2021-11-14 22:16:55:463 [http-nio-8081-exec-4] INFO  com.ivan.sunnyblog.web.aop.ControllerAspect *** Request Success ***: 223ms POST URI=/api/upload, methodName=com.ivan.sunnyblog.web.controller.ResourceController.upload, args=[org.springframework.web.multipart.support.StandardMultipartHttpServletRequest$StandardMultipartFile@7fe5aed], result=ResultInfo{info='null', status=0, data=https://s3.ca-central-1.amazonaws.com/res-blog-public/res-dev/blog_1636946215240_1.png, total=null}
2021-11-14 22:17:33:865 [http-nio-8081-exec-3] INFO  com.ivan.sunnyblog.web.aop.ControllerAspect *** Request Success ***: 3ms GET URI=/api/admin/category, methodName=com.ivan.sunnyblog.web.controller.CategoryContoller.getCategoryList, args=[SearchVo{page=1, limit=10, categoryId=null, total=null}], result=ResultInfo{info='null', status=0, data=[Category (1, Life ), Category (2, liddffd)], total=null}
2021-11-14 22:17:33:866 [http-nio-8081-exec-1] INFO  com.ivan.sunnyblog.web.aop.ControllerAspect *** Request Success ***: 6ms GET URI=/api/admin/article/10005, methodName=com.ivan.sunnyblog.web.controller.ArticleController.getArticleDetail, args=[10005], result=ResultInfo{info='null', status=0, data=ArticleDetailVo{categoryId=1, BaseArticleVo{articleId=10005, status=1, title='dd', description='This is the doc of React markdown editor lite.
Enjoy!!', content='| Head | Head | Head | Head |
| --- | --- | --- | --- |
| Data | Data | Data | Data |
| Data | Data | Data | Data |

## æ‰‹æŠŠæ‰‹æ•™ä½ å†™ä¸€ä¸ªmarkdownç¼–è¾‘å™¨

> ç¬”è€…åœ¨18å¹´å¹´æœ«çš„æ—¶å€™æŽ¥åˆ°ä¸€ä¸ªå¼€å‘ä»»åŠ¡â€”â€”æ­å»ºä¸€ä¸ªAIé¡¹ç›®çš„å¼€æ”¾å¹³å°ï¼Œå…¶ä¸­çš„äº§å“æ–‡æ¡£ä¸ºè½¬åŒ–ä¸ºHTMLæ ¼å¼çš„markdownæ–‡æ¡£ã€‚è€ƒè™‘åˆ°æ–‡æ¡£çš„å³æ—¶æ›´æ–°ï¼Œå°†æ–‡æ¡£ä¿¡æ¯åšæˆäº†AjaxæŽ¥å£çš„å½¢å¼ã€‚å› æ­¤ç®¡ç†åŽå°åªéœ€å°†textareaè¡¨å•çš„å†…å®¹é€šè¿‡markdownè§£æžå™¨è¿›è¡ŒHTMLæ ¼å¼è½¬åŒ–ï¼Œç„¶åŽå°†markdownå†…å®¹å’Œç»è½¬åŒ–çš„HTMLæ–‡æ¡£éƒ½ä¿å­˜åˆ°æ•°æ®åº“å³å¯ã€‚
> åŸºæœ¬éœ€æ±‚å®ŒæˆåŽï¼Œä¸ºäº†æ›´å¥½çš„ç”¨æˆ·ä½“éªŒï¼Œè€ƒè™‘å°†å¸¸ç”¨çš„ç¼–è¾‘åŠŸèƒ½æ·»åŠ è¿›æ¥ã€‚æ”¹è¿›ç‰ˆä¸ä»…æ”¯æŒäº†å¸¸ç”¨çš„æ–‡æœ¬ç¼–è¾‘åŠŸèƒ½ï¼Œè¿˜å®žçŽ°çš„UIç•Œé¢çš„é…ç½®åŒ–ï¼Œè‡ªå®šä¹‰è¯­æ³•è§£æžå™¨ã€‚æœ¬ç€é€ ç¦ä¼¸æ‰‹å…šçš„ç›®çš„ï¼Œä»¥åŠç§¯ç´¯äº›å¼€æºç»éªŒï¼Œç¬”è€…å°†è¯¥react ç»„ä»¶ [react-markdown-editor-lite](https://github.com/HarryChen0506/react-markdown-editor-lite) è¿›è¡Œäº†å°è£…æ”¹é€ ï¼Œå¹¶ä¸”å‘å¸ƒåˆ°äº†å¼€æºç¤¾åŒºã€‚

### é¢„è§ˆ
åœ¨çº¿ä½“éªŒ [https://harrychen0506.github.io/react-markdown-editor-lite/](https://harrychen0506.github.io/react-markdown-editor-lite/)

![image](https://github.com//HarryChen0506/react-markdown-editor-lite/blob/master/image/react-markdown-editor-lite-v1.0.0.PNG?raw=true)

### ç‰¹ç‚¹
* è½»é‡ã€åŸºäºŽReact
* UIå¯é…ç½®, å¦‚åªæ˜¾ç¤ºç¼–è¾‘åŒºæˆ–é¢„è§ˆåŒº
* æ”¯æŒè‡ªå®šä¹‰markdownè¯­æ³•è§£æžå™¨,è¯­æ³•é«˜äº®ç­‰
* æ”¯æŒå¸¸ç”¨çš„markdownç¼–è¾‘åŠŸèƒ½ï¼Œå¦‚åŠ ç²—ï¼Œæ–œä½“ç­‰ç­‰...
* æ”¯æŒåŠŸèƒ½æŒ‰é’®æ’æ‹”åŒ–ï¼Œç”¨æˆ·å¯ä»¥è‡ªå®šä¹‰æ‰©å±•ç»„ä»¶
* æ”¯æŒç¼–è¾‘åŒºå’Œé¢„è§ˆåŒºåŒæ­¥æ»šåŠ¨

### å¼€å‘å¿ƒå¾—

- æ–‡æœ¬ç¼–è¾‘

  å¤§å¤šæ•°å¸¸è§çš„ç¼–è¾‘å™¨ï¼ŒåŒ…æ‹¬å¯Œæ–‡æœ¬ç¼–è¾‘å™¨ï¼Œåˆ©ç”¨äº†æŸäº›å…ƒç´ å¦‚divçš„contenteditableå±žæ€§ï¼Œé…åˆselectionã€rangeã€execCommandç­‰APIï¼Œå®žçŽ°äº†å¯Œæ–‡æœ¬ç¼–è¾‘åŠŸèƒ½ã€‚è¿™é‡Œé¢çš„å®žçŽ°æ¯”è¾ƒå¤æ‚ï¼Œæ‰€ä»¥æœ‰äº†"[ä¸ºä»€ä¹ˆéƒ½è¯´å¯Œæ–‡æœ¬ç¼–è¾‘å™¨æ˜¯å¤©å‘ï¼Ÿ](https://www.zhihu.com/question/38699645)"è¿™ä¸ªè¯´æ³•ã€‚

  è€Œmarkdownç¼–è¾‘å™¨ï¼Œæ ¸å¿ƒçš„å¤„ç†å†…å®¹ä¸ºç®€å•è¯­æ³•çš„çº¯æ–‡æœ¬ï¼Œå¤æ‚åº¦ç›¸å¯¹æ¥è¯´æ¯”è¾ƒä½Žï¼Œå¹¶ä¸”inputæ ‡ç­¾è‡ªå¸¦onSelectäº‹ä»¶ï¼Œå¯ä»¥å¾ˆæ–¹ä¾¿çš„èŽ·å–é€‰æ‹©ä¿¡æ¯ï¼ˆé€‰æ‹©èµ·å§‹ä½ç½®å’Œé€‰æ‹©æ–‡æœ¬å€¼ï¼‰ï¼Œå› æ­¤è¦æƒ³å®žçŽ°ç¼–è¾‘åŠŸèƒ½ï¼Œåªéœ€å°†è¦æ”¹åŠ¨çš„å†…å®¹è¿›è¡Œæ–‡æœ¬è½¬æ¢ï¼Œç„¶åŽè¿›è¡Œé‡æ–°æ‹¼æŽ¥é¦–å°¾ï¼Œå¤§åŠŸå‘Šæˆã€‚
  
- markdownè§£æž

  è€ƒå¯Ÿäº†å‡ ä¸ªç¤¾åŒºæµè¡Œçš„markdownè§£æžå™¨ï¼Œæ¯”è¾ƒæµè¡Œçš„æœ‰[markdown](https://www.npmjs.com/package/markdown), [markdown-it](https://www.npmjs.com/package/markdown-it), [marked](https://www.npmjs.com/package/marked) ç­‰ç­‰ã€‚ç»¼åˆè€ƒè™‘æ‰©å±•æ€§ä»¥åŠç¨³å®šæ€§ï¼Œç¬”è€…æŽ¨èä½¿ç”¨markdown-itä½œä¸ºmarkdownçš„è¯æ³•è§£æžå™¨ï¼Œå› ä¸ºè¯¥è§£æžå™¨æœ‰æ¯”è¾ƒå¤šçš„æ’ä»¶ï¼Œå¹¶ä¸”æ”¯æŒè¯­æ³•é«˜äº®ã€‚

- åŒæ­¥æ»šåŠ¨

  å½“é€‰æ‹©åˆ†æ ç¼–è¾‘çš„æ—¶å€™ï¼Œæ»šåŠ¨å·¦ä¾§çš„ç¼–è¾‘åŒºï¼Œå³ä¾§çš„é¢„è§ˆåŒºèƒ½è‡ªåŠ¨æ»šåŠ¨åˆ°å¯¹åº”çš„åŒºåŸŸã€‚æ–¹æ¡ˆå‚è€ƒäº†ã€Š[æ‰‹æŠŠæ‰‹æ•™ä½ ç”¨ 100è¡Œä»£ç å®žçŽ°åŸºäºŽ reactçš„ markdown è¾“å…¥ + å³æ—¶é¢„è§ˆåœ¨çº¿ç¼–è¾‘å™¨ï¼ˆä¸€ï¼‰](https://github.com/accforgit/blog-data/blob/master/%E5%9C%A8%E7%BA%BF%E7%BC%96%E8%BE%91%E5%99%A8/README/README1.md)ã€‹ã€‚åªéœ€å…ˆè®¡ç®—å‡ºè¾“å…¥æ¡†å®¹å™¨å…ƒç´ ä¸Žé¢„è§ˆæ¡†å®¹å™¨å…ƒç´ ä¹‹é—´æœ€å¤§scrollèŒƒå›´çš„æ¯”ä¾‹å€¼ï¼Œç„¶åŽæ ¹æ®ä¸»åŠ¨æ»šåŠ¨å…ƒç´ è‡ªèº«çš„scrollTopåšç›¸åº”çš„æ¯”ä¾‹æ¢ç®—ï¼Œå³å¯çŸ¥é“å¯¹æ–¹åŒºåŸŸçš„scrollTopå€¼ã€‚

- å…³äºŽUI
 
  - é¡¹ç›®çš„å­—ä½“åº“é€‰æ‹©äº†Font Awesomeé£Žæ ¼ï¼Œå¹¶ä¸”åªé€‰å–äº†é¡¹ç›®æ‰€éœ€è¦çš„ä¸€äº›å›¾æ ‡ã€‚
  - ç¼–è¾‘å™¨çš„æ•´ä½“csså‡å¯é€šè¿‡å…¨å±€è¦†ç›–çš„å½¢å¼è¿›è¡Œè‡ªå®šä¹‰ã€‚ç›®å‰æš‚æ—¶åªæ”¯æŒç°è‰²ä¸»é¢˜ã€‚
  - ç¼–è¾‘å™¨çš„æ˜¾ç¤ºåŒºåŸŸåŒ…æ‹¬èœå•æ ï¼Œç¼–è¾‘å™¨ï¼Œé¢„è§ˆåŒºï¼Œå·¥å…·æ ï¼Œé€šè¿‡é…ç½®ç»„ä»¶çš„configå±žæ€§ï¼Œå¯ä»¥é€‰æ‹©é»˜è®¤çš„å±•ç¤ºåŒºåŸŸã€‚
  
### Install

```js
npm install react-markdown-editor-lite --save
```

### Props

| Property | Description | Type | default | Remarks |
| --- | --- | --- | --- | --- |
| value | markdown content | String | '' | required |
| style | component container style | Object | {height: '100%'} | not required |
| config | component config | Object | {view: {...}, logger: {...}} | not required |
| onChange | emitting when editor has changed | Function | ({html, md}) => {} | not required |
| onImageUpload | when image uploaded, callback emitting will get image markdown text | (file: File, callback: (url: string) => void) => void; | ({file, callback}) => {} | not required |
| renderHTML | Render markdown text to HTML. You can return either string, function or Promise | (text: string) => string|function|Promise | none | **required** |

### Example

``` js
'use strict';
import React from 'react'
import ReactDOM from 'react-dom'
import MdEditor from 'react-markdown-editor-lite'
import MarkdownIt from 'markdown-it'
import emoji from 'markdown-it-emoji'
import subscript from 'markdown-it-sub'
import superscript from 'markdown-it-sup'
import footnote from 'markdown-it-footnote'
import deflist from 'markdown-it-deflist'
import abbreviation from 'markdown-it-abbr'
import insert from 'markdown-it-ins'
import mark from 'markdown-it-mark'
import tasklists from 'markdown-it-task-lists'
import hljs from 'highlight.js'
import 'highlight.js/styles/atom-one-light.css'
// import 'highlight.js/styles/github.css'
import './index.less';

const MOCK_DATA = "I Love React."
export default class Demo extends React.Component {
  mdEditor = null
  mdParser = null
  constructor(props) {
    super(props)
    // initial a parsera
    this.mdParser = new MarkdownIt({
      html: true,
      linkify: true,
      typographer: true,
      highlight: function (str, lang) {
        if (lang && hljs.getLanguage(lang)) {
          try {
            return hljs.highlight(lang, str).value
          } catch (__) {}
        }    
        return '' // use external default escaping
      }
    })
    .use(emoji)
    .use(subscript)
    .use(superscript)
    .use(footnote)
    .use(deflist)
    .use(abbreviation)
    .use(insert)
    .use(mark)
    .use(tasklists, { enabled: this.taskLists })
    this.renderHTML = this.renderHTML.bind(this)
  }
  handleEditorChange({html, md}) {
    console.log('handleEditorChange', html, md)
  }
  handleImageUpload(file, callback) {
    const reader = new FileReader()
    reader.onload = () => {      
      const convertBase64UrlToBlob = (urlData) => {  
        let arr = urlData.split(','), mime = arr[0].match(/:(.*?);/)[1]
        let bstr = atob(arr[1])
        let n = bstr.length
        let u8arr = new Uint8Array(n)
        while (n--) {
          u8arr[n] = bstr.charCodeAt(n)
        }
        return new Blob([u8arr], {type:mime})
      }
      const blob = convertBase64UrlToBlob(reader.result)
      setTimeout(() => {
        // setTimeout æ¨¡æ‹Ÿå¼‚æ­¥ä¸Šä¼ å›¾ç‰‡
        // å½“å¼‚æ­¥ä¸Šä¼ èŽ·å–å›¾ç‰‡åœ°å€åŽï¼Œæ‰§è¡Œcalbackå›žè°ƒï¼ˆå‚æ•°ä¸ºimageUrlå­—ç¬¦ä¸²ï¼‰ï¼Œå³å¯å°†å›¾ç‰‡åœ°å€å†™å…¥markdown
        callback('https://avatars0.githubusercontent.com/u/21263805?s=40&v=4')
      }, 1000)
    }
    reader.readAsDataURL(file)
  }
  renderHTML(text) {
    // æ¨¡æ‹Ÿå¼‚æ­¥æ¸²æŸ“Markdown
    return new Promise((resolve) => {
      setTimeout(() => {
        resolve(this.mdParser.render(text))
      }, 1000)
    })
  }
  handleGetMdValue = () => {   
    this.mdEditor && alert(this.mdEditor.getMdValue())      
  }
  handleGetHtmlValue = () => {    
    this.mdEditor && alert(this.mdEditor.getHtmlValue())
  }
  render() {
    return (      
      <div>
        <nav>
          <button onClick={this.handleGetMdValue} >getMdValue</button>  
          <button onClick={this.handleGetHtmlValue} >getHtmlValue</button>  
        </nav>
        <section style="height: 500px">
          <MdEditor 
            ref={node => this.mdEditor = node}
            value={MOCK_DATA}
            style={{height: '400px'}}
            renderHTML={this.renderHTML}
            config={{
              view: {
                menu: true,
                md: true,
                html: true
              },
              imageUrl: 'https://octodex.github.com/images/minion.png'
            }}
            onChange={this.handleEditorChange} 
            onImageUpload={this.handleImageUpload}
          />
        </section>                        
      </div>      
    )
  }
}
```

### æœ€åŽ

   æ¬¢è¿Žå¤§å®¶ä½¿ç”¨å’Œåé¦ˆï¼Œ[é¡¹ç›®åœ°å€](https://github.com/HarryChen0506/react-markdown-editor-lite) (https://github.com/HarryChen0506/react-markdown-editor-lite)ï¼Œ ä½ çš„ç‚¹èµžå°†æ˜¯æˆ‘èŽ«å¤§çš„åŠ¨åŠ›ðŸ˜Š

', firstPicture='', viewCount=0, createDate='Sun Nov 07 14:09:29 EST 2021', updateDate='Mon Nov 08 09:15:09 EST 2021'}}, total=null}
2021-11-14 22:17:45:289 [http-nio-8081-exec-2] INFO  com.ivan.sunnyblog.web.res.S3ResourceManager uploading file to s3
2021-11-14 22:17:45:526 [http-nio-8081-exec-2] INFO  com.ivan.sunnyblog.web.res.S3ResourceManager uploading done. returned url: https://s3.ca-central-1.amazonaws.com/res-blog-public/res-dev/blog_1636946265289_1.png
2021-11-14 22:17:45:526 [http-nio-8081-exec-2] INFO  com.ivan.sunnyblog.web.aop.ControllerAspect *** Request Success ***: 237ms POST URI=/api/upload, methodName=com.ivan.sunnyblog.web.controller.ResourceController.upload, args=[org.springframework.web.multipart.support.StandardMultipartHttpServletRequest$StandardMultipartFile@38606f5f], result=ResultInfo{info='null', status=0, data=https://s3.ca-central-1.amazonaws.com/res-blog-public/res-dev/blog_1636946265289_1.png, total=null}
2021-11-14 22:18:24:448 [http-nio-8081-exec-5] INFO  com.ivan.sunnyblog.web.aop.ControllerAspect *** Request Success ***: 2ms GET URI=/api/admin/category, methodName=com.ivan.sunnyblog.web.controller.CategoryContoller.getCategoryList, args=[SearchVo{page=1, limit=10, categoryId=null, total=null}], result=ResultInfo{info='null', status=0, data=[Category (1, Life ), Category (2, liddffd)], total=null}
2021-11-14 22:18:24:450 [http-nio-8081-exec-6] INFO  com.ivan.sunnyblog.web.aop.ControllerAspect *** Request Success ***: 4ms GET URI=/api/admin/article/10005, methodName=com.ivan.sunnyblog.web.controller.ArticleController.getArticleDetail, args=[10005], result=ResultInfo{info='null', status=0, data=ArticleDetailVo{categoryId=1, BaseArticleVo{articleId=10005, status=1, title='dd', description='This is the doc of React markdown editor lite.
Enjoy!!', content='| Head | Head | Head | Head |
| --- | --- | --- | --- |
| Data | Data | Data | Data |
| Data | Data | Data | Data |

## æ‰‹æŠŠæ‰‹æ•™ä½ å†™ä¸€ä¸ªmarkdownç¼–è¾‘å™¨

> ç¬”è€…åœ¨18å¹´å¹´æœ«çš„æ—¶å€™æŽ¥åˆ°ä¸€ä¸ªå¼€å‘ä»»åŠ¡â€”â€”æ­å»ºä¸€ä¸ªAIé¡¹ç›®çš„å¼€æ”¾å¹³å°ï¼Œå…¶ä¸­çš„äº§å“æ–‡æ¡£ä¸ºè½¬åŒ–ä¸ºHTMLæ ¼å¼çš„markdownæ–‡æ¡£ã€‚è€ƒè™‘åˆ°æ–‡æ¡£çš„å³æ—¶æ›´æ–°ï¼Œå°†æ–‡æ¡£ä¿¡æ¯åšæˆäº†AjaxæŽ¥å£çš„å½¢å¼ã€‚å› æ­¤ç®¡ç†åŽå°åªéœ€å°†textareaè¡¨å•çš„å†…å®¹é€šè¿‡markdownè§£æžå™¨è¿›è¡ŒHTMLæ ¼å¼è½¬åŒ–ï¼Œç„¶åŽå°†markdownå†…å®¹å’Œç»è½¬åŒ–çš„HTMLæ–‡æ¡£éƒ½ä¿å­˜åˆ°æ•°æ®åº“å³å¯ã€‚
> åŸºæœ¬éœ€æ±‚å®ŒæˆåŽï¼Œä¸ºäº†æ›´å¥½çš„ç”¨æˆ·ä½“éªŒï¼Œè€ƒè™‘å°†å¸¸ç”¨çš„ç¼–è¾‘åŠŸèƒ½æ·»åŠ è¿›æ¥ã€‚æ”¹è¿›ç‰ˆä¸ä»…æ”¯æŒäº†å¸¸ç”¨çš„æ–‡æœ¬ç¼–è¾‘åŠŸèƒ½ï¼Œè¿˜å®žçŽ°çš„UIç•Œé¢çš„é…ç½®åŒ–ï¼Œè‡ªå®šä¹‰è¯­æ³•è§£æžå™¨ã€‚æœ¬ç€é€ ç¦ä¼¸æ‰‹å…šçš„ç›®çš„ï¼Œä»¥åŠç§¯ç´¯äº›å¼€æºç»éªŒï¼Œç¬”è€…å°†è¯¥react ç»„ä»¶ [react-markdown-editor-lite](https://github.com/HarryChen0506/react-markdown-editor-lite) è¿›è¡Œäº†å°è£…æ”¹é€ ï¼Œå¹¶ä¸”å‘å¸ƒåˆ°äº†å¼€æºç¤¾åŒºã€‚

### é¢„è§ˆ
åœ¨çº¿ä½“éªŒ [https://harrychen0506.github.io/react-markdown-editor-lite/](https://harrychen0506.github.io/react-markdown-editor-lite/)

![image](https://github.com//HarryChen0506/react-markdown-editor-lite/blob/master/image/react-markdown-editor-lite-v1.0.0.PNG?raw=true)

### ç‰¹ç‚¹
* è½»é‡ã€åŸºäºŽReact
* UIå¯é…ç½®, å¦‚åªæ˜¾ç¤ºç¼–è¾‘åŒºæˆ–é¢„è§ˆåŒº
* æ”¯æŒè‡ªå®šä¹‰markdownè¯­æ³•è§£æžå™¨,è¯­æ³•é«˜äº®ç­‰
* æ”¯æŒå¸¸ç”¨çš„markdownç¼–è¾‘åŠŸèƒ½ï¼Œå¦‚åŠ ç²—ï¼Œæ–œä½“ç­‰ç­‰...
* æ”¯æŒåŠŸèƒ½æŒ‰é’®æ’æ‹”åŒ–ï¼Œç”¨æˆ·å¯ä»¥è‡ªå®šä¹‰æ‰©å±•ç»„ä»¶
* æ”¯æŒç¼–è¾‘åŒºå’Œé¢„è§ˆåŒºåŒæ­¥æ»šåŠ¨

### å¼€å‘å¿ƒå¾—

- æ–‡æœ¬ç¼–è¾‘

  å¤§å¤šæ•°å¸¸è§çš„ç¼–è¾‘å™¨ï¼ŒåŒ…æ‹¬å¯Œæ–‡æœ¬ç¼–è¾‘å™¨ï¼Œåˆ©ç”¨äº†æŸäº›å…ƒç´ å¦‚divçš„contenteditableå±žæ€§ï¼Œé…åˆselectionã€rangeã€execCommandç­‰APIï¼Œå®žçŽ°äº†å¯Œæ–‡æœ¬ç¼–è¾‘åŠŸèƒ½ã€‚è¿™é‡Œé¢çš„å®žçŽ°æ¯”è¾ƒå¤æ‚ï¼Œæ‰€ä»¥æœ‰äº†"[ä¸ºä»€ä¹ˆéƒ½è¯´å¯Œæ–‡æœ¬ç¼–è¾‘å™¨æ˜¯å¤©å‘ï¼Ÿ](https://www.zhihu.com/question/38699645)"è¿™ä¸ªè¯´æ³•ã€‚

  è€Œmarkdownç¼–è¾‘å™¨ï¼Œæ ¸å¿ƒçš„å¤„ç†å†…å®¹ä¸ºç®€å•è¯­æ³•çš„çº¯æ–‡æœ¬ï¼Œå¤æ‚åº¦ç›¸å¯¹æ¥è¯´æ¯”è¾ƒä½Žï¼Œå¹¶ä¸”inputæ ‡ç­¾è‡ªå¸¦onSelectäº‹ä»¶ï¼Œå¯ä»¥å¾ˆæ–¹ä¾¿çš„èŽ·å–é€‰æ‹©ä¿¡æ¯ï¼ˆé€‰æ‹©èµ·å§‹ä½ç½®å’Œé€‰æ‹©æ–‡æœ¬å€¼ï¼‰ï¼Œå› æ­¤è¦æƒ³å®žçŽ°ç¼–è¾‘åŠŸèƒ½ï¼Œåªéœ€å°†è¦æ”¹åŠ¨çš„å†…å®¹è¿›è¡Œæ–‡æœ¬è½¬æ¢ï¼Œç„¶åŽè¿›è¡Œé‡æ–°æ‹¼æŽ¥é¦–å°¾ï¼Œå¤§åŠŸå‘Šæˆã€‚
  
- markdownè§£æž

  è€ƒå¯Ÿäº†å‡ ä¸ªç¤¾åŒºæµè¡Œçš„markdownè§£æžå™¨ï¼Œæ¯”è¾ƒæµè¡Œçš„æœ‰[markdown](https://www.npmjs.com/package/markdown), [markdown-it](https://www.npmjs.com/package/markdown-it), [marked](https://www.npmjs.com/package/marked) ç­‰ç­‰ã€‚ç»¼åˆè€ƒè™‘æ‰©å±•æ€§ä»¥åŠç¨³å®šæ€§ï¼Œç¬”è€…æŽ¨èä½¿ç”¨markdown-itä½œä¸ºmarkdownçš„è¯æ³•è§£æžå™¨ï¼Œå› ä¸ºè¯¥è§£æžå™¨æœ‰æ¯”è¾ƒå¤šçš„æ’ä»¶ï¼Œå¹¶ä¸”æ”¯æŒè¯­æ³•é«˜äº®ã€‚

- åŒæ­¥æ»šåŠ¨

  å½“é€‰æ‹©åˆ†æ ç¼–è¾‘çš„æ—¶å€™ï¼Œæ»šåŠ¨å·¦ä¾§çš„ç¼–è¾‘åŒºï¼Œå³ä¾§çš„é¢„è§ˆåŒºèƒ½è‡ªåŠ¨æ»šåŠ¨åˆ°å¯¹åº”çš„åŒºåŸŸã€‚æ–¹æ¡ˆå‚è€ƒäº†ã€Š[æ‰‹æŠŠæ‰‹æ•™ä½ ç”¨ 100è¡Œä»£ç å®žçŽ°åŸºäºŽ reactçš„ markdown è¾“å…¥ + å³æ—¶é¢„è§ˆåœ¨çº¿ç¼–è¾‘å™¨ï¼ˆä¸€ï¼‰](https://github.com/accforgit/blog-data/blob/master/%E5%9C%A8%E7%BA%BF%E7%BC%96%E8%BE%91%E5%99%A8/README/README1.md)ã€‹ã€‚åªéœ€å…ˆè®¡ç®—å‡ºè¾“å…¥æ¡†å®¹å™¨å…ƒç´ ä¸Žé¢„è§ˆæ¡†å®¹å™¨å…ƒç´ ä¹‹é—´æœ€å¤§scrollèŒƒå›´çš„æ¯”ä¾‹å€¼ï¼Œç„¶åŽæ ¹æ®ä¸»åŠ¨æ»šåŠ¨å…ƒç´ è‡ªèº«çš„scrollTopåšç›¸åº”çš„æ¯”ä¾‹æ¢ç®—ï¼Œå³å¯çŸ¥é“å¯¹æ–¹åŒºåŸŸçš„scrollTopå€¼ã€‚

- å…³äºŽUI
 
  - é¡¹ç›®çš„å­—ä½“åº“é€‰æ‹©äº†Font Awesomeé£Žæ ¼ï¼Œå¹¶ä¸”åªé€‰å–äº†é¡¹ç›®æ‰€éœ€è¦çš„ä¸€äº›å›¾æ ‡ã€‚
  - ç¼–è¾‘å™¨çš„æ•´ä½“csså‡å¯é€šè¿‡å…¨å±€è¦†ç›–çš„å½¢å¼è¿›è¡Œè‡ªå®šä¹‰ã€‚ç›®å‰æš‚æ—¶åªæ”¯æŒç°è‰²ä¸»é¢˜ã€‚
  - ç¼–è¾‘å™¨çš„æ˜¾ç¤ºåŒºåŸŸåŒ…æ‹¬èœå•æ ï¼Œç¼–è¾‘å™¨ï¼Œé¢„è§ˆåŒºï¼Œå·¥å…·æ ï¼Œé€šè¿‡é…ç½®ç»„ä»¶çš„configå±žæ€§ï¼Œå¯ä»¥é€‰æ‹©é»˜è®¤çš„å±•ç¤ºåŒºåŸŸã€‚
  
### Install

```js
npm install react-markdown-editor-lite --save
```

### Props

| Property | Description | Type | default | Remarks |
| --- | --- | --- | --- | --- |
| value | markdown content | String | '' | required |
| style | component container style | Object | {height: '100%'} | not required |
| config | component config | Object | {view: {...}, logger: {...}} | not required |
| onChange | emitting when editor has changed | Function | ({html, md}) => {} | not required |
| onImageUpload | when image uploaded, callback emitting will get image markdown text | (file: File, callback: (url: string) => void) => void; | ({file, callback}) => {} | not required |
| renderHTML | Render markdown text to HTML. You can return either string, function or Promise | (text: string) => string|function|Promise | none | **required** |

### Example

``` js
'use strict';
import React from 'react'
import ReactDOM from 'react-dom'
import MdEditor from 'react-markdown-editor-lite'
import MarkdownIt from 'markdown-it'
import emoji from 'markdown-it-emoji'
import subscript from 'markdown-it-sub'
import superscript from 'markdown-it-sup'
import footnote from 'markdown-it-footnote'
import deflist from 'markdown-it-deflist'
import abbreviation from 'markdown-it-abbr'
import insert from 'markdown-it-ins'
import mark from 'markdown-it-mark'
import tasklists from 'markdown-it-task-lists'
import hljs from 'highlight.js'
import 'highlight.js/styles/atom-one-light.css'
// import 'highlight.js/styles/github.css'
import './index.less';

const MOCK_DATA = "I Love React."
export default class Demo extends React.Component {
  mdEditor = null
  mdParser = null
  constructor(props) {
    super(props)
    // initial a parsera
    this.mdParser = new MarkdownIt({
      html: true,
      linkify: true,
      typographer: true,
      highlight: function (str, lang) {
        if (lang && hljs.getLanguage(lang)) {
          try {
            return hljs.highlight(lang, str).value
          } catch (__) {}
        }    
        return '' // use external default escaping
      }
    })
    .use(emoji)
    .use(subscript)
    .use(superscript)
    .use(footnote)
    .use(deflist)
    .use(abbreviation)
    .use(insert)
    .use(mark)
    .use(tasklists, { enabled: this.taskLists })
    this.renderHTML = this.renderHTML.bind(this)
  }
  handleEditorChange({html, md}) {
    console.log('handleEditorChange', html, md)
  }
  handleImageUpload(file, callback) {
    const reader = new FileReader()
    reader.onload = () => {      
      const convertBase64UrlToBlob = (urlData) => {  
        let arr = urlData.split(','), mime = arr[0].match(/:(.*?);/)[1]
        let bstr = atob(arr[1])
        let n = bstr.length
        let u8arr = new Uint8Array(n)
        while (n--) {
          u8arr[n] = bstr.charCodeAt(n)
        }
        return new Blob([u8arr], {type:mime})
      }
      const blob = convertBase64UrlToBlob(reader.result)
      setTimeout(() => {
        // setTimeout æ¨¡æ‹Ÿå¼‚æ­¥ä¸Šä¼ å›¾ç‰‡
        // å½“å¼‚æ­¥ä¸Šä¼ èŽ·å–å›¾ç‰‡åœ°å€åŽï¼Œæ‰§è¡Œcalbackå›žè°ƒï¼ˆå‚æ•°ä¸ºimageUrlå­—ç¬¦ä¸²ï¼‰ï¼Œå³å¯å°†å›¾ç‰‡åœ°å€å†™å…¥markdown
        callback('https://avatars0.githubusercontent.com/u/21263805?s=40&v=4')
      }, 1000)
    }
    reader.readAsDataURL(file)
  }
  renderHTML(text) {
    // æ¨¡æ‹Ÿå¼‚æ­¥æ¸²æŸ“Markdown
    return new Promise((resolve) => {
      setTimeout(() => {
        resolve(this.mdParser.render(text))
      }, 1000)
    })
  }
  handleGetMdValue = () => {   
    this.mdEditor && alert(this.mdEditor.getMdValue())      
  }
  handleGetHtmlValue = () => {    
    this.mdEditor && alert(this.mdEditor.getHtmlValue())
  }
  render() {
    return (      
      <div>
        <nav>
          <button onClick={this.handleGetMdValue} >getMdValue</button>  
          <button onClick={this.handleGetHtmlValue} >getHtmlValue</button>  
        </nav>
        <section style="height: 500px">
          <MdEditor 
            ref={node => this.mdEditor = node}
            value={MOCK_DATA}
            style={{height: '400px'}}
            renderHTML={this.renderHTML}
            config={{
              view: {
                menu: true,
                md: true,
                html: true
              },
              imageUrl: 'https://octodex.github.com/images/minion.png'
            }}
            onChange={this.handleEditorChange} 
            onImageUpload={this.handleImageUpload}
          />
        </section>                        
      </div>      
    )
  }
}
```

### æœ€åŽ

   æ¬¢è¿Žå¤§å®¶ä½¿ç”¨å’Œåé¦ˆï¼Œ[é¡¹ç›®åœ°å€](https://github.com/HarryChen0506/react-markdown-editor-lite) (https://github.com/HarryChen0506/react-markdown-editor-lite)ï¼Œ ä½ çš„ç‚¹èµžå°†æ˜¯æˆ‘èŽ«å¤§çš„åŠ¨åŠ›ðŸ˜Š

', firstPicture='', viewCount=0, createDate='Sun Nov 07 14:09:29 EST 2021', updateDate='Mon Nov 08 09:15:09 EST 2021'}}, total=null}
2021-11-14 22:18:39:247 [http-nio-8081-exec-7] INFO  com.ivan.sunnyblog.web.res.S3ResourceManager uploading file to s3
2021-11-14 22:18:39:565 [http-nio-8081-exec-7] INFO  com.ivan.sunnyblog.web.res.S3ResourceManager uploading done. returned url: https://s3.ca-central-1.amazonaws.com/res-blog-public/res-dev/blog_1636946319247_1.png
2021-11-14 22:18:39:566 [http-nio-8081-exec-7] INFO  com.ivan.sunnyblog.web.aop.ControllerAspect *** Request Success ***: 319ms POST URI=/api/upload, methodName=com.ivan.sunnyblog.web.controller.ResourceController.upload, args=[org.springframework.web.multipart.support.StandardMultipartHttpServletRequest$StandardMultipartFile@73988c4e], result=ResultInfo{info='null', status=0, data=https://s3.ca-central-1.amazonaws.com/res-blog-public/res-dev/blog_1636946319247_1.png, total=null}
2021-11-14 22:20:58:676 [http-nio-8081-exec-4] INFO  com.ivan.sunnyblog.web.aop.ControllerAspect *** Request Success ***: 1ms GET URI=/api/admin/category, methodName=com.ivan.sunnyblog.web.controller.CategoryContoller.getCategoryList, args=[SearchVo{page=1, limit=10, categoryId=null, total=null}], result=ResultInfo{info='null', status=0, data=[Category (1, Life ), Category (2, liddffd)], total=null}
2021-11-14 22:20:58:680 [http-nio-8081-exec-9] INFO  com.ivan.sunnyblog.web.aop.ControllerAspect *** Request Success ***: 5ms GET URI=/api/admin/article/10005, methodName=com.ivan.sunnyblog.web.controller.ArticleController.getArticleDetail, args=[10005], result=ResultInfo{info='null', status=0, data=ArticleDetailVo{categoryId=1, BaseArticleVo{articleId=10005, status=1, title='dd', description='This is the doc of React markdown editor lite.
Enjoy!!', content='| Head | Head | Head | Head |
| --- | --- | --- | --- |
| Data | Data | Data | Data |
| Data | Data | Data | Data |

## æ‰‹æŠŠæ‰‹æ•™ä½ å†™ä¸€ä¸ªmarkdownç¼–è¾‘å™¨

> ç¬”è€…åœ¨18å¹´å¹´æœ«çš„æ—¶å€™æŽ¥åˆ°ä¸€ä¸ªå¼€å‘ä»»åŠ¡â€”â€”æ­å»ºä¸€ä¸ªAIé¡¹ç›®çš„å¼€æ”¾å¹³å°ï¼Œå…¶ä¸­çš„äº§å“æ–‡æ¡£ä¸ºè½¬åŒ–ä¸ºHTMLæ ¼å¼çš„markdownæ–‡æ¡£ã€‚è€ƒè™‘åˆ°æ–‡æ¡£çš„å³æ—¶æ›´æ–°ï¼Œå°†æ–‡æ¡£ä¿¡æ¯åšæˆäº†AjaxæŽ¥å£çš„å½¢å¼ã€‚å› æ­¤ç®¡ç†åŽå°åªéœ€å°†textareaè¡¨å•çš„å†…å®¹é€šè¿‡markdownè§£æžå™¨è¿›è¡ŒHTMLæ ¼å¼è½¬åŒ–ï¼Œç„¶åŽå°†markdownå†…å®¹å’Œç»è½¬åŒ–çš„HTMLæ–‡æ¡£éƒ½ä¿å­˜åˆ°æ•°æ®åº“å³å¯ã€‚
> åŸºæœ¬éœ€æ±‚å®ŒæˆåŽï¼Œä¸ºäº†æ›´å¥½çš„ç”¨æˆ·ä½“éªŒï¼Œè€ƒè™‘å°†å¸¸ç”¨çš„ç¼–è¾‘åŠŸèƒ½æ·»åŠ è¿›æ¥ã€‚æ”¹è¿›ç‰ˆä¸ä»…æ”¯æŒäº†å¸¸ç”¨çš„æ–‡æœ¬ç¼–è¾‘åŠŸèƒ½ï¼Œè¿˜å®žçŽ°çš„UIç•Œé¢çš„é…ç½®åŒ–ï¼Œè‡ªå®šä¹‰è¯­æ³•è§£æžå™¨ã€‚æœ¬ç€é€ ç¦ä¼¸æ‰‹å…šçš„ç›®çš„ï¼Œä»¥åŠç§¯ç´¯äº›å¼€æºç»éªŒï¼Œç¬”è€…å°†è¯¥react ç»„ä»¶ [react-markdown-editor-lite](https://github.com/HarryChen0506/react-markdown-editor-lite) è¿›è¡Œäº†å°è£…æ”¹é€ ï¼Œå¹¶ä¸”å‘å¸ƒåˆ°äº†å¼€æºç¤¾åŒºã€‚

### é¢„è§ˆ
åœ¨çº¿ä½“éªŒ [https://harrychen0506.github.io/react-markdown-editor-lite/](https://harrychen0506.github.io/react-markdown-editor-lite/)

![image](https://github.com//HarryChen0506/react-markdown-editor-lite/blob/master/image/react-markdown-editor-lite-v1.0.0.PNG?raw=true)

### ç‰¹ç‚¹
* è½»é‡ã€åŸºäºŽReact
* UIå¯é…ç½®, å¦‚åªæ˜¾ç¤ºç¼–è¾‘åŒºæˆ–é¢„è§ˆåŒº
* æ”¯æŒè‡ªå®šä¹‰markdownè¯­æ³•è§£æžå™¨,è¯­æ³•é«˜äº®ç­‰
* æ”¯æŒå¸¸ç”¨çš„markdownç¼–è¾‘åŠŸèƒ½ï¼Œå¦‚åŠ ç²—ï¼Œæ–œä½“ç­‰ç­‰...
* æ”¯æŒåŠŸèƒ½æŒ‰é’®æ’æ‹”åŒ–ï¼Œç”¨æˆ·å¯ä»¥è‡ªå®šä¹‰æ‰©å±•ç»„ä»¶
* æ”¯æŒç¼–è¾‘åŒºå’Œé¢„è§ˆåŒºåŒæ­¥æ»šåŠ¨

### å¼€å‘å¿ƒå¾—

- æ–‡æœ¬ç¼–è¾‘

  å¤§å¤šæ•°å¸¸è§çš„ç¼–è¾‘å™¨ï¼ŒåŒ…æ‹¬å¯Œæ–‡æœ¬ç¼–è¾‘å™¨ï¼Œåˆ©ç”¨äº†æŸäº›å…ƒç´ å¦‚divçš„contenteditableå±žæ€§ï¼Œé…åˆselectionã€rangeã€execCommandç­‰APIï¼Œå®žçŽ°äº†å¯Œæ–‡æœ¬ç¼–è¾‘åŠŸèƒ½ã€‚è¿™é‡Œé¢çš„å®žçŽ°æ¯”è¾ƒå¤æ‚ï¼Œæ‰€ä»¥æœ‰äº†"[ä¸ºä»€ä¹ˆéƒ½è¯´å¯Œæ–‡æœ¬ç¼–è¾‘å™¨æ˜¯å¤©å‘ï¼Ÿ](https://www.zhihu.com/question/38699645)"è¿™ä¸ªè¯´æ³•ã€‚

  è€Œmarkdownç¼–è¾‘å™¨ï¼Œæ ¸å¿ƒçš„å¤„ç†å†…å®¹ä¸ºç®€å•è¯­æ³•çš„çº¯æ–‡æœ¬ï¼Œå¤æ‚åº¦ç›¸å¯¹æ¥è¯´æ¯”è¾ƒä½Žï¼Œå¹¶ä¸”inputæ ‡ç­¾è‡ªå¸¦onSelectäº‹ä»¶ï¼Œå¯ä»¥å¾ˆæ–¹ä¾¿çš„èŽ·å–é€‰æ‹©ä¿¡æ¯ï¼ˆé€‰æ‹©èµ·å§‹ä½ç½®å’Œé€‰æ‹©æ–‡æœ¬å€¼ï¼‰ï¼Œå› æ­¤è¦æƒ³å®žçŽ°ç¼–è¾‘åŠŸèƒ½ï¼Œåªéœ€å°†è¦æ”¹åŠ¨çš„å†…å®¹è¿›è¡Œæ–‡æœ¬è½¬æ¢ï¼Œç„¶åŽè¿›è¡Œé‡æ–°æ‹¼æŽ¥é¦–å°¾ï¼Œå¤§åŠŸå‘Šæˆã€‚
  
- markdownè§£æž

  è€ƒå¯Ÿäº†å‡ ä¸ªç¤¾åŒºæµè¡Œçš„markdownè§£æžå™¨ï¼Œæ¯”è¾ƒæµè¡Œçš„æœ‰[markdown](https://www.npmjs.com/package/markdown), [markdown-it](https://www.npmjs.com/package/markdown-it), [marked](https://www.npmjs.com/package/marked) ç­‰ç­‰ã€‚ç»¼åˆè€ƒè™‘æ‰©å±•æ€§ä»¥åŠç¨³å®šæ€§ï¼Œç¬”è€…æŽ¨èä½¿ç”¨markdown-itä½œä¸ºmarkdownçš„è¯æ³•è§£æžå™¨ï¼Œå› ä¸ºè¯¥è§£æžå™¨æœ‰æ¯”è¾ƒå¤šçš„æ’ä»¶ï¼Œå¹¶ä¸”æ”¯æŒè¯­æ³•é«˜äº®ã€‚

- åŒæ­¥æ»šåŠ¨

  å½“é€‰æ‹©åˆ†æ ç¼–è¾‘çš„æ—¶å€™ï¼Œæ»šåŠ¨å·¦ä¾§çš„ç¼–è¾‘åŒºï¼Œå³ä¾§çš„é¢„è§ˆåŒºèƒ½è‡ªåŠ¨æ»šåŠ¨åˆ°å¯¹åº”çš„åŒºåŸŸã€‚æ–¹æ¡ˆå‚è€ƒäº†ã€Š[æ‰‹æŠŠæ‰‹æ•™ä½ ç”¨ 100è¡Œä»£ç å®žçŽ°åŸºäºŽ reactçš„ markdown è¾“å…¥ + å³æ—¶é¢„è§ˆåœ¨çº¿ç¼–è¾‘å™¨ï¼ˆä¸€ï¼‰](https://github.com/accforgit/blog-data/blob/master/%E5%9C%A8%E7%BA%BF%E7%BC%96%E8%BE%91%E5%99%A8/README/README1.md)ã€‹ã€‚åªéœ€å…ˆè®¡ç®—å‡ºè¾“å…¥æ¡†å®¹å™¨å…ƒç´ ä¸Žé¢„è§ˆæ¡†å®¹å™¨å…ƒç´ ä¹‹é—´æœ€å¤§scrollèŒƒå›´çš„æ¯”ä¾‹å€¼ï¼Œç„¶åŽæ ¹æ®ä¸»åŠ¨æ»šåŠ¨å…ƒç´ è‡ªèº«çš„scrollTopåšç›¸åº”çš„æ¯”ä¾‹æ¢ç®—ï¼Œå³å¯çŸ¥é“å¯¹æ–¹åŒºåŸŸçš„scrollTopå€¼ã€‚

- å…³äºŽUI
 
  - é¡¹ç›®çš„å­—ä½“åº“é€‰æ‹©äº†Font Awesomeé£Žæ ¼ï¼Œå¹¶ä¸”åªé€‰å–äº†é¡¹ç›®æ‰€éœ€è¦çš„ä¸€äº›å›¾æ ‡ã€‚
  - ç¼–è¾‘å™¨çš„æ•´ä½“csså‡å¯é€šè¿‡å…¨å±€è¦†ç›–çš„å½¢å¼è¿›è¡Œè‡ªå®šä¹‰ã€‚ç›®å‰æš‚æ—¶åªæ”¯æŒç°è‰²ä¸»é¢˜ã€‚
  - ç¼–è¾‘å™¨çš„æ˜¾ç¤ºåŒºåŸŸåŒ…æ‹¬èœå•æ ï¼Œç¼–è¾‘å™¨ï¼Œé¢„è§ˆåŒºï¼Œå·¥å…·æ ï¼Œé€šè¿‡é…ç½®ç»„ä»¶çš„configå±žæ€§ï¼Œå¯ä»¥é€‰æ‹©é»˜è®¤çš„å±•ç¤ºåŒºåŸŸã€‚
  
### Install

```js
npm install react-markdown-editor-lite --save
```

### Props

| Property | Description | Type | default | Remarks |
| --- | --- | --- | --- | --- |
| value | markdown content | String | '' | required |
| style | component container style | Object | {height: '100%'} | not required |
| config | component config | Object | {view: {...}, logger: {...}} | not required |
| onChange | emitting when editor has changed | Function | ({html, md}) => {} | not required |
| onImageUpload | when image uploaded, callback emitting will get image markdown text | (file: File, callback: (url: string) => void) => void; | ({file, callback}) => {} | not required |
| renderHTML | Render markdown text to HTML. You can return either string, function or Promise | (text: string) => string|function|Promise | none | **required** |

### Example

``` js
'use strict';
import React from 'react'
import ReactDOM from 'react-dom'
import MdEditor from 'react-markdown-editor-lite'
import MarkdownIt from 'markdown-it'
import emoji from 'markdown-it-emoji'
import subscript from 'markdown-it-sub'
import superscript from 'markdown-it-sup'
import footnote from 'markdown-it-footnote'
import deflist from 'markdown-it-deflist'
import abbreviation from 'markdown-it-abbr'
import insert from 'markdown-it-ins'
import mark from 'markdown-it-mark'
import tasklists from 'markdown-it-task-lists'
import hljs from 'highlight.js'
import 'highlight.js/styles/atom-one-light.css'
// import 'highlight.js/styles/github.css'
import './index.less';

const MOCK_DATA = "I Love React."
export default class Demo extends React.Component {
  mdEditor = null
  mdParser = null
  constructor(props) {
    super(props)
    // initial a parsera
    this.mdParser = new MarkdownIt({
      html: true,
      linkify: true,
      typographer: true,
      highlight: function (str, lang) {
        if (lang && hljs.getLanguage(lang)) {
          try {
            return hljs.highlight(lang, str).value
          } catch (__) {}
        }    
        return '' // use external default escaping
      }
    })
    .use(emoji)
    .use(subscript)
    .use(superscript)
    .use(footnote)
    .use(deflist)
    .use(abbreviation)
    .use(insert)
    .use(mark)
    .use(tasklists, { enabled: this.taskLists })
    this.renderHTML = this.renderHTML.bind(this)
  }
  handleEditorChange({html, md}) {
    console.log('handleEditorChange', html, md)
  }
  handleImageUpload(file, callback) {
    const reader = new FileReader()
    reader.onload = () => {      
      const convertBase64UrlToBlob = (urlData) => {  
        let arr = urlData.split(','), mime = arr[0].match(/:(.*?);/)[1]
        let bstr = atob(arr[1])
        let n = bstr.length
        let u8arr = new Uint8Array(n)
        while (n--) {
          u8arr[n] = bstr.charCodeAt(n)
        }
        return new Blob([u8arr], {type:mime})
      }
      const blob = convertBase64UrlToBlob(reader.result)
      setTimeout(() => {
        // setTimeout æ¨¡æ‹Ÿå¼‚æ­¥ä¸Šä¼ å›¾ç‰‡
        // å½“å¼‚æ­¥ä¸Šä¼ èŽ·å–å›¾ç‰‡åœ°å€åŽï¼Œæ‰§è¡Œcalbackå›žè°ƒï¼ˆå‚æ•°ä¸ºimageUrlå­—ç¬¦ä¸²ï¼‰ï¼Œå³å¯å°†å›¾ç‰‡åœ°å€å†™å…¥markdown
        callback('https://avatars0.githubusercontent.com/u/21263805?s=40&v=4')
      }, 1000)
    }
    reader.readAsDataURL(file)
  }
  renderHTML(text) {
    // æ¨¡æ‹Ÿå¼‚æ­¥æ¸²æŸ“Markdown
    return new Promise((resolve) => {
      setTimeout(() => {
        resolve(this.mdParser.render(text))
      }, 1000)
    })
  }
  handleGetMdValue = () => {   
    this.mdEditor && alert(this.mdEditor.getMdValue())      
  }
  handleGetHtmlValue = () => {    
    this.mdEditor && alert(this.mdEditor.getHtmlValue())
  }
  render() {
    return (      
      <div>
        <nav>
          <button onClick={this.handleGetMdValue} >getMdValue</button>  
          <button onClick={this.handleGetHtmlValue} >getHtmlValue</button>  
        </nav>
        <section style="height: 500px">
          <MdEditor 
            ref={node => this.mdEditor = node}
            value={MOCK_DATA}
            style={{height: '400px'}}
            renderHTML={this.renderHTML}
            config={{
              view: {
                menu: true,
                md: true,
                html: true
              },
              imageUrl: 'https://octodex.github.com/images/minion.png'
            }}
            onChange={this.handleEditorChange} 
            onImageUpload={this.handleImageUpload}
          />
        </section>                        
      </div>      
    )
  }
}
```

### æœ€åŽ

   æ¬¢è¿Žå¤§å®¶ä½¿ç”¨å’Œåé¦ˆï¼Œ[é¡¹ç›®åœ°å€](https://github.com/HarryChen0506/react-markdown-editor-lite) (https://github.com/HarryChen0506/react-markdown-editor-lite)ï¼Œ ä½ çš„ç‚¹èµžå°†æ˜¯æˆ‘èŽ«å¤§çš„åŠ¨åŠ›ðŸ˜Š

', firstPicture='', viewCount=0, createDate='Sun Nov 07 14:09:29 EST 2021', updateDate='Mon Nov 08 09:15:09 EST 2021'}}, total=null}
2021-11-14 22:22:19:349 [http-nio-8081-exec-5] INFO  com.ivan.sunnyblog.web.aop.ControllerAspect *** Request Success ***: 3ms GET URI=/api/admin/category, methodName=com.ivan.sunnyblog.web.controller.CategoryContoller.getCategoryList, args=[SearchVo{page=1, limit=10, categoryId=null, total=null}], result=ResultInfo{info='null', status=0, data=[Category (1, Life ), Category (2, liddffd)], total=null}
2021-11-14 22:22:19:353 [http-nio-8081-exec-2] INFO  com.ivan.sunnyblog.web.aop.ControllerAspect *** Request Success ***: 7ms GET URI=/api/admin/article/10005, methodName=com.ivan.sunnyblog.web.controller.ArticleController.getArticleDetail, args=[10005], result=ResultInfo{info='null', status=0, data=ArticleDetailVo{categoryId=1, BaseArticleVo{articleId=10005, status=1, title='dd', description='This is the doc of React markdown editor lite.
Enjoy!!', content='| Head | Head | Head | Head |
| --- | --- | --- | --- |
| Data | Data | Data | Data |
| Data | Data | Data | Data |

## æ‰‹æŠŠæ‰‹æ•™ä½ å†™ä¸€ä¸ªmarkdownç¼–è¾‘å™¨

> ç¬”è€…åœ¨18å¹´å¹´æœ«çš„æ—¶å€™æŽ¥åˆ°ä¸€ä¸ªå¼€å‘ä»»åŠ¡â€”â€”æ­å»ºä¸€ä¸ªAIé¡¹ç›®çš„å¼€æ”¾å¹³å°ï¼Œå…¶ä¸­çš„äº§å“æ–‡æ¡£ä¸ºè½¬åŒ–ä¸ºHTMLæ ¼å¼çš„markdownæ–‡æ¡£ã€‚è€ƒè™‘åˆ°æ–‡æ¡£çš„å³æ—¶æ›´æ–°ï¼Œå°†æ–‡æ¡£ä¿¡æ¯åšæˆäº†AjaxæŽ¥å£çš„å½¢å¼ã€‚å› æ­¤ç®¡ç†åŽå°åªéœ€å°†textareaè¡¨å•çš„å†…å®¹é€šè¿‡markdownè§£æžå™¨è¿›è¡ŒHTMLæ ¼å¼è½¬åŒ–ï¼Œç„¶åŽå°†markdownå†…å®¹å’Œç»è½¬åŒ–çš„HTMLæ–‡æ¡£éƒ½ä¿å­˜åˆ°æ•°æ®åº“å³å¯ã€‚
> åŸºæœ¬éœ€æ±‚å®ŒæˆåŽï¼Œä¸ºäº†æ›´å¥½çš„ç”¨æˆ·ä½“éªŒï¼Œè€ƒè™‘å°†å¸¸ç”¨çš„ç¼–è¾‘åŠŸèƒ½æ·»åŠ è¿›æ¥ã€‚æ”¹è¿›ç‰ˆä¸ä»…æ”¯æŒäº†å¸¸ç”¨çš„æ–‡æœ¬ç¼–è¾‘åŠŸèƒ½ï¼Œè¿˜å®žçŽ°çš„UIç•Œé¢çš„é…ç½®åŒ–ï¼Œè‡ªå®šä¹‰è¯­æ³•è§£æžå™¨ã€‚æœ¬ç€é€ ç¦ä¼¸æ‰‹å…šçš„ç›®çš„ï¼Œä»¥åŠç§¯ç´¯äº›å¼€æºç»éªŒï¼Œç¬”è€…å°†è¯¥react ç»„ä»¶ [react-markdown-editor-lite](https://github.com/HarryChen0506/react-markdown-editor-lite) è¿›è¡Œäº†å°è£…æ”¹é€ ï¼Œå¹¶ä¸”å‘å¸ƒåˆ°äº†å¼€æºç¤¾åŒºã€‚

### é¢„è§ˆ
åœ¨çº¿ä½“éªŒ [https://harrychen0506.github.io/react-markdown-editor-lite/](https://harrychen0506.github.io/react-markdown-editor-lite/)

![image](https://github.com//HarryChen0506/react-markdown-editor-lite/blob/master/image/react-markdown-editor-lite-v1.0.0.PNG?raw=true)

### ç‰¹ç‚¹
* è½»é‡ã€åŸºäºŽReact
* UIå¯é…ç½®, å¦‚åªæ˜¾ç¤ºç¼–è¾‘åŒºæˆ–é¢„è§ˆåŒº
* æ”¯æŒè‡ªå®šä¹‰markdownè¯­æ³•è§£æžå™¨,è¯­æ³•é«˜äº®ç­‰
* æ”¯æŒå¸¸ç”¨çš„markdownç¼–è¾‘åŠŸèƒ½ï¼Œå¦‚åŠ ç²—ï¼Œæ–œä½“ç­‰ç­‰...
* æ”¯æŒåŠŸèƒ½æŒ‰é’®æ’æ‹”åŒ–ï¼Œç”¨æˆ·å¯ä»¥è‡ªå®šä¹‰æ‰©å±•ç»„ä»¶
* æ”¯æŒç¼–è¾‘åŒºå’Œé¢„è§ˆåŒºåŒæ­¥æ»šåŠ¨

### å¼€å‘å¿ƒå¾—

- æ–‡æœ¬ç¼–è¾‘

  å¤§å¤šæ•°å¸¸è§çš„ç¼–è¾‘å™¨ï¼ŒåŒ…æ‹¬å¯Œæ–‡æœ¬ç¼–è¾‘å™¨ï¼Œåˆ©ç”¨äº†æŸäº›å…ƒç´ å¦‚divçš„contenteditableå±žæ€§ï¼Œé…åˆselectionã€rangeã€execCommandç­‰APIï¼Œå®žçŽ°äº†å¯Œæ–‡æœ¬ç¼–è¾‘åŠŸèƒ½ã€‚è¿™é‡Œé¢çš„å®žçŽ°æ¯”è¾ƒå¤æ‚ï¼Œæ‰€ä»¥æœ‰äº†"[ä¸ºä»€ä¹ˆéƒ½è¯´å¯Œæ–‡æœ¬ç¼–è¾‘å™¨æ˜¯å¤©å‘ï¼Ÿ](https://www.zhihu.com/question/38699645)"è¿™ä¸ªè¯´æ³•ã€‚

  è€Œmarkdownç¼–è¾‘å™¨ï¼Œæ ¸å¿ƒçš„å¤„ç†å†…å®¹ä¸ºç®€å•è¯­æ³•çš„çº¯æ–‡æœ¬ï¼Œå¤æ‚åº¦ç›¸å¯¹æ¥è¯´æ¯”è¾ƒä½Žï¼Œå¹¶ä¸”inputæ ‡ç­¾è‡ªå¸¦onSelectäº‹ä»¶ï¼Œå¯ä»¥å¾ˆæ–¹ä¾¿çš„èŽ·å–é€‰æ‹©ä¿¡æ¯ï¼ˆé€‰æ‹©èµ·å§‹ä½ç½®å’Œé€‰æ‹©æ–‡æœ¬å€¼ï¼‰ï¼Œå› æ­¤è¦æƒ³å®žçŽ°ç¼–è¾‘åŠŸèƒ½ï¼Œåªéœ€å°†è¦æ”¹åŠ¨çš„å†…å®¹è¿›è¡Œæ–‡æœ¬è½¬æ¢ï¼Œç„¶åŽè¿›è¡Œé‡æ–°æ‹¼æŽ¥é¦–å°¾ï¼Œå¤§åŠŸå‘Šæˆã€‚
  
- markdownè§£æž

  è€ƒå¯Ÿäº†å‡ ä¸ªç¤¾åŒºæµè¡Œçš„markdownè§£æžå™¨ï¼Œæ¯”è¾ƒæµè¡Œçš„æœ‰[markdown](https://www.npmjs.com/package/markdown), [markdown-it](https://www.npmjs.com/package/markdown-it), [marked](https://www.npmjs.com/package/marked) ç­‰ç­‰ã€‚ç»¼åˆè€ƒè™‘æ‰©å±•æ€§ä»¥åŠç¨³å®šæ€§ï¼Œç¬”è€…æŽ¨èä½¿ç”¨markdown-itä½œä¸ºmarkdownçš„è¯æ³•è§£æžå™¨ï¼Œå› ä¸ºè¯¥è§£æžå™¨æœ‰æ¯”è¾ƒå¤šçš„æ’ä»¶ï¼Œå¹¶ä¸”æ”¯æŒè¯­æ³•é«˜äº®ã€‚

- åŒæ­¥æ»šåŠ¨

  å½“é€‰æ‹©åˆ†æ ç¼–è¾‘çš„æ—¶å€™ï¼Œæ»šåŠ¨å·¦ä¾§çš„ç¼–è¾‘åŒºï¼Œå³ä¾§çš„é¢„è§ˆåŒºèƒ½è‡ªåŠ¨æ»šåŠ¨åˆ°å¯¹åº”çš„åŒºåŸŸã€‚æ–¹æ¡ˆå‚è€ƒäº†ã€Š[æ‰‹æŠŠæ‰‹æ•™ä½ ç”¨ 100è¡Œä»£ç å®žçŽ°åŸºäºŽ reactçš„ markdown è¾“å…¥ + å³æ—¶é¢„è§ˆåœ¨çº¿ç¼–è¾‘å™¨ï¼ˆä¸€ï¼‰](https://github.com/accforgit/blog-data/blob/master/%E5%9C%A8%E7%BA%BF%E7%BC%96%E8%BE%91%E5%99%A8/README/README1.md)ã€‹ã€‚åªéœ€å…ˆè®¡ç®—å‡ºè¾“å…¥æ¡†å®¹å™¨å…ƒç´ ä¸Žé¢„è§ˆæ¡†å®¹å™¨å…ƒç´ ä¹‹é—´æœ€å¤§scrollèŒƒå›´çš„æ¯”ä¾‹å€¼ï¼Œç„¶åŽæ ¹æ®ä¸»åŠ¨æ»šåŠ¨å…ƒç´ è‡ªèº«çš„scrollTopåšç›¸åº”çš„æ¯”ä¾‹æ¢ç®—ï¼Œå³å¯çŸ¥é“å¯¹æ–¹åŒºåŸŸçš„scrollTopå€¼ã€‚

- å…³äºŽUI
 
  - é¡¹ç›®çš„å­—ä½“åº“é€‰æ‹©äº†Font Awesomeé£Žæ ¼ï¼Œå¹¶ä¸”åªé€‰å–äº†é¡¹ç›®æ‰€éœ€è¦çš„ä¸€äº›å›¾æ ‡ã€‚
  - ç¼–è¾‘å™¨çš„æ•´ä½“csså‡å¯é€šè¿‡å…¨å±€è¦†ç›–çš„å½¢å¼è¿›è¡Œè‡ªå®šä¹‰ã€‚ç›®å‰æš‚æ—¶åªæ”¯æŒç°è‰²ä¸»é¢˜ã€‚
  - ç¼–è¾‘å™¨çš„æ˜¾ç¤ºåŒºåŸŸåŒ…æ‹¬èœå•æ ï¼Œç¼–è¾‘å™¨ï¼Œé¢„è§ˆåŒºï¼Œå·¥å…·æ ï¼Œé€šè¿‡é…ç½®ç»„ä»¶çš„configå±žæ€§ï¼Œå¯ä»¥é€‰æ‹©é»˜è®¤çš„å±•ç¤ºåŒºåŸŸã€‚
  
### Install

```js
npm install react-markdown-editor-lite --save
```

### Props

| Property | Description | Type | default | Remarks |
| --- | --- | --- | --- | --- |
| value | markdown content | String | '' | required |
| style | component container style | Object | {height: '100%'} | not required |
| config | component config | Object | {view: {...}, logger: {...}} | not required |
| onChange | emitting when editor has changed | Function | ({html, md}) => {} | not required |
| onImageUpload | when image uploaded, callback emitting will get image markdown text | (file: File, callback: (url: string) => void) => void; | ({file, callback}) => {} | not required |
| renderHTML | Render markdown text to HTML. You can return either string, function or Promise | (text: string) => string|function|Promise | none | **required** |

### Example

``` js
'use strict';
import React from 'react'
import ReactDOM from 'react-dom'
import MdEditor from 'react-markdown-editor-lite'
import MarkdownIt from 'markdown-it'
import emoji from 'markdown-it-emoji'
import subscript from 'markdown-it-sub'
import superscript from 'markdown-it-sup'
import footnote from 'markdown-it-footnote'
import deflist from 'markdown-it-deflist'
import abbreviation from 'markdown-it-abbr'
import insert from 'markdown-it-ins'
import mark from 'markdown-it-mark'
import tasklists from 'markdown-it-task-lists'
import hljs from 'highlight.js'
import 'highlight.js/styles/atom-one-light.css'
// import 'highlight.js/styles/github.css'
import './index.less';

const MOCK_DATA = "I Love React."
export default class Demo extends React.Component {
  mdEditor = null
  mdParser = null
  constructor(props) {
    super(props)
    // initial a parsera
    this.mdParser = new MarkdownIt({
      html: true,
      linkify: true,
      typographer: true,
      highlight: function (str, lang) {
        if (lang && hljs.getLanguage(lang)) {
          try {
            return hljs.highlight(lang, str).value
          } catch (__) {}
        }    
        return '' // use external default escaping
      }
    })
    .use(emoji)
    .use(subscript)
    .use(superscript)
    .use(footnote)
    .use(deflist)
    .use(abbreviation)
    .use(insert)
    .use(mark)
    .use(tasklists, { enabled: this.taskLists })
    this.renderHTML = this.renderHTML.bind(this)
  }
  handleEditorChange({html, md}) {
    console.log('handleEditorChange', html, md)
  }
  handleImageUpload(file, callback) {
    const reader = new FileReader()
    reader.onload = () => {      
      const convertBase64UrlToBlob = (urlData) => {  
        let arr = urlData.split(','), mime = arr[0].match(/:(.*?);/)[1]
        let bstr = atob(arr[1])
        let n = bstr.length
        let u8arr = new Uint8Array(n)
        while (n--) {
          u8arr[n] = bstr.charCodeAt(n)
        }
        return new Blob([u8arr], {type:mime})
      }
      const blob = convertBase64UrlToBlob(reader.result)
      setTimeout(() => {
        // setTimeout æ¨¡æ‹Ÿå¼‚æ­¥ä¸Šä¼ å›¾ç‰‡
        // å½“å¼‚æ­¥ä¸Šä¼ èŽ·å–å›¾ç‰‡åœ°å€åŽï¼Œæ‰§è¡Œcalbackå›žè°ƒï¼ˆå‚æ•°ä¸ºimageUrlå­—ç¬¦ä¸²ï¼‰ï¼Œå³å¯å°†å›¾ç‰‡åœ°å€å†™å…¥markdown
        callback('https://avatars0.githubusercontent.com/u/21263805?s=40&v=4')
      }, 1000)
    }
    reader.readAsDataURL(file)
  }
  renderHTML(text) {
    // æ¨¡æ‹Ÿå¼‚æ­¥æ¸²æŸ“Markdown
    return new Promise((resolve) => {
      setTimeout(() => {
        resolve(this.mdParser.render(text))
      }, 1000)
    })
  }
  handleGetMdValue = () => {   
    this.mdEditor && alert(this.mdEditor.getMdValue())      
  }
  handleGetHtmlValue = () => {    
    this.mdEditor && alert(this.mdEditor.getHtmlValue())
  }
  render() {
    return (      
      <div>
        <nav>
          <button onClick={this.handleGetMdValue} >getMdValue</button>  
          <button onClick={this.handleGetHtmlValue} >getHtmlValue</button>  
        </nav>
        <section style="height: 500px">
          <MdEditor 
            ref={node => this.mdEditor = node}
            value={MOCK_DATA}
            style={{height: '400px'}}
            renderHTML={this.renderHTML}
            config={{
              view: {
                menu: true,
                md: true,
                html: true
              },
              imageUrl: 'https://octodex.github.com/images/minion.png'
            }}
            onChange={this.handleEditorChange} 
            onImageUpload={this.handleImageUpload}
          />
        </section>                        
      </div>      
    )
  }
}
```

### æœ€åŽ

   æ¬¢è¿Žå¤§å®¶ä½¿ç”¨å’Œåé¦ˆï¼Œ[é¡¹ç›®åœ°å€](https://github.com/HarryChen0506/react-markdown-editor-lite) (https://github.com/HarryChen0506/react-markdown-editor-lite)ï¼Œ ä½ çš„ç‚¹èµžå°†æ˜¯æˆ‘èŽ«å¤§çš„åŠ¨åŠ›ðŸ˜Š

', firstPicture='', viewCount=0, createDate='Sun Nov 07 14:09:29 EST 2021', updateDate='Mon Nov 08 09:15:09 EST 2021'}}, total=null}
2021-11-14 22:22:25:241 [http-nio-8081-exec-6] INFO  com.ivan.sunnyblog.web.res.S3ResourceManager uploading file to s3
2021-11-14 22:22:25:521 [http-nio-8081-exec-6] INFO  com.ivan.sunnyblog.web.res.S3ResourceManager uploading done. returned url: https://s3.ca-central-1.amazonaws.com/res-blog-public/res-dev/blog_1636946545241_1.png
2021-11-14 22:22:25:521 [http-nio-8081-exec-6] INFO  com.ivan.sunnyblog.web.aop.ControllerAspect *** Request Success ***: 280ms POST URI=/api/upload, methodName=com.ivan.sunnyblog.web.controller.ResourceController.upload, args=[org.springframework.web.multipart.support.StandardMultipartHttpServletRequest$StandardMultipartFile@1c26caaa], result=ResultInfo{info='null', status=0, data=https://s3.ca-central-1.amazonaws.com/res-blog-public/res-dev/blog_1636946545241_1.png, total=null}
2021-11-14 22:23:24:471 [http-nio-8081-exec-8] INFO  com.ivan.sunnyblog.web.aop.ControllerAspect *** Request Success ***: 6ms GET URI=/api/admin/article/10005, methodName=com.ivan.sunnyblog.web.controller.ArticleController.getArticleDetail, args=[10005], result=ResultInfo{info='null', status=0, data=ArticleDetailVo{categoryId=1, BaseArticleVo{articleId=10005, status=1, title='dd', description='This is the doc of React markdown editor lite.
Enjoy!!', content='| Head | Head | Head | Head |
| --- | --- | --- | --- |
| Data | Data | Data | Data |
| Data | Data | Data | Data |

## æ‰‹æŠŠæ‰‹æ•™ä½ å†™ä¸€ä¸ªmarkdownç¼–è¾‘å™¨

> ç¬”è€…åœ¨18å¹´å¹´æœ«çš„æ—¶å€™æŽ¥åˆ°ä¸€ä¸ªå¼€å‘ä»»åŠ¡â€”â€”æ­å»ºä¸€ä¸ªAIé¡¹ç›®çš„å¼€æ”¾å¹³å°ï¼Œå…¶ä¸­çš„äº§å“æ–‡æ¡£ä¸ºè½¬åŒ–ä¸ºHTMLæ ¼å¼çš„markdownæ–‡æ¡£ã€‚è€ƒè™‘åˆ°æ–‡æ¡£çš„å³æ—¶æ›´æ–°ï¼Œå°†æ–‡æ¡£ä¿¡æ¯åšæˆäº†AjaxæŽ¥å£çš„å½¢å¼ã€‚å› æ­¤ç®¡ç†åŽå°åªéœ€å°†textareaè¡¨å•çš„å†…å®¹é€šè¿‡markdownè§£æžå™¨è¿›è¡ŒHTMLæ ¼å¼è½¬åŒ–ï¼Œç„¶åŽå°†markdownå†…å®¹å’Œç»è½¬åŒ–çš„HTMLæ–‡æ¡£éƒ½ä¿å­˜åˆ°æ•°æ®åº“å³å¯ã€‚
> åŸºæœ¬éœ€æ±‚å®ŒæˆåŽï¼Œä¸ºäº†æ›´å¥½çš„ç”¨æˆ·ä½“éªŒï¼Œè€ƒè™‘å°†å¸¸ç”¨çš„ç¼–è¾‘åŠŸèƒ½æ·»åŠ è¿›æ¥ã€‚æ”¹è¿›ç‰ˆä¸ä»…æ”¯æŒäº†å¸¸ç”¨çš„æ–‡æœ¬ç¼–è¾‘åŠŸèƒ½ï¼Œè¿˜å®žçŽ°çš„UIç•Œé¢çš„é…ç½®åŒ–ï¼Œè‡ªå®šä¹‰è¯­æ³•è§£æžå™¨ã€‚æœ¬ç€é€ ç¦ä¼¸æ‰‹å…šçš„ç›®çš„ï¼Œä»¥åŠç§¯ç´¯äº›å¼€æºç»éªŒï¼Œç¬”è€…å°†è¯¥react ç»„ä»¶ [react-markdown-editor-lite](https://github.com/HarryChen0506/react-markdown-editor-lite) è¿›è¡Œäº†å°è£…æ”¹é€ ï¼Œå¹¶ä¸”å‘å¸ƒåˆ°äº†å¼€æºç¤¾åŒºã€‚

### é¢„è§ˆ
åœ¨çº¿ä½“éªŒ [https://harrychen0506.github.io/react-markdown-editor-lite/](https://harrychen0506.github.io/react-markdown-editor-lite/)

![image](https://github.com//HarryChen0506/react-markdown-editor-lite/blob/master/image/react-markdown-editor-lite-v1.0.0.PNG?raw=true)

### ç‰¹ç‚¹
* è½»é‡ã€åŸºäºŽReact
* UIå¯é…ç½®, å¦‚åªæ˜¾ç¤ºç¼–è¾‘åŒºæˆ–é¢„è§ˆåŒº
* æ”¯æŒè‡ªå®šä¹‰markdownè¯­æ³•è§£æžå™¨,è¯­æ³•é«˜äº®ç­‰
* æ”¯æŒå¸¸ç”¨çš„markdownç¼–è¾‘åŠŸèƒ½ï¼Œå¦‚åŠ ç²—ï¼Œæ–œä½“ç­‰ç­‰...
* æ”¯æŒåŠŸèƒ½æŒ‰é’®æ’æ‹”åŒ–ï¼Œç”¨æˆ·å¯ä»¥è‡ªå®šä¹‰æ‰©å±•ç»„ä»¶
* æ”¯æŒç¼–è¾‘åŒºå’Œé¢„è§ˆåŒºåŒæ­¥æ»šåŠ¨

### å¼€å‘å¿ƒå¾—

- æ–‡æœ¬ç¼–è¾‘

  å¤§å¤šæ•°å¸¸è§çš„ç¼–è¾‘å™¨ï¼ŒåŒ…æ‹¬å¯Œæ–‡æœ¬ç¼–è¾‘å™¨ï¼Œåˆ©ç”¨äº†æŸäº›å…ƒç´ å¦‚divçš„contenteditableå±žæ€§ï¼Œé…åˆselectionã€rangeã€execCommandç­‰APIï¼Œå®žçŽ°äº†å¯Œæ–‡æœ¬ç¼–è¾‘åŠŸèƒ½ã€‚è¿™é‡Œé¢çš„å®žçŽ°æ¯”è¾ƒå¤æ‚ï¼Œæ‰€ä»¥æœ‰äº†"[ä¸ºä»€ä¹ˆéƒ½è¯´å¯Œæ–‡æœ¬ç¼–è¾‘å™¨æ˜¯å¤©å‘ï¼Ÿ](https://www.zhihu.com/question/38699645)"è¿™ä¸ªè¯´æ³•ã€‚

  è€Œmarkdownç¼–è¾‘å™¨ï¼Œæ ¸å¿ƒçš„å¤„ç†å†…å®¹ä¸ºç®€å•è¯­æ³•çš„çº¯æ–‡æœ¬ï¼Œå¤æ‚åº¦ç›¸å¯¹æ¥è¯´æ¯”è¾ƒä½Žï¼Œå¹¶ä¸”inputæ ‡ç­¾è‡ªå¸¦onSelectäº‹ä»¶ï¼Œå¯ä»¥å¾ˆæ–¹ä¾¿çš„èŽ·å–é€‰æ‹©ä¿¡æ¯ï¼ˆé€‰æ‹©èµ·å§‹ä½ç½®å’Œé€‰æ‹©æ–‡æœ¬å€¼ï¼‰ï¼Œå› æ­¤è¦æƒ³å®žçŽ°ç¼–è¾‘åŠŸèƒ½ï¼Œåªéœ€å°†è¦æ”¹åŠ¨çš„å†…å®¹è¿›è¡Œæ–‡æœ¬è½¬æ¢ï¼Œç„¶åŽè¿›è¡Œé‡æ–°æ‹¼æŽ¥é¦–å°¾ï¼Œå¤§åŠŸå‘Šæˆã€‚
  
- markdownè§£æž

  è€ƒå¯Ÿäº†å‡ ä¸ªç¤¾åŒºæµè¡Œçš„markdownè§£æžå™¨ï¼Œæ¯”è¾ƒæµè¡Œçš„æœ‰[markdown](https://www.npmjs.com/package/markdown), [markdown-it](https://www.npmjs.com/package/markdown-it), [marked](https://www.npmjs.com/package/marked) ç­‰ç­‰ã€‚ç»¼åˆè€ƒè™‘æ‰©å±•æ€§ä»¥åŠç¨³å®šæ€§ï¼Œç¬”è€…æŽ¨èä½¿ç”¨markdown-itä½œä¸ºmarkdownçš„è¯æ³•è§£æžå™¨ï¼Œå› ä¸ºè¯¥è§£æžå™¨æœ‰æ¯”è¾ƒå¤šçš„æ’ä»¶ï¼Œå¹¶ä¸”æ”¯æŒè¯­æ³•é«˜äº®ã€‚

- åŒæ­¥æ»šåŠ¨

  å½“é€‰æ‹©åˆ†æ ç¼–è¾‘çš„æ—¶å€™ï¼Œæ»šåŠ¨å·¦ä¾§çš„ç¼–è¾‘åŒºï¼Œå³ä¾§çš„é¢„è§ˆåŒºèƒ½è‡ªåŠ¨æ»šåŠ¨åˆ°å¯¹åº”çš„åŒºåŸŸã€‚æ–¹æ¡ˆå‚è€ƒäº†ã€Š[æ‰‹æŠŠæ‰‹æ•™ä½ ç”¨ 100è¡Œä»£ç å®žçŽ°åŸºäºŽ reactçš„ markdown è¾“å…¥ + å³æ—¶é¢„è§ˆåœ¨çº¿ç¼–è¾‘å™¨ï¼ˆä¸€ï¼‰](https://github.com/accforgit/blog-data/blob/master/%E5%9C%A8%E7%BA%BF%E7%BC%96%E8%BE%91%E5%99%A8/README/README1.md)ã€‹ã€‚åªéœ€å…ˆè®¡ç®—å‡ºè¾“å…¥æ¡†å®¹å™¨å…ƒç´ ä¸Žé¢„è§ˆæ¡†å®¹å™¨å…ƒç´ ä¹‹é—´æœ€å¤§scrollèŒƒå›´çš„æ¯”ä¾‹å€¼ï¼Œç„¶åŽæ ¹æ®ä¸»åŠ¨æ»šåŠ¨å…ƒç´ è‡ªèº«çš„scrollTopåšç›¸åº”çš„æ¯”ä¾‹æ¢ç®—ï¼Œå³å¯çŸ¥é“å¯¹æ–¹åŒºåŸŸçš„scrollTopå€¼ã€‚

- å…³äºŽUI
 
  - é¡¹ç›®çš„å­—ä½“åº“é€‰æ‹©äº†Font Awesomeé£Žæ ¼ï¼Œå¹¶ä¸”åªé€‰å–äº†é¡¹ç›®æ‰€éœ€è¦çš„ä¸€äº›å›¾æ ‡ã€‚
  - ç¼–è¾‘å™¨çš„æ•´ä½“csså‡å¯é€šè¿‡å…¨å±€è¦†ç›–çš„å½¢å¼è¿›è¡Œè‡ªå®šä¹‰ã€‚ç›®å‰æš‚æ—¶åªæ”¯æŒç°è‰²ä¸»é¢˜ã€‚
  - ç¼–è¾‘å™¨çš„æ˜¾ç¤ºåŒºåŸŸåŒ…æ‹¬èœå•æ ï¼Œç¼–è¾‘å™¨ï¼Œé¢„è§ˆåŒºï¼Œå·¥å…·æ ï¼Œé€šè¿‡é…ç½®ç»„ä»¶çš„configå±žæ€§ï¼Œå¯ä»¥é€‰æ‹©é»˜è®¤çš„å±•ç¤ºåŒºåŸŸã€‚
  
### Install

```js
npm install react-markdown-editor-lite --save
```

### Props

| Property | Description | Type | default | Remarks |
| --- | --- | --- | --- | --- |
| value | markdown content | String | '' | required |
| style | component container style | Object | {height: '100%'} | not required |
| config | component config | Object | {view: {...}, logger: {...}} | not required |
| onChange | emitting when editor has changed | Function | ({html, md}) => {} | not required |
| onImageUpload | when image uploaded, callback emitting will get image markdown text | (file: File, callback: (url: string) => void) => void; | ({file, callback}) => {} | not required |
| renderHTML | Render markdown text to HTML. You can return either string, function or Promise | (text: string) => string|function|Promise | none | **required** |

### Example

``` js
'use strict';
import React from 'react'
import ReactDOM from 'react-dom'
import MdEditor from 'react-markdown-editor-lite'
import MarkdownIt from 'markdown-it'
import emoji from 'markdown-it-emoji'
import subscript from 'markdown-it-sub'
import superscript from 'markdown-it-sup'
import footnote from 'markdown-it-footnote'
import deflist from 'markdown-it-deflist'
import abbreviation from 'markdown-it-abbr'
import insert from 'markdown-it-ins'
import mark from 'markdown-it-mark'
import tasklists from 'markdown-it-task-lists'
import hljs from 'highlight.js'
import 'highlight.js/styles/atom-one-light.css'
// import 'highlight.js/styles/github.css'
import './index.less';

const MOCK_DATA = "I Love React."
export default class Demo extends React.Component {
  mdEditor = null
  mdParser = null
  constructor(props) {
    super(props)
    // initial a parsera
    this.mdParser = new MarkdownIt({
      html: true,
      linkify: true,
      typographer: true,
      highlight: function (str, lang) {
        if (lang && hljs.getLanguage(lang)) {
          try {
            return hljs.highlight(lang, str).value
          } catch (__) {}
        }    
        return '' // use external default escaping
      }
    })
    .use(emoji)
    .use(subscript)
    .use(superscript)
    .use(footnote)
    .use(deflist)
    .use(abbreviation)
    .use(insert)
    .use(mark)
    .use(tasklists, { enabled: this.taskLists })
    this.renderHTML = this.renderHTML.bind(this)
  }
  handleEditorChange({html, md}) {
    console.log('handleEditorChange', html, md)
  }
  handleImageUpload(file, callback) {
    const reader = new FileReader()
    reader.onload = () => {      
      const convertBase64UrlToBlob = (urlData) => {  
        let arr = urlData.split(','), mime = arr[0].match(/:(.*?);/)[1]
        let bstr = atob(arr[1])
        let n = bstr.length
        let u8arr = new Uint8Array(n)
        while (n--) {
          u8arr[n] = bstr.charCodeAt(n)
        }
        return new Blob([u8arr], {type:mime})
      }
      const blob = convertBase64UrlToBlob(reader.result)
      setTimeout(() => {
        // setTimeout æ¨¡æ‹Ÿå¼‚æ­¥ä¸Šä¼ å›¾ç‰‡
        // å½“å¼‚æ­¥ä¸Šä¼ èŽ·å–å›¾ç‰‡åœ°å€åŽï¼Œæ‰§è¡Œcalbackå›žè°ƒï¼ˆå‚æ•°ä¸ºimageUrlå­—ç¬¦ä¸²ï¼‰ï¼Œå³å¯å°†å›¾ç‰‡åœ°å€å†™å…¥markdown
        callback('https://avatars0.githubusercontent.com/u/21263805?s=40&v=4')
      }, 1000)
    }
    reader.readAsDataURL(file)
  }
  renderHTML(text) {
    // æ¨¡æ‹Ÿå¼‚æ­¥æ¸²æŸ“Markdown
    return new Promise((resolve) => {
      setTimeout(() => {
        resolve(this.mdParser.render(text))
      }, 1000)
    })
  }
  handleGetMdValue = () => {   
    this.mdEditor && alert(this.mdEditor.getMdValue())      
  }
  handleGetHtmlValue = () => {    
    this.mdEditor && alert(this.mdEditor.getHtmlValue())
  }
  render() {
    return (      
      <div>
        <nav>
          <button onClick={this.handleGetMdValue} >getMdValue</button>  
          <button onClick={this.handleGetHtmlValue} >getHtmlValue</button>  
        </nav>
        <section style="height: 500px">
          <MdEditor 
            ref={node => this.mdEditor = node}
            value={MOCK_DATA}
            style={{height: '400px'}}
            renderHTML={this.renderHTML}
            config={{
              view: {
                menu: true,
                md: true,
                html: true
              },
              imageUrl: 'https://octodex.github.com/images/minion.png'
            }}
            onChange={this.handleEditorChange} 
            onImageUpload={this.handleImageUpload}
          />
        </section>                        
      </div>      
    )
  }
}
```

### æœ€åŽ

   æ¬¢è¿Žå¤§å®¶ä½¿ç”¨å’Œåé¦ˆï¼Œ[é¡¹ç›®åœ°å€](https://github.com/HarryChen0506/react-markdown-editor-lite) (https://github.com/HarryChen0506/react-markdown-editor-lite)ï¼Œ ä½ çš„ç‚¹èµžå°†æ˜¯æˆ‘èŽ«å¤§çš„åŠ¨åŠ›ðŸ˜Š

', firstPicture='', viewCount=0, createDate='Sun Nov 07 14:09:29 EST 2021', updateDate='Mon Nov 08 09:15:09 EST 2021'}}, total=null}
2021-11-14 22:23:24:477 [http-nio-8081-exec-10] INFO  com.ivan.sunnyblog.web.aop.ControllerAspect *** Request Success ***: 12ms GET URI=/api/admin/category, methodName=com.ivan.sunnyblog.web.controller.CategoryContoller.getCategoryList, args=[SearchVo{page=1, limit=10, categoryId=null, total=null}], result=ResultInfo{info='null', status=0, data=[Category (1, Life ), Category (2, liddffd)], total=null}
2021-11-14 22:23:29:364 [http-nio-8081-exec-4] INFO  com.ivan.sunnyblog.web.res.S3ResourceManager uploading file to s3
2021-11-14 22:23:29:602 [http-nio-8081-exec-4] INFO  com.ivan.sunnyblog.web.res.S3ResourceManager uploading done. returned url: https://s3.ca-central-1.amazonaws.com/res-blog-public/res-dev/blog_1636946609364_1.png
2021-11-14 22:23:29:602 [http-nio-8081-exec-4] INFO  com.ivan.sunnyblog.web.aop.ControllerAspect *** Request Success ***: 238ms POST URI=/api/upload, methodName=com.ivan.sunnyblog.web.controller.ResourceController.upload, args=[org.springframework.web.multipart.support.StandardMultipartHttpServletRequest$StandardMultipartFile@7f218418], result=ResultInfo{info='null', status=0, data=https://s3.ca-central-1.amazonaws.com/res-blog-public/res-dev/blog_1636946609364_1.png, total=null}
2021-11-14 22:24:40:559 [http-nio-8081-exec-5] INFO  com.ivan.sunnyblog.web.aop.ControllerAspect *** Request Success ***: 3ms GET URI=/api/admin/category, methodName=com.ivan.sunnyblog.web.controller.CategoryContoller.getCategoryList, args=[SearchVo{page=1, limit=10, categoryId=null, total=null}], result=ResultInfo{info='null', status=0, data=[Category (1, Life ), Category (2, liddffd)], total=null}
2021-11-14 22:24:40:562 [http-nio-8081-exec-3] INFO  com.ivan.sunnyblog.web.aop.ControllerAspect *** Request Success ***: 6ms GET URI=/api/admin/article/10005, methodName=com.ivan.sunnyblog.web.controller.ArticleController.getArticleDetail, args=[10005], result=ResultInfo{info='null', status=0, data=ArticleDetailVo{categoryId=1, BaseArticleVo{articleId=10005, status=1, title='dd', description='This is the doc of React markdown editor lite.
Enjoy!!', content='| Head | Head | Head | Head |
| --- | --- | --- | --- |
| Data | Data | Data | Data |
| Data | Data | Data | Data |

## æ‰‹æŠŠæ‰‹æ•™ä½ å†™ä¸€ä¸ªmarkdownç¼–è¾‘å™¨

> ç¬”è€…åœ¨18å¹´å¹´æœ«çš„æ—¶å€™æŽ¥åˆ°ä¸€ä¸ªå¼€å‘ä»»åŠ¡â€”â€”æ­å»ºä¸€ä¸ªAIé¡¹ç›®çš„å¼€æ”¾å¹³å°ï¼Œå…¶ä¸­çš„äº§å“æ–‡æ¡£ä¸ºè½¬åŒ–ä¸ºHTMLæ ¼å¼çš„markdownæ–‡æ¡£ã€‚è€ƒè™‘åˆ°æ–‡æ¡£çš„å³æ—¶æ›´æ–°ï¼Œå°†æ–‡æ¡£ä¿¡æ¯åšæˆäº†AjaxæŽ¥å£çš„å½¢å¼ã€‚å› æ­¤ç®¡ç†åŽå°åªéœ€å°†textareaè¡¨å•çš„å†…å®¹é€šè¿‡markdownè§£æžå™¨è¿›è¡ŒHTMLæ ¼å¼è½¬åŒ–ï¼Œç„¶åŽå°†markdownå†…å®¹å’Œç»è½¬åŒ–çš„HTMLæ–‡æ¡£éƒ½ä¿å­˜åˆ°æ•°æ®åº“å³å¯ã€‚
> åŸºæœ¬éœ€æ±‚å®ŒæˆåŽï¼Œä¸ºäº†æ›´å¥½çš„ç”¨æˆ·ä½“éªŒï¼Œè€ƒè™‘å°†å¸¸ç”¨çš„ç¼–è¾‘åŠŸèƒ½æ·»åŠ è¿›æ¥ã€‚æ”¹è¿›ç‰ˆä¸ä»…æ”¯æŒäº†å¸¸ç”¨çš„æ–‡æœ¬ç¼–è¾‘åŠŸèƒ½ï¼Œè¿˜å®žçŽ°çš„UIç•Œé¢çš„é…ç½®åŒ–ï¼Œè‡ªå®šä¹‰è¯­æ³•è§£æžå™¨ã€‚æœ¬ç€é€ ç¦ä¼¸æ‰‹å…šçš„ç›®çš„ï¼Œä»¥åŠç§¯ç´¯äº›å¼€æºç»éªŒï¼Œç¬”è€…å°†è¯¥react ç»„ä»¶ [react-markdown-editor-lite](https://github.com/HarryChen0506/react-markdown-editor-lite) è¿›è¡Œäº†å°è£…æ”¹é€ ï¼Œå¹¶ä¸”å‘å¸ƒåˆ°äº†å¼€æºç¤¾åŒºã€‚

### é¢„è§ˆ
åœ¨çº¿ä½“éªŒ [https://harrychen0506.github.io/react-markdown-editor-lite/](https://harrychen0506.github.io/react-markdown-editor-lite/)

![image](https://github.com//HarryChen0506/react-markdown-editor-lite/blob/master/image/react-markdown-editor-lite-v1.0.0.PNG?raw=true)

### ç‰¹ç‚¹
* è½»é‡ã€åŸºäºŽReact
* UIå¯é…ç½®, å¦‚åªæ˜¾ç¤ºç¼–è¾‘åŒºæˆ–é¢„è§ˆåŒº
* æ”¯æŒè‡ªå®šä¹‰markdownè¯­æ³•è§£æžå™¨,è¯­æ³•é«˜äº®ç­‰
* æ”¯æŒå¸¸ç”¨çš„markdownç¼–è¾‘åŠŸèƒ½ï¼Œå¦‚åŠ ç²—ï¼Œæ–œä½“ç­‰ç­‰...
* æ”¯æŒåŠŸèƒ½æŒ‰é’®æ’æ‹”åŒ–ï¼Œç”¨æˆ·å¯ä»¥è‡ªå®šä¹‰æ‰©å±•ç»„ä»¶
* æ”¯æŒç¼–è¾‘åŒºå’Œé¢„è§ˆåŒºåŒæ­¥æ»šåŠ¨

### å¼€å‘å¿ƒå¾—

- æ–‡æœ¬ç¼–è¾‘

  å¤§å¤šæ•°å¸¸è§çš„ç¼–è¾‘å™¨ï¼ŒåŒ…æ‹¬å¯Œæ–‡æœ¬ç¼–è¾‘å™¨ï¼Œåˆ©ç”¨äº†æŸäº›å…ƒç´ å¦‚divçš„contenteditableå±žæ€§ï¼Œé…åˆselectionã€rangeã€execCommandç­‰APIï¼Œå®žçŽ°äº†å¯Œæ–‡æœ¬ç¼–è¾‘åŠŸèƒ½ã€‚è¿™é‡Œé¢çš„å®žçŽ°æ¯”è¾ƒå¤æ‚ï¼Œæ‰€ä»¥æœ‰äº†"[ä¸ºä»€ä¹ˆéƒ½è¯´å¯Œæ–‡æœ¬ç¼–è¾‘å™¨æ˜¯å¤©å‘ï¼Ÿ](https://www.zhihu.com/question/38699645)"è¿™ä¸ªè¯´æ³•ã€‚

  è€Œmarkdownç¼–è¾‘å™¨ï¼Œæ ¸å¿ƒçš„å¤„ç†å†…å®¹ä¸ºç®€å•è¯­æ³•çš„çº¯æ–‡æœ¬ï¼Œå¤æ‚åº¦ç›¸å¯¹æ¥è¯´æ¯”è¾ƒä½Žï¼Œå¹¶ä¸”inputæ ‡ç­¾è‡ªå¸¦onSelectäº‹ä»¶ï¼Œå¯ä»¥å¾ˆæ–¹ä¾¿çš„èŽ·å–é€‰æ‹©ä¿¡æ¯ï¼ˆé€‰æ‹©èµ·å§‹ä½ç½®å’Œé€‰æ‹©æ–‡æœ¬å€¼ï¼‰ï¼Œå› æ­¤è¦æƒ³å®žçŽ°ç¼–è¾‘åŠŸèƒ½ï¼Œåªéœ€å°†è¦æ”¹åŠ¨çš„å†…å®¹è¿›è¡Œæ–‡æœ¬è½¬æ¢ï¼Œç„¶åŽè¿›è¡Œé‡æ–°æ‹¼æŽ¥é¦–å°¾ï¼Œå¤§åŠŸå‘Šæˆã€‚
  
- markdownè§£æž

  è€ƒå¯Ÿäº†å‡ ä¸ªç¤¾åŒºæµè¡Œçš„markdownè§£æžå™¨ï¼Œæ¯”è¾ƒæµè¡Œçš„æœ‰[markdown](https://www.npmjs.com/package/markdown), [markdown-it](https://www.npmjs.com/package/markdown-it), [marked](https://www.npmjs.com/package/marked) ç­‰ç­‰ã€‚ç»¼åˆè€ƒè™‘æ‰©å±•æ€§ä»¥åŠç¨³å®šæ€§ï¼Œç¬”è€…æŽ¨èä½¿ç”¨markdown-itä½œä¸ºmarkdownçš„è¯æ³•è§£æžå™¨ï¼Œå› ä¸ºè¯¥è§£æžå™¨æœ‰æ¯”è¾ƒå¤šçš„æ’ä»¶ï¼Œå¹¶ä¸”æ”¯æŒè¯­æ³•é«˜äº®ã€‚

- åŒæ­¥æ»šåŠ¨

  å½“é€‰æ‹©åˆ†æ ç¼–è¾‘çš„æ—¶å€™ï¼Œæ»šåŠ¨å·¦ä¾§çš„ç¼–è¾‘åŒºï¼Œå³ä¾§çš„é¢„è§ˆåŒºèƒ½è‡ªåŠ¨æ»šåŠ¨åˆ°å¯¹åº”çš„åŒºåŸŸã€‚æ–¹æ¡ˆå‚è€ƒäº†ã€Š[æ‰‹æŠŠæ‰‹æ•™ä½ ç”¨ 100è¡Œä»£ç å®žçŽ°åŸºäºŽ reactçš„ markdown è¾“å…¥ + å³æ—¶é¢„è§ˆåœ¨çº¿ç¼–è¾‘å™¨ï¼ˆä¸€ï¼‰](https://github.com/accforgit/blog-data/blob/master/%E5%9C%A8%E7%BA%BF%E7%BC%96%E8%BE%91%E5%99%A8/README/README1.md)ã€‹ã€‚åªéœ€å…ˆè®¡ç®—å‡ºè¾“å…¥æ¡†å®¹å™¨å…ƒç´ ä¸Žé¢„è§ˆæ¡†å®¹å™¨å…ƒç´ ä¹‹é—´æœ€å¤§scrollèŒƒå›´çš„æ¯”ä¾‹å€¼ï¼Œç„¶åŽæ ¹æ®ä¸»åŠ¨æ»šåŠ¨å…ƒç´ è‡ªèº«çš„scrollTopåšç›¸åº”çš„æ¯”ä¾‹æ¢ç®—ï¼Œå³å¯çŸ¥é“å¯¹æ–¹åŒºåŸŸçš„scrollTopå€¼ã€‚

- å…³äºŽUI
 
  - é¡¹ç›®çš„å­—ä½“åº“é€‰æ‹©äº†Font Awesomeé£Žæ ¼ï¼Œå¹¶ä¸”åªé€‰å–äº†é¡¹ç›®æ‰€éœ€è¦çš„ä¸€äº›å›¾æ ‡ã€‚
  - ç¼–è¾‘å™¨çš„æ•´ä½“csså‡å¯é€šè¿‡å…¨å±€è¦†ç›–çš„å½¢å¼è¿›è¡Œè‡ªå®šä¹‰ã€‚ç›®å‰æš‚æ—¶åªæ”¯æŒç°è‰²ä¸»é¢˜ã€‚
  - ç¼–è¾‘å™¨çš„æ˜¾ç¤ºåŒºåŸŸåŒ…æ‹¬èœå•æ ï¼Œç¼–è¾‘å™¨ï¼Œé¢„è§ˆåŒºï¼Œå·¥å…·æ ï¼Œé€šè¿‡é…ç½®ç»„ä»¶çš„configå±žæ€§ï¼Œå¯ä»¥é€‰æ‹©é»˜è®¤çš„å±•ç¤ºåŒºåŸŸã€‚
  
### Install

```js
npm install react-markdown-editor-lite --save
```

### Props

| Property | Description | Type | default | Remarks |
| --- | --- | --- | --- | --- |
| value | markdown content | String | '' | required |
| style | component container style | Object | {height: '100%'} | not required |
| config | component config | Object | {view: {...}, logger: {...}} | not required |
| onChange | emitting when editor has changed | Function | ({html, md}) => {} | not required |
| onImageUpload | when image uploaded, callback emitting will get image markdown text | (file: File, callback: (url: string) => void) => void; | ({file, callback}) => {} | not required |
| renderHTML | Render markdown text to HTML. You can return either string, function or Promise | (text: string) => string|function|Promise | none | **required** |

### Example

``` js
'use strict';
import React from 'react'
import ReactDOM from 'react-dom'
import MdEditor from 'react-markdown-editor-lite'
import MarkdownIt from 'markdown-it'
import emoji from 'markdown-it-emoji'
import subscript from 'markdown-it-sub'
import superscript from 'markdown-it-sup'
import footnote from 'markdown-it-footnote'
import deflist from 'markdown-it-deflist'
import abbreviation from 'markdown-it-abbr'
import insert from 'markdown-it-ins'
import mark from 'markdown-it-mark'
import tasklists from 'markdown-it-task-lists'
import hljs from 'highlight.js'
import 'highlight.js/styles/atom-one-light.css'
// import 'highlight.js/styles/github.css'
import './index.less';

const MOCK_DATA = "I Love React."
export default class Demo extends React.Component {
  mdEditor = null
  mdParser = null
  constructor(props) {
    super(props)
    // initial a parsera
    this.mdParser = new MarkdownIt({
      html: true,
      linkify: true,
      typographer: true,
      highlight: function (str, lang) {
        if (lang && hljs.getLanguage(lang)) {
          try {
            return hljs.highlight(lang, str).value
          } catch (__) {}
        }    
        return '' // use external default escaping
      }
    })
    .use(emoji)
    .use(subscript)
    .use(superscript)
    .use(footnote)
    .use(deflist)
    .use(abbreviation)
    .use(insert)
    .use(mark)
    .use(tasklists, { enabled: this.taskLists })
    this.renderHTML = this.renderHTML.bind(this)
  }
  handleEditorChange({html, md}) {
    console.log('handleEditorChange', html, md)
  }
  handleImageUpload(file, callback) {
    const reader = new FileReader()
    reader.onload = () => {      
      const convertBase64UrlToBlob = (urlData) => {  
        let arr = urlData.split(','), mime = arr[0].match(/:(.*?);/)[1]
        let bstr = atob(arr[1])
        let n = bstr.length
        let u8arr = new Uint8Array(n)
        while (n--) {
          u8arr[n] = bstr.charCodeAt(n)
        }
        return new Blob([u8arr], {type:mime})
      }
      const blob = convertBase64UrlToBlob(reader.result)
      setTimeout(() => {
        // setTimeout æ¨¡æ‹Ÿå¼‚æ­¥ä¸Šä¼ å›¾ç‰‡
        // å½“å¼‚æ­¥ä¸Šä¼ èŽ·å–å›¾ç‰‡åœ°å€åŽï¼Œæ‰§è¡Œcalbackå›žè°ƒï¼ˆå‚æ•°ä¸ºimageUrlå­—ç¬¦ä¸²ï¼‰ï¼Œå³å¯å°†å›¾ç‰‡åœ°å€å†™å…¥markdown
        callback('https://avatars0.githubusercontent.com/u/21263805?s=40&v=4')
      }, 1000)
    }
    reader.readAsDataURL(file)
  }
  renderHTML(text) {
    // æ¨¡æ‹Ÿå¼‚æ­¥æ¸²æŸ“Markdown
    return new Promise((resolve) => {
      setTimeout(() => {
        resolve(this.mdParser.render(text))
      }, 1000)
    })
  }
  handleGetMdValue = () => {   
    this.mdEditor && alert(this.mdEditor.getMdValue())      
  }
  handleGetHtmlValue = () => {    
    this.mdEditor && alert(this.mdEditor.getHtmlValue())
  }
  render() {
    return (      
      <div>
        <nav>
          <button onClick={this.handleGetMdValue} >getMdValue</button>  
          <button onClick={this.handleGetHtmlValue} >getHtmlValue</button>  
        </nav>
        <section style="height: 500px">
          <MdEditor 
            ref={node => this.mdEditor = node}
            value={MOCK_DATA}
            style={{height: '400px'}}
            renderHTML={this.renderHTML}
            config={{
              view: {
                menu: true,
                md: true,
                html: true
              },
              imageUrl: 'https://octodex.github.com/images/minion.png'
            }}
            onChange={this.handleEditorChange} 
            onImageUpload={this.handleImageUpload}
          />
        </section>                        
      </div>      
    )
  }
}
```

### æœ€åŽ

   æ¬¢è¿Žå¤§å®¶ä½¿ç”¨å’Œåé¦ˆï¼Œ[é¡¹ç›®åœ°å€](https://github.com/HarryChen0506/react-markdown-editor-lite) (https://github.com/HarryChen0506/react-markdown-editor-lite)ï¼Œ ä½ çš„ç‚¹èµžå°†æ˜¯æˆ‘èŽ«å¤§çš„åŠ¨åŠ›ðŸ˜Š

', firstPicture='', viewCount=0, createDate='Sun Nov 07 14:09:29 EST 2021', updateDate='Mon Nov 08 09:15:09 EST 2021'}}, total=null}
2021-11-14 22:24:47:658 [http-nio-8081-exec-2] INFO  com.ivan.sunnyblog.web.res.S3ResourceManager uploading file to s3
2021-11-14 22:24:47:972 [http-nio-8081-exec-2] INFO  com.ivan.sunnyblog.web.res.S3ResourceManager uploading done. returned url: https://s3.ca-central-1.amazonaws.com/res-blog-public/res-dev/blog_1636946687658_1.png
2021-11-14 22:24:47:972 [http-nio-8081-exec-2] INFO  com.ivan.sunnyblog.web.aop.ControllerAspect *** Request Success ***: 314ms POST URI=/api/upload, methodName=com.ivan.sunnyblog.web.controller.ResourceController.upload, args=[org.springframework.web.multipart.support.StandardMultipartHttpServletRequest$StandardMultipartFile@20af036], result=ResultInfo{info='null', status=0, data=https://s3.ca-central-1.amazonaws.com/res-blog-public/res-dev/blog_1636946687658_1.png, total=null}
2021-11-14 22:25:37:923 [http-nio-8081-exec-7] INFO  com.ivan.sunnyblog.web.aop.ControllerAspect *** Request Success ***: 5ms GET URI=/api/admin/category, methodName=com.ivan.sunnyblog.web.controller.CategoryContoller.getCategoryList, args=[SearchVo{page=1, limit=10, categoryId=null, total=null}], result=ResultInfo{info='null', status=0, data=[Category (1, Life ), Category (2, liddffd)], total=null}
2021-11-14 22:25:37:929 [http-nio-8081-exec-6] INFO  com.ivan.sunnyblog.web.aop.ControllerAspect *** Request Success ***: 9ms GET URI=/api/admin/article/10005, methodName=com.ivan.sunnyblog.web.controller.ArticleController.getArticleDetail, args=[10005], result=ResultInfo{info='null', status=0, data=ArticleDetailVo{categoryId=1, BaseArticleVo{articleId=10005, status=1, title='dd', description='This is the doc of React markdown editor lite.
Enjoy!!', content='| Head | Head | Head | Head |
| --- | --- | --- | --- |
| Data | Data | Data | Data |
| Data | Data | Data | Data |

## æ‰‹æŠŠæ‰‹æ•™ä½ å†™ä¸€ä¸ªmarkdownç¼–è¾‘å™¨

> ç¬”è€…åœ¨18å¹´å¹´æœ«çš„æ—¶å€™æŽ¥åˆ°ä¸€ä¸ªå¼€å‘ä»»åŠ¡â€”â€”æ­å»ºä¸€ä¸ªAIé¡¹ç›®çš„å¼€æ”¾å¹³å°ï¼Œå…¶ä¸­çš„äº§å“æ–‡æ¡£ä¸ºè½¬åŒ–ä¸ºHTMLæ ¼å¼çš„markdownæ–‡æ¡£ã€‚è€ƒè™‘åˆ°æ–‡æ¡£çš„å³æ—¶æ›´æ–°ï¼Œå°†æ–‡æ¡£ä¿¡æ¯åšæˆäº†AjaxæŽ¥å£çš„å½¢å¼ã€‚å› æ­¤ç®¡ç†åŽå°åªéœ€å°†textareaè¡¨å•çš„å†…å®¹é€šè¿‡markdownè§£æžå™¨è¿›è¡ŒHTMLæ ¼å¼è½¬åŒ–ï¼Œç„¶åŽå°†markdownå†…å®¹å’Œç»è½¬åŒ–çš„HTMLæ–‡æ¡£éƒ½ä¿å­˜åˆ°æ•°æ®åº“å³å¯ã€‚
> åŸºæœ¬éœ€æ±‚å®ŒæˆåŽï¼Œä¸ºäº†æ›´å¥½çš„ç”¨æˆ·ä½“éªŒï¼Œè€ƒè™‘å°†å¸¸ç”¨çš„ç¼–è¾‘åŠŸèƒ½æ·»åŠ è¿›æ¥ã€‚æ”¹è¿›ç‰ˆä¸ä»…æ”¯æŒäº†å¸¸ç”¨çš„æ–‡æœ¬ç¼–è¾‘åŠŸèƒ½ï¼Œè¿˜å®žçŽ°çš„UIç•Œé¢çš„é…ç½®åŒ–ï¼Œè‡ªå®šä¹‰è¯­æ³•è§£æžå™¨ã€‚æœ¬ç€é€ ç¦ä¼¸æ‰‹å…šçš„ç›®çš„ï¼Œä»¥åŠç§¯ç´¯äº›å¼€æºç»éªŒï¼Œç¬”è€…å°†è¯¥react ç»„ä»¶ [react-markdown-editor-lite](https://github.com/HarryChen0506/react-markdown-editor-lite) è¿›è¡Œäº†å°è£…æ”¹é€ ï¼Œå¹¶ä¸”å‘å¸ƒåˆ°äº†å¼€æºç¤¾åŒºã€‚

### é¢„è§ˆ
åœ¨çº¿ä½“éªŒ [https://harrychen0506.github.io/react-markdown-editor-lite/](https://harrychen0506.github.io/react-markdown-editor-lite/)

![image](https://github.com//HarryChen0506/react-markdown-editor-lite/blob/master/image/react-markdown-editor-lite-v1.0.0.PNG?raw=true)

### ç‰¹ç‚¹
* è½»é‡ã€åŸºäºŽReact
* UIå¯é…ç½®, å¦‚åªæ˜¾ç¤ºç¼–è¾‘åŒºæˆ–é¢„è§ˆåŒº
* æ”¯æŒè‡ªå®šä¹‰markdownè¯­æ³•è§£æžå™¨,è¯­æ³•é«˜äº®ç­‰
* æ”¯æŒå¸¸ç”¨çš„markdownç¼–è¾‘åŠŸèƒ½ï¼Œå¦‚åŠ ç²—ï¼Œæ–œä½“ç­‰ç­‰...
* æ”¯æŒåŠŸèƒ½æŒ‰é’®æ’æ‹”åŒ–ï¼Œç”¨æˆ·å¯ä»¥è‡ªå®šä¹‰æ‰©å±•ç»„ä»¶
* æ”¯æŒç¼–è¾‘åŒºå’Œé¢„è§ˆåŒºåŒæ­¥æ»šåŠ¨

### å¼€å‘å¿ƒå¾—

- æ–‡æœ¬ç¼–è¾‘

  å¤§å¤šæ•°å¸¸è§çš„ç¼–è¾‘å™¨ï¼ŒåŒ…æ‹¬å¯Œæ–‡æœ¬ç¼–è¾‘å™¨ï¼Œåˆ©ç”¨äº†æŸäº›å…ƒç´ å¦‚divçš„contenteditableå±žæ€§ï¼Œé…åˆselectionã€rangeã€execCommandç­‰APIï¼Œå®žçŽ°äº†å¯Œæ–‡æœ¬ç¼–è¾‘åŠŸèƒ½ã€‚è¿™é‡Œé¢çš„å®žçŽ°æ¯”è¾ƒå¤æ‚ï¼Œæ‰€ä»¥æœ‰äº†"[ä¸ºä»€ä¹ˆéƒ½è¯´å¯Œæ–‡æœ¬ç¼–è¾‘å™¨æ˜¯å¤©å‘ï¼Ÿ](https://www.zhihu.com/question/38699645)"è¿™ä¸ªè¯´æ³•ã€‚

  è€Œmarkdownç¼–è¾‘å™¨ï¼Œæ ¸å¿ƒçš„å¤„ç†å†…å®¹ä¸ºç®€å•è¯­æ³•çš„çº¯æ–‡æœ¬ï¼Œå¤æ‚åº¦ç›¸å¯¹æ¥è¯´æ¯”è¾ƒä½Žï¼Œå¹¶ä¸”inputæ ‡ç­¾è‡ªå¸¦onSelectäº‹ä»¶ï¼Œå¯ä»¥å¾ˆæ–¹ä¾¿çš„èŽ·å–é€‰æ‹©ä¿¡æ¯ï¼ˆé€‰æ‹©èµ·å§‹ä½ç½®å’Œé€‰æ‹©æ–‡æœ¬å€¼ï¼‰ï¼Œå› æ­¤è¦æƒ³å®žçŽ°ç¼–è¾‘åŠŸèƒ½ï¼Œåªéœ€å°†è¦æ”¹åŠ¨çš„å†…å®¹è¿›è¡Œæ–‡æœ¬è½¬æ¢ï¼Œç„¶åŽè¿›è¡Œé‡æ–°æ‹¼æŽ¥é¦–å°¾ï¼Œå¤§åŠŸå‘Šæˆã€‚
  
- markdownè§£æž

  è€ƒå¯Ÿäº†å‡ ä¸ªç¤¾åŒºæµè¡Œçš„markdownè§£æžå™¨ï¼Œæ¯”è¾ƒæµè¡Œçš„æœ‰[markdown](https://www.npmjs.com/package/markdown), [markdown-it](https://www.npmjs.com/package/markdown-it), [marked](https://www.npmjs.com/package/marked) ç­‰ç­‰ã€‚ç»¼åˆè€ƒè™‘æ‰©å±•æ€§ä»¥åŠç¨³å®šæ€§ï¼Œç¬”è€…æŽ¨èä½¿ç”¨markdown-itä½œä¸ºmarkdownçš„è¯æ³•è§£æžå™¨ï¼Œå› ä¸ºè¯¥è§£æžå™¨æœ‰æ¯”è¾ƒå¤šçš„æ’ä»¶ï¼Œå¹¶ä¸”æ”¯æŒè¯­æ³•é«˜äº®ã€‚

- åŒæ­¥æ»šåŠ¨

  å½“é€‰æ‹©åˆ†æ ç¼–è¾‘çš„æ—¶å€™ï¼Œæ»šåŠ¨å·¦ä¾§çš„ç¼–è¾‘åŒºï¼Œå³ä¾§çš„é¢„è§ˆåŒºèƒ½è‡ªåŠ¨æ»šåŠ¨åˆ°å¯¹åº”çš„åŒºåŸŸã€‚æ–¹æ¡ˆå‚è€ƒäº†ã€Š[æ‰‹æŠŠæ‰‹æ•™ä½ ç”¨ 100è¡Œä»£ç å®žçŽ°åŸºäºŽ reactçš„ markdown è¾“å…¥ + å³æ—¶é¢„è§ˆåœ¨çº¿ç¼–è¾‘å™¨ï¼ˆä¸€ï¼‰](https://github.com/accforgit/blog-data/blob/master/%E5%9C%A8%E7%BA%BF%E7%BC%96%E8%BE%91%E5%99%A8/README/README1.md)ã€‹ã€‚åªéœ€å…ˆè®¡ç®—å‡ºè¾“å…¥æ¡†å®¹å™¨å…ƒç´ ä¸Žé¢„è§ˆæ¡†å®¹å™¨å…ƒç´ ä¹‹é—´æœ€å¤§scrollèŒƒå›´çš„æ¯”ä¾‹å€¼ï¼Œç„¶åŽæ ¹æ®ä¸»åŠ¨æ»šåŠ¨å…ƒç´ è‡ªèº«çš„scrollTopåšç›¸åº”çš„æ¯”ä¾‹æ¢ç®—ï¼Œå³å¯çŸ¥é“å¯¹æ–¹åŒºåŸŸçš„scrollTopå€¼ã€‚

- å…³äºŽUI
 
  - é¡¹ç›®çš„å­—ä½“åº“é€‰æ‹©äº†Font Awesomeé£Žæ ¼ï¼Œå¹¶ä¸”åªé€‰å–äº†é¡¹ç›®æ‰€éœ€è¦çš„ä¸€äº›å›¾æ ‡ã€‚
  - ç¼–è¾‘å™¨çš„æ•´ä½“csså‡å¯é€šè¿‡å…¨å±€è¦†ç›–çš„å½¢å¼è¿›è¡Œè‡ªå®šä¹‰ã€‚ç›®å‰æš‚æ—¶åªæ”¯æŒç°è‰²ä¸»é¢˜ã€‚
  - ç¼–è¾‘å™¨çš„æ˜¾ç¤ºåŒºåŸŸåŒ…æ‹¬èœå•æ ï¼Œç¼–è¾‘å™¨ï¼Œé¢„è§ˆåŒºï¼Œå·¥å…·æ ï¼Œé€šè¿‡é…ç½®ç»„ä»¶çš„configå±žæ€§ï¼Œå¯ä»¥é€‰æ‹©é»˜è®¤çš„å±•ç¤ºåŒºåŸŸã€‚
  
### Install

```js
npm install react-markdown-editor-lite --save
```

### Props

| Property | Description | Type | default | Remarks |
| --- | --- | --- | --- | --- |
| value | markdown content | String | '' | required |
| style | component container style | Object | {height: '100%'} | not required |
| config | component config | Object | {view: {...}, logger: {...}} | not required |
| onChange | emitting when editor has changed | Function | ({html, md}) => {} | not required |
| onImageUpload | when image uploaded, callback emitting will get image markdown text | (file: File, callback: (url: string) => void) => void; | ({file, callback}) => {} | not required |
| renderHTML | Render markdown text to HTML. You can return either string, function or Promise | (text: string) => string|function|Promise | none | **required** |

### Example

``` js
'use strict';
import React from 'react'
import ReactDOM from 'react-dom'
import MdEditor from 'react-markdown-editor-lite'
import MarkdownIt from 'markdown-it'
import emoji from 'markdown-it-emoji'
import subscript from 'markdown-it-sub'
import superscript from 'markdown-it-sup'
import footnote from 'markdown-it-footnote'
import deflist from 'markdown-it-deflist'
import abbreviation from 'markdown-it-abbr'
import insert from 'markdown-it-ins'
import mark from 'markdown-it-mark'
import tasklists from 'markdown-it-task-lists'
import hljs from 'highlight.js'
import 'highlight.js/styles/atom-one-light.css'
// import 'highlight.js/styles/github.css'
import './index.less';

const MOCK_DATA = "I Love React."
export default class Demo extends React.Component {
  mdEditor = null
  mdParser = null
  constructor(props) {
    super(props)
    // initial a parsera
    this.mdParser = new MarkdownIt({
      html: true,
      linkify: true,
      typographer: true,
      highlight: function (str, lang) {
        if (lang && hljs.getLanguage(lang)) {
          try {
            return hljs.highlight(lang, str).value
          } catch (__) {}
        }    
        return '' // use external default escaping
      }
    })
    .use(emoji)
    .use(subscript)
    .use(superscript)
    .use(footnote)
    .use(deflist)
    .use(abbreviation)
    .use(insert)
    .use(mark)
    .use(tasklists, { enabled: this.taskLists })
    this.renderHTML = this.renderHTML.bind(this)
  }
  handleEditorChange({html, md}) {
    console.log('handleEditorChange', html, md)
  }
  handleImageUpload(file, callback) {
    const reader = new FileReader()
    reader.onload = () => {      
      const convertBase64UrlToBlob = (urlData) => {  
        let arr = urlData.split(','), mime = arr[0].match(/:(.*?);/)[1]
        let bstr = atob(arr[1])
        let n = bstr.length
        let u8arr = new Uint8Array(n)
        while (n--) {
          u8arr[n] = bstr.charCodeAt(n)
        }
        return new Blob([u8arr], {type:mime})
      }
      const blob = convertBase64UrlToBlob(reader.result)
      setTimeout(() => {
        // setTimeout æ¨¡æ‹Ÿå¼‚æ­¥ä¸Šä¼ å›¾ç‰‡
        // å½“å¼‚æ­¥ä¸Šä¼ èŽ·å–å›¾ç‰‡åœ°å€åŽï¼Œæ‰§è¡Œcalbackå›žè°ƒï¼ˆå‚æ•°ä¸ºimageUrlå­—ç¬¦ä¸²ï¼‰ï¼Œå³å¯å°†å›¾ç‰‡åœ°å€å†™å…¥markdown
        callback('https://avatars0.githubusercontent.com/u/21263805?s=40&v=4')
      }, 1000)
    }
    reader.readAsDataURL(file)
  }
  renderHTML(text) {
    // æ¨¡æ‹Ÿå¼‚æ­¥æ¸²æŸ“Markdown
    return new Promise((resolve) => {
      setTimeout(() => {
        resolve(this.mdParser.render(text))
      }, 1000)
    })
  }
  handleGetMdValue = () => {   
    this.mdEditor && alert(this.mdEditor.getMdValue())      
  }
  handleGetHtmlValue = () => {    
    this.mdEditor && alert(this.mdEditor.getHtmlValue())
  }
  render() {
    return (      
      <div>
        <nav>
          <button onClick={this.handleGetMdValue} >getMdValue</button>  
          <button onClick={this.handleGetHtmlValue} >getHtmlValue</button>  
        </nav>
        <section style="height: 500px">
          <MdEditor 
            ref={node => this.mdEditor = node}
            value={MOCK_DATA}
            style={{height: '400px'}}
            renderHTML={this.renderHTML}
            config={{
              view: {
                menu: true,
                md: true,
                html: true
              },
              imageUrl: 'https://octodex.github.com/images/minion.png'
            }}
            onChange={this.handleEditorChange} 
            onImageUpload={this.handleImageUpload}
          />
        </section>                        
      </div>      
    )
  }
}
```

### æœ€åŽ

   æ¬¢è¿Žå¤§å®¶ä½¿ç”¨å’Œåé¦ˆï¼Œ[é¡¹ç›®åœ°å€](https://github.com/HarryChen0506/react-markdown-editor-lite) (https://github.com/HarryChen0506/react-markdown-editor-lite)ï¼Œ ä½ çš„ç‚¹èµžå°†æ˜¯æˆ‘èŽ«å¤§çš„åŠ¨åŠ›ðŸ˜Š

', firstPicture='', viewCount=0, createDate='Sun Nov 07 14:09:29 EST 2021', updateDate='Mon Nov 08 09:15:09 EST 2021'}}, total=null}
2021-11-14 22:25:43:939 [http-nio-8081-exec-8] INFO  com.ivan.sunnyblog.web.res.S3ResourceManager uploading file to s3
2021-11-14 22:25:44:151 [http-nio-8081-exec-8] INFO  com.ivan.sunnyblog.web.res.S3ResourceManager uploading done. returned url: https://s3.ca-central-1.amazonaws.com/res-blog-public/res-dev/blog_1636946743939_1.png
2021-11-14 22:25:44:152 [http-nio-8081-exec-8] INFO  com.ivan.sunnyblog.web.aop.ControllerAspect *** Request Success ***: 213ms POST URI=/api/upload, methodName=com.ivan.sunnyblog.web.controller.ResourceController.upload, args=[org.springframework.web.multipart.support.StandardMultipartHttpServletRequest$StandardMultipartFile@4b812469], result=ResultInfo{info='null', status=0, data=https://s3.ca-central-1.amazonaws.com/res-blog-public/res-dev/blog_1636946743939_1.png, total=null}
2021-11-14 22:31:50:948 [http-nio-8081-exec-1] INFO  com.ivan.sunnyblog.base.utils.BaseLogger updateing article
2021-11-14 22:31:50:973 [http-nio-8081-exec-1] INFO  com.ivan.sunnyblog.web.aop.ControllerAspect *** Request Success ***: 34ms POST URI=/api/admin/article, methodName=com.ivan.sunnyblog.web.controller.ArticleController.editArticle, args=[ArticleDetailVo{categoryId=1, BaseArticleVo{articleId=10005, status=1, title='dd', description='This is the doc of React markdown editor lite.
Enjoy!!', content='| Head | Head | Head | Head |
| --- | --- | --- | --- |
| Data | Data | Data | Data |
| Data | Data | Data | Data |

## æ‰‹æŠŠæ‰‹æ•™ä½ å†™ä¸€ä¸ªmarkdownç¼–è¾‘å™¨

> ç¬”è€…åœ¨18å¹´å¹´æœ«çš„æ—¶å€™æŽ¥åˆ°ä¸€ä¸ªå¼€å‘ä»»åŠ¡â€”â€”æ­å»ºä¸€ä¸ªAIé¡¹ç›®çš„å¼€æ”¾å¹³å°ï¼Œå…¶ä¸­çš„äº§å“æ–‡æ¡£ä¸ºè½¬åŒ–ä¸ºHTMLæ ¼å¼çš„markdownæ–‡æ¡£ã€‚è€ƒè™‘åˆ°æ–‡æ¡£çš„å³æ—¶æ›´æ–°ï¼Œå°†æ–‡æ¡£ä¿¡æ¯åšæˆäº†AjaxæŽ¥å£çš„å½¢å¼ã€‚å› æ­¤ç®¡ç†åŽå°åªéœ€å°†textareaè¡¨å•çš„å†…å®¹é€šè¿‡markdownè§£æžå™¨è¿›è¡ŒHTMLæ ¼å¼è½¬åŒ–ï¼Œç„¶åŽå°†markdownå†…å®¹å’Œç»è½¬åŒ–çš„HTMLæ–‡æ¡£éƒ½ä¿å­˜åˆ°æ•°æ®åº“å³å¯ã€‚
> åŸºæœ¬éœ€æ±‚å®ŒæˆåŽï¼Œä¸ºäº†æ›´å¥½çš„ç”¨æˆ·ä½“éªŒï¼Œè€ƒè™‘å°†å¸¸ç”¨çš„ç¼–è¾‘åŠŸèƒ½æ·»åŠ è¿›æ¥ã€‚æ”¹è¿›ç‰ˆä¸ä»…æ”¯æŒäº†å¸¸ç”¨çš„æ–‡æœ¬ç¼–è¾‘åŠŸèƒ½ï¼Œè¿˜å®žçŽ°çš„UIç•Œé¢çš„é…ç½®åŒ–ï¼Œè‡ªå®šä¹‰è¯­æ³•è§£æžå™¨ã€‚æœ¬ç€é€ ç¦ä¼¸æ‰‹å…šçš„ç›®çš„ï¼Œä»¥åŠç§¯ç´¯äº›å¼€æºç»éªŒï¼Œç¬”è€…å°†è¯¥react ç»„ä»¶ [react-markdown-editor-lite](https://github.com/HarryChen0506/react-markdown-editor-lite) è¿›è¡Œäº†å°è£…æ”¹é€ ï¼Œå¹¶ä¸”å‘å¸ƒåˆ°äº†å¼€æºç¤¾åŒºã€‚

### é¢„è§ˆ
åœ¨çº¿ä½“éªŒ [https://harrychen0506.github.io/react-markdown-editor-lite/](https://harrychen0506.github.io/react-markdown-editor-lite/)

![image](https://github.com//HarryChen0506/react-markdown-editor-lite/blob/master/image/react-markdown-editor-lite-v1.0.0.PNG?raw=true)

### ç‰¹ç‚¹
* è½»é‡ã€åŸºäºŽReact
* UIå¯é…ç½®, å¦‚åªæ˜¾ç¤ºç¼–è¾‘åŒºæˆ–é¢„è§ˆåŒº
* æ”¯æŒè‡ªå®šä¹‰markdownè¯­æ³•è§£æžå™¨,è¯­æ³•é«˜äº®ç­‰
* æ”¯æŒå¸¸ç”¨çš„markdownç¼–è¾‘åŠŸèƒ½ï¼Œå¦‚åŠ ç²—ï¼Œæ–œä½“ç­‰ç­‰...
* æ”¯æŒåŠŸèƒ½æŒ‰é’®æ’æ‹”åŒ–ï¼Œç”¨æˆ·å¯ä»¥è‡ªå®šä¹‰æ‰©å±•ç»„ä»¶
* æ”¯æŒç¼–è¾‘åŒºå’Œé¢„è§ˆåŒºåŒæ­¥æ»šåŠ¨

### å¼€å‘å¿ƒå¾—

- æ–‡æœ¬ç¼–è¾‘

  å¤§å¤šæ•°å¸¸è§çš„ç¼–è¾‘å™¨ï¼ŒåŒ…æ‹¬å¯Œæ–‡æœ¬ç¼–è¾‘å™¨ï¼Œåˆ©ç”¨äº†æŸäº›å…ƒç´ å¦‚divçš„contenteditableå±žæ€§ï¼Œé…åˆselectionã€rangeã€execCommandç­‰APIï¼Œå®žçŽ°äº†å¯Œæ–‡æœ¬ç¼–è¾‘åŠŸèƒ½ã€‚è¿™é‡Œé¢çš„å®žçŽ°æ¯”è¾ƒå¤æ‚ï¼Œæ‰€ä»¥æœ‰äº†"[ä¸ºä»€ä¹ˆéƒ½è¯´å¯Œæ–‡æœ¬ç¼–è¾‘å™¨æ˜¯å¤©å‘ï¼Ÿ](https://www.zhihu.com/question/38699645)"è¿™ä¸ªè¯´æ³•ã€‚

  è€Œmarkdownç¼–è¾‘å™¨ï¼Œæ ¸å¿ƒçš„å¤„ç†å†…å®¹ä¸ºç®€å•è¯­æ³•çš„çº¯æ–‡æœ¬ï¼Œå¤æ‚åº¦ç›¸å¯¹æ¥è¯´æ¯”è¾ƒä½Žï¼Œå¹¶ä¸”inputæ ‡ç­¾è‡ªå¸¦onSelectäº‹ä»¶ï¼Œå¯ä»¥å¾ˆæ–¹ä¾¿çš„èŽ·å–é€‰æ‹©ä¿¡æ¯ï¼ˆé€‰æ‹©èµ·å§‹ä½ç½®å’Œé€‰æ‹©æ–‡æœ¬å€¼ï¼‰ï¼Œå› æ­¤è¦æƒ³å®žçŽ°ç¼–è¾‘åŠŸèƒ½ï¼Œåªéœ€å°†è¦æ”¹åŠ¨çš„å†…å®¹è¿›è¡Œæ–‡æœ¬è½¬æ¢ï¼Œç„¶åŽè¿›è¡Œé‡æ–°æ‹¼æŽ¥é¦–å°¾ï¼Œå¤§åŠŸå‘Šæˆã€‚
  
- markdownè§£æž

  è€ƒå¯Ÿäº†å‡ ä¸ªç¤¾åŒºæµè¡Œçš„markdownè§£æžå™¨ï¼Œæ¯”è¾ƒæµè¡Œçš„æœ‰[markdown](https://www.npmjs.com/package/markdown), [markdown-it](https://www.npmjs.com/package/markdown-it), [marked](https://www.npmjs.com/package/marked) ç­‰ç­‰ã€‚ç»¼åˆè€ƒè™‘æ‰©å±•æ€§ä»¥åŠç¨³å®šæ€§ï¼Œç¬”è€…æŽ¨èä½¿ç”¨markdown-itä½œä¸ºmarkdownçš„è¯æ³•è§£æžå™¨ï¼Œå› ä¸ºè¯¥è§£æžå™¨æœ‰æ¯”è¾ƒå¤šçš„æ’ä»¶ï¼Œå¹¶ä¸”æ”¯æŒè¯­æ³•é«˜äº®ã€‚

- åŒæ­¥æ»šåŠ¨

  å½“é€‰æ‹©åˆ†æ ç¼–è¾‘çš„æ—¶å€™ï¼Œæ»šåŠ¨å·¦ä¾§çš„ç¼–è¾‘åŒºï¼Œå³ä¾§çš„é¢„è§ˆåŒºèƒ½è‡ªåŠ¨æ»šåŠ¨åˆ°å¯¹åº”çš„åŒºåŸŸã€‚æ–¹æ¡ˆå‚è€ƒäº†ã€Š[æ‰‹æŠŠæ‰‹æ•™ä½ ç”¨ 100è¡Œä»£ç å®žçŽ°åŸºäºŽ reactçš„ markdown è¾“å…¥ + å³æ—¶é¢„è§ˆåœ¨çº¿ç¼–è¾‘å™¨ï¼ˆä¸€ï¼‰](https://github.com/accforgit/blog-data/blob/master/%E5%9C%A8%E7%BA%BF%E7%BC%96%E8%BE%91%E5%99%A8/README/README1.md)ã€‹ã€‚åªéœ€å…ˆè®¡ç®—å‡ºè¾“å…¥æ¡†å®¹å™¨å…ƒç´ ä¸Žé¢„è§ˆæ¡†å®¹å™¨å…ƒç´ ä¹‹é—´æœ€å¤§scrollèŒƒå›´çš„æ¯”ä¾‹å€¼ï¼Œç„¶åŽæ ¹æ®ä¸»åŠ¨æ»šåŠ¨å…ƒç´ è‡ªèº«çš„scrollTopåšç›¸åº”çš„æ¯”ä¾‹æ¢ç®—ï¼Œå³å¯çŸ¥é“å¯¹æ–¹åŒºåŸŸçš„scrollTopå€¼ã€‚

- å…³äºŽUI
 
  - é¡¹ç›®çš„å­—ä½“åº“é€‰æ‹©äº†Font Awesomeé£Žæ ¼ï¼Œå¹¶ä¸”åªé€‰å–äº†é¡¹ç›®æ‰€éœ€è¦çš„ä¸€äº›å›¾æ ‡ã€‚
  - ç¼–è¾‘å™¨çš„æ•´ä½“csså‡å¯é€šè¿‡å…¨å±€è¦†ç›–çš„å½¢å¼è¿›è¡Œè‡ªå®šä¹‰ã€‚ç›®å‰æš‚æ—¶åªæ”¯æŒç°è‰²ä¸»é¢˜ã€‚
  - ç¼–è¾‘å™¨çš„æ˜¾ç¤ºåŒºåŸŸåŒ…æ‹¬èœå•æ ï¼Œç¼–è¾‘å™¨ï¼Œé¢„è§ˆåŒºï¼Œå·¥å…·æ ï¼Œé€šè¿‡é…ç½®ç»„ä»¶çš„configå±žæ€§ï¼Œå¯ä»¥é€‰æ‹©é»˜è®¤çš„å±•ç¤ºåŒºåŸŸã€‚
  
### Install

```js
npm install react-markdown-editor-lite --save
```

### Props

| Property | Description | Type | default | Remarks |
| --- | --- | --- | --- | --- |
| value | markdown content | String | '' | required |
| style | component container style | Object | {height: '100%'} | not required |
| config | component config | Object | {view: {...}, logger: {...}} | not required |
| onChange | emitting when editor has changed | Function | ({html, md}) => {} | not required |
| onImageUpload | when image uploaded, callback emitting will get image markdown text | (file: File, callback: (url: string) => void) => void; | ({file, callback}) => {} | not required |
| renderHTML | Render markdown text to HTML. You can return either string, function or Promise | (text: string) => string|function|Promise | none | **required** |

### Example

``` js
'use strict';
import React from 'react'
import ReactDOM from 'react-dom'
import MdEditor from 'react-markdown-editor-lite'
import MarkdownIt from 'markdown-it'
import emoji from 'markdown-it-emoji'
import subscript from 'markdown-it-sub'
import superscript from 'markdown-it-sup'
import footnote from 'markdown-it-footnote'
import deflist from 'markdown-it-deflist'
import abbreviation from 'markdown-it-abbr'
import insert from 'markdown-it-ins'
import mark from 'markdown-it-mark'
import tasklists from 'markdown-it-task-lists'
import hljs from 'highlight.js'
import 'highlight.js/styles/atom-one-light.css'
// import 'highlight.js/styles/github.css'
import './index.less';

const MOCK_DATA = "I Love React."
export default class Demo extends React.Component {
  mdEditor = null
  mdParser = null
  constructor(props) {
    super(props)
    // initial a parsera
    this.mdParser = new MarkdownIt({
      html: true,
      linkify: true,
      typographer: true,
      highlight: function (str, lang) {
        if (lang && hljs.getLanguage(lang)) {
          try {
            return hljs.highlight(lang, str).value
          } catch (__) {}
        }    
        return '' // use external default escaping
      }
    })
    .use(emoji)
    .use(subscript)
    .use(superscript)
    .use(footnote)
    .use(deflist)
    .use(abbreviation)
    .use(insert)
    .use(mark)
    .use(tasklists, { enabled: this.taskLists })
    this.renderHTML = this.renderHTML.bind(this)
  }
  handleEditorChange({html, md}) {
    console.log('handleEditorChange', html, md)
  }
  handleImageUpload(file, callback) {
    const reader = new FileReader()
    reader.onload = () => {      
      const convertBase64UrlToBlob = (urlData) => {  
        let arr = urlData.split(','), mime = arr[0].match(/:(.*?);/)[1]
        let bstr = atob(arr[1])
        let n = bstr.length
        let u8arr = new Uint8Array(n)
        while (n--) {
          u8arr[n] = bstr.charCodeAt(n)
        }
        return new Blob([u8arr], {type:mime})
      }
      const blob = convertBase64UrlToBlob(reader.result)
      setTimeout(() => {
        // setTimeout æ¨¡æ‹Ÿå¼‚æ­¥ä¸Šä¼ å›¾ç‰‡
        // å½“å¼‚æ­¥ä¸Šä¼ èŽ·å–å›¾ç‰‡åœ°å€åŽï¼Œæ‰§è¡Œcalbackå›žè°ƒï¼ˆå‚æ•°ä¸ºimageUrlå­—ç¬¦ä¸²ï¼‰ï¼Œå³å¯å°†å›¾ç‰‡åœ°å€å†™å…¥markdown
        callback('https://avatars0.githubusercontent.com/u/21263805?s=40&v=4')
      }, 1000)
    }
    reader.readAsDataURL(file)
  }
  renderHTML(text) {
    // æ¨¡æ‹Ÿå¼‚æ­¥æ¸²æŸ“Markdown
    return new Promise((resolve) => {
      setTimeout(() => {
        resolve(this.mdParser.render(text))
      }, 1000)
    })
  }
  handleGetMdValue = () => {   
    this.mdEditor && alert(this.mdEditor.getMdValue())      
  }
  handleGetHtmlValue = () => {    
    this.mdEditor && alert(this.mdEditor.getHtmlValue())
  }
  render() {
    return (      
      <div>
        <nav>
          <button onClick={this.handleGetMdValue} >getMdValue</button>  
          <button onClick={this.handleGetHtmlValue} >getHtmlValue</button>  
        </nav>
        <section style="height: 500px">
          <MdEditor 
            ref={node => this.mdEditor = node}
            value={MOCK_DATA}
            style={{height: '400px'}}
            renderHTML={this.renderHTML}
            config={{
              view: {
                menu: true,
                md: true,
                html: true
              },
              imageUrl: 'https://octodex.github.com/images/minion.png'
            }}
            onChange={this.handleEditorChange} 
            onImageUpload={this.handleImageUpload}
          />
        </section>                        
      </div>      
    )
  }
}
```

### æœ€åŽ

   æ¬¢è¿Žå¤§å®¶ä½¿ç”¨å’Œåé¦ˆï¼Œ[é¡¹ç›®åœ°å€](https://github.com/HarryChen0506/react-markdown-editor-lite) (https://github.com/HarryChen0506/react-markdown-editor-lite)ï¼Œ ä½ çš„ç‚¹èµžå°†æ˜¯æˆ‘èŽ«å¤§çš„åŠ¨åŠ›ðŸ˜Š

![1.png](https://s3.ca-central-1.amazonaws.com/res-blog-public/res-dev/blog_1636946743939_1.png)', firstPicture='', viewCount=null, createDate='null', updateDate='null'}}], result=ResultInfo{info='null', status=0, data=null, total=null}
2021-11-14 22:31:51:024 [http-nio-8081-exec-5] INFO  com.ivan.sunnyblog.web.aop.ControllerAspect *** Request Success ***: 1ms GET URI=/api/admin/category, methodName=com.ivan.sunnyblog.web.controller.CategoryContoller.getCategoryList, args=[SearchVo{page=1, limit=10, categoryId=null, total=null}], result=ResultInfo{info='null', status=0, data=[Category (1, Life ), Category (2, liddffd)], total=null}
2021-11-14 22:31:54:521 [HikariPool-1 housekeeper] WARN  com.zaxxer.hikari.pool.HikariPool HikariPool-1 - Thread starvation or clock leap detected (housekeeper delta=4m2s639ms).
2021-11-14 22:32:05:838 [http-nio-8081-exec-2] INFO  com.ivan.sunnyblog.web.aop.ControllerAspect *** Request Success ***: 44ms GET URI=/api/articles, methodName=com.ivan.sunnyblog.web.controller.ArticleController.getPublicArticles, args=[SearchVo{page=1, limit=10, categoryId=null, total=null}], result=ResultInfo{info='null', status=0, data=[ArticleVo{userInfo=UserInfoVo{userId=100001, nickName='ivan', userName='ivan'}, category=CategoryVo{categoryId=1, name='Life ', articleCount=null}, BaseArticleVo{articleId=10005, status=1, title='dd', description='This is the doc of React markdown editor lite.
Enjoy!!', content='null', firstPicture='', viewCount=0, createDate='Sun Nov 07 14:09:29 EST 2021', updateDate='Sun Nov 14 22:31:50 EST 2021'}}, ArticleVo{userInfo=UserInfoVo{userId=100001, nickName='ivan', userName='ivan'}, category=CategoryVo{categoryId=2, name='liddffd', articleCount=null}, BaseArticleVo{articleId=10004, status=1, title='Spring boot', description='rerwerwer', content='null', firstPicture='null', viewCount=4, createDate='Tue Oct 12 15:58:26 EDT 2021', updateDate='Fri Nov 12 00:48:00 EST 2021'}}], total=2}
2021-11-14 22:32:29:155 [http-nio-8081-exec-7] INFO  com.ivan.sunnyblog.web.aop.ControllerAspect *** Request Success ***: 13ms GET URI=/api/articles, methodName=com.ivan.sunnyblog.web.controller.ArticleController.getPublicArticles, args=[SearchVo{page=1, limit=10, categoryId=null, total=null}], result=ResultInfo{info='null', status=0, data=[ArticleVo{userInfo=UserInfoVo{userId=100001, nickName='ivan', userName='ivan'}, category=CategoryVo{categoryId=1, name='Life ', articleCount=null}, BaseArticleVo{articleId=10005, status=1, title='dd', description='This is the doc of React markdown editor lite.
Enjoy!!', content='null', firstPicture='', viewCount=0, createDate='Sun Nov 07 14:09:29 EST 2021', updateDate='Sun Nov 14 22:31:50 EST 2021'}}, ArticleVo{userInfo=UserInfoVo{userId=100001, nickName='ivan', userName='ivan'}, category=CategoryVo{categoryId=2, name='liddffd', articleCount=null}, BaseArticleVo{articleId=10004, status=1, title='Spring boot', description='rerwerwer', content='null', firstPicture='null', viewCount=4, createDate='Tue Oct 12 15:58:26 EDT 2021', updateDate='Fri Nov 12 00:48:00 EST 2021'}}], total=2}
2021-11-14 22:32:51:489 [http-nio-8081-exec-6] INFO  com.ivan.sunnyblog.web.aop.ControllerAspect *** Request Success ***: 17ms GET URI=/api/articles, methodName=com.ivan.sunnyblog.web.controller.ArticleController.getPublicArticles, args=[SearchVo{page=1, limit=10, categoryId=null, total=null}], result=ResultInfo{info='null', status=0, data=[ArticleVo{userInfo=UserInfoVo{userId=100001, nickName='ivan', userName='ivan'}, category=CategoryVo{categoryId=1, name='Life ', articleCount=null}, BaseArticleVo{articleId=10005, status=1, title='dd', description='This is the doc of React markdown editor lite.
Enjoy!!', content='null', firstPicture='', viewCount=0, createDate='Sun Nov 07 14:09:29 EST 2021', updateDate='Sun Nov 14 22:31:50 EST 2021'}}, ArticleVo{userInfo=UserInfoVo{userId=100001, nickName='ivan', userName='ivan'}, category=CategoryVo{categoryId=2, name='liddffd', articleCount=null}, BaseArticleVo{articleId=10004, status=1, title='Spring boot', description='rerwerwer', content='null', firstPicture='null', viewCount=4, createDate='Tue Oct 12 15:58:26 EDT 2021', updateDate='Fri Nov 12 00:48:00 EST 2021'}}], total=2}
2021-11-14 22:33:03:039 [http-nio-8081-exec-10] INFO  com.ivan.sunnyblog.web.aop.ControllerAspect *** Request Success ***: 6ms GET URI=/api/article/10005, methodName=com.ivan.sunnyblog.web.controller.ArticleController.getPublicArticleDetail, args=[10005], result=ResultInfo{info='null', status=0, data=ArticleDetailVo{categoryId=1, BaseArticleVo{articleId=10005, status=1, title='dd', description='This is the doc of React markdown editor lite.
Enjoy!!', content='| Head | Head | Head | Head |
| --- | --- | --- | --- |
| Data | Data | Data | Data |
| Data | Data | Data | Data |

## æ‰‹æŠŠæ‰‹æ•™ä½ å†™ä¸€ä¸ªmarkdownç¼–è¾‘å™¨

> ç¬”è€…åœ¨18å¹´å¹´æœ«çš„æ—¶å€™æŽ¥åˆ°ä¸€ä¸ªå¼€å‘ä»»åŠ¡â€”â€”æ­å»ºä¸€ä¸ªAIé¡¹ç›®çš„å¼€æ”¾å¹³å°ï¼Œå…¶ä¸­çš„äº§å“æ–‡æ¡£ä¸ºè½¬åŒ–ä¸ºHTMLæ ¼å¼çš„markdownæ–‡æ¡£ã€‚è€ƒè™‘åˆ°æ–‡æ¡£çš„å³æ—¶æ›´æ–°ï¼Œå°†æ–‡æ¡£ä¿¡æ¯åšæˆäº†AjaxæŽ¥å£çš„å½¢å¼ã€‚å› æ­¤ç®¡ç†åŽå°åªéœ€å°†textareaè¡¨å•çš„å†…å®¹é€šè¿‡markdownè§£æžå™¨è¿›è¡ŒHTMLæ ¼å¼è½¬åŒ–ï¼Œç„¶åŽå°†markdownå†…å®¹å’Œç»è½¬åŒ–çš„HTMLæ–‡æ¡£éƒ½ä¿å­˜åˆ°æ•°æ®åº“å³å¯ã€‚
> åŸºæœ¬éœ€æ±‚å®ŒæˆåŽï¼Œä¸ºäº†æ›´å¥½çš„ç”¨æˆ·ä½“éªŒï¼Œè€ƒè™‘å°†å¸¸ç”¨çš„ç¼–è¾‘åŠŸèƒ½æ·»åŠ è¿›æ¥ã€‚æ”¹è¿›ç‰ˆä¸ä»…æ”¯æŒäº†å¸¸ç”¨çš„æ–‡æœ¬ç¼–è¾‘åŠŸèƒ½ï¼Œè¿˜å®žçŽ°çš„UIç•Œé¢çš„é…ç½®åŒ–ï¼Œè‡ªå®šä¹‰è¯­æ³•è§£æžå™¨ã€‚æœ¬ç€é€ ç¦ä¼¸æ‰‹å…šçš„ç›®çš„ï¼Œä»¥åŠç§¯ç´¯äº›å¼€æºç»éªŒï¼Œç¬”è€…å°†è¯¥react ç»„ä»¶ [react-markdown-editor-lite](https://github.com/HarryChen0506/react-markdown-editor-lite) è¿›è¡Œäº†å°è£…æ”¹é€ ï¼Œå¹¶ä¸”å‘å¸ƒåˆ°äº†å¼€æºç¤¾åŒºã€‚

### é¢„è§ˆ
åœ¨çº¿ä½“éªŒ [https://harrychen0506.github.io/react-markdown-editor-lite/](https://harrychen0506.github.io/react-markdown-editor-lite/)

![image](https://github.com//HarryChen0506/react-markdown-editor-lite/blob/master/image/react-markdown-editor-lite-v1.0.0.PNG?raw=true)

### ç‰¹ç‚¹
* è½»é‡ã€åŸºäºŽReact
* UIå¯é…ç½®, å¦‚åªæ˜¾ç¤ºç¼–è¾‘åŒºæˆ–é¢„è§ˆåŒº
* æ”¯æŒè‡ªå®šä¹‰markdownè¯­æ³•è§£æžå™¨,è¯­æ³•é«˜äº®ç­‰
* æ”¯æŒå¸¸ç”¨çš„markdownç¼–è¾‘åŠŸèƒ½ï¼Œå¦‚åŠ ç²—ï¼Œæ–œä½“ç­‰ç­‰...
* æ”¯æŒåŠŸèƒ½æŒ‰é’®æ’æ‹”åŒ–ï¼Œç”¨æˆ·å¯ä»¥è‡ªå®šä¹‰æ‰©å±•ç»„ä»¶
* æ”¯æŒç¼–è¾‘åŒºå’Œé¢„è§ˆåŒºåŒæ­¥æ»šåŠ¨

### å¼€å‘å¿ƒå¾—

- æ–‡æœ¬ç¼–è¾‘

  å¤§å¤šæ•°å¸¸è§çš„ç¼–è¾‘å™¨ï¼ŒåŒ…æ‹¬å¯Œæ–‡æœ¬ç¼–è¾‘å™¨ï¼Œåˆ©ç”¨äº†æŸäº›å…ƒç´ å¦‚divçš„contenteditableå±žæ€§ï¼Œé…åˆselectionã€rangeã€execCommandç­‰APIï¼Œå®žçŽ°äº†å¯Œæ–‡æœ¬ç¼–è¾‘åŠŸèƒ½ã€‚è¿™é‡Œé¢çš„å®žçŽ°æ¯”è¾ƒå¤æ‚ï¼Œæ‰€ä»¥æœ‰äº†"[ä¸ºä»€ä¹ˆéƒ½è¯´å¯Œæ–‡æœ¬ç¼–è¾‘å™¨æ˜¯å¤©å‘ï¼Ÿ](https://www.zhihu.com/question/38699645)"è¿™ä¸ªè¯´æ³•ã€‚

  è€Œmarkdownç¼–è¾‘å™¨ï¼Œæ ¸å¿ƒçš„å¤„ç†å†…å®¹ä¸ºç®€å•è¯­æ³•çš„çº¯æ–‡æœ¬ï¼Œå¤æ‚åº¦ç›¸å¯¹æ¥è¯´æ¯”è¾ƒä½Žï¼Œå¹¶ä¸”inputæ ‡ç­¾è‡ªå¸¦onSelectäº‹ä»¶ï¼Œå¯ä»¥å¾ˆæ–¹ä¾¿çš„èŽ·å–é€‰æ‹©ä¿¡æ¯ï¼ˆé€‰æ‹©èµ·å§‹ä½ç½®å’Œé€‰æ‹©æ–‡æœ¬å€¼ï¼‰ï¼Œå› æ­¤è¦æƒ³å®žçŽ°ç¼–è¾‘åŠŸèƒ½ï¼Œåªéœ€å°†è¦æ”¹åŠ¨çš„å†…å®¹è¿›è¡Œæ–‡æœ¬è½¬æ¢ï¼Œç„¶åŽè¿›è¡Œé‡æ–°æ‹¼æŽ¥é¦–å°¾ï¼Œå¤§åŠŸå‘Šæˆã€‚
  
- markdownè§£æž

  è€ƒå¯Ÿäº†å‡ ä¸ªç¤¾åŒºæµè¡Œçš„markdownè§£æžå™¨ï¼Œæ¯”è¾ƒæµè¡Œçš„æœ‰[markdown](https://www.npmjs.com/package/markdown), [markdown-it](https://www.npmjs.com/package/markdown-it), [marked](https://www.npmjs.com/package/marked) ç­‰ç­‰ã€‚ç»¼åˆè€ƒè™‘æ‰©å±•æ€§ä»¥åŠç¨³å®šæ€§ï¼Œç¬”è€…æŽ¨èä½¿ç”¨markdown-itä½œä¸ºmarkdownçš„è¯æ³•è§£æžå™¨ï¼Œå› ä¸ºè¯¥è§£æžå™¨æœ‰æ¯”è¾ƒå¤šçš„æ’ä»¶ï¼Œå¹¶ä¸”æ”¯æŒè¯­æ³•é«˜äº®ã€‚

- åŒæ­¥æ»šåŠ¨

  å½“é€‰æ‹©åˆ†æ ç¼–è¾‘çš„æ—¶å€™ï¼Œæ»šåŠ¨å·¦ä¾§çš„ç¼–è¾‘åŒºï¼Œå³ä¾§çš„é¢„è§ˆåŒºèƒ½è‡ªåŠ¨æ»šåŠ¨åˆ°å¯¹åº”çš„åŒºåŸŸã€‚æ–¹æ¡ˆå‚è€ƒäº†ã€Š[æ‰‹æŠŠæ‰‹æ•™ä½ ç”¨ 100è¡Œä»£ç å®žçŽ°åŸºäºŽ reactçš„ markdown è¾“å…¥ + å³æ—¶é¢„è§ˆåœ¨çº¿ç¼–è¾‘å™¨ï¼ˆä¸€ï¼‰](https://github.com/accforgit/blog-data/blob/master/%E5%9C%A8%E7%BA%BF%E7%BC%96%E8%BE%91%E5%99%A8/README/README1.md)ã€‹ã€‚åªéœ€å…ˆè®¡ç®—å‡ºè¾“å…¥æ¡†å®¹å™¨å…ƒç´ ä¸Žé¢„è§ˆæ¡†å®¹å™¨å…ƒç´ ä¹‹é—´æœ€å¤§scrollèŒƒå›´çš„æ¯”ä¾‹å€¼ï¼Œç„¶åŽæ ¹æ®ä¸»åŠ¨æ»šåŠ¨å…ƒç´ è‡ªèº«çš„scrollTopåšç›¸åº”çš„æ¯”ä¾‹æ¢ç®—ï¼Œå³å¯çŸ¥é“å¯¹æ–¹åŒºåŸŸçš„scrollTopå€¼ã€‚

- å…³äºŽUI
 
  - é¡¹ç›®çš„å­—ä½“åº“é€‰æ‹©äº†Font Awesomeé£Žæ ¼ï¼Œå¹¶ä¸”åªé€‰å–äº†é¡¹ç›®æ‰€éœ€è¦çš„ä¸€äº›å›¾æ ‡ã€‚
  - ç¼–è¾‘å™¨çš„æ•´ä½“csså‡å¯é€šè¿‡å…¨å±€è¦†ç›–çš„å½¢å¼è¿›è¡Œè‡ªå®šä¹‰ã€‚ç›®å‰æš‚æ—¶åªæ”¯æŒç°è‰²ä¸»é¢˜ã€‚
  - ç¼–è¾‘å™¨çš„æ˜¾ç¤ºåŒºåŸŸåŒ…æ‹¬èœå•æ ï¼Œç¼–è¾‘å™¨ï¼Œé¢„è§ˆåŒºï¼Œå·¥å…·æ ï¼Œé€šè¿‡é…ç½®ç»„ä»¶çš„configå±žæ€§ï¼Œå¯ä»¥é€‰æ‹©é»˜è®¤çš„å±•ç¤ºåŒºåŸŸã€‚
  
### Install

```js
npm install react-markdown-editor-lite --save
```

### Props

| Property | Description | Type | default | Remarks |
| --- | --- | --- | --- | --- |
| value | markdown content | String | '' | required |
| style | component container style | Object | {height: '100%'} | not required |
| config | component config | Object | {view: {...}, logger: {...}} | not required |
| onChange | emitting when editor has changed | Function | ({html, md}) => {} | not required |
| onImageUpload | when image uploaded, callback emitting will get image markdown text | (file: File, callback: (url: string) => void) => void; | ({file, callback}) => {} | not required |
| renderHTML | Render markdown text to HTML. You can return either string, function or Promise | (text: string) => string|function|Promise | none | **required** |

### Example

``` js
'use strict';
import React from 'react'
import ReactDOM from 'react-dom'
import MdEditor from 'react-markdown-editor-lite'
import MarkdownIt from 'markdown-it'
import emoji from 'markdown-it-emoji'
import subscript from 'markdown-it-sub'
import superscript from 'markdown-it-sup'
import footnote from 'markdown-it-footnote'
import deflist from 'markdown-it-deflist'
import abbreviation from 'markdown-it-abbr'
import insert from 'markdown-it-ins'
import mark from 'markdown-it-mark'
import tasklists from 'markdown-it-task-lists'
import hljs from 'highlight.js'
import 'highlight.js/styles/atom-one-light.css'
// import 'highlight.js/styles/github.css'
import './index.less';

const MOCK_DATA = "I Love React."
export default class Demo extends React.Component {
  mdEditor = null
  mdParser = null
  constructor(props) {
    super(props)
    // initial a parsera
    this.mdParser = new MarkdownIt({
      html: true,
      linkify: true,
      typographer: true,
      highlight: function (str, lang) {
        if (lang && hljs.getLanguage(lang)) {
          try {
            return hljs.highlight(lang, str).value
          } catch (__) {}
        }    
        return '' // use external default escaping
      }
    })
    .use(emoji)
    .use(subscript)
    .use(superscript)
    .use(footnote)
    .use(deflist)
    .use(abbreviation)
    .use(insert)
    .use(mark)
    .use(tasklists, { enabled: this.taskLists })
    this.renderHTML = this.renderHTML.bind(this)
  }
  handleEditorChange({html, md}) {
    console.log('handleEditorChange', html, md)
  }
  handleImageUpload(file, callback) {
    const reader = new FileReader()
    reader.onload = () => {      
      const convertBase64UrlToBlob = (urlData) => {  
        let arr = urlData.split(','), mime = arr[0].match(/:(.*?);/)[1]
        let bstr = atob(arr[1])
        let n = bstr.length
        let u8arr = new Uint8Array(n)
        while (n--) {
          u8arr[n] = bstr.charCodeAt(n)
        }
        return new Blob([u8arr], {type:mime})
      }
      const blob = convertBase64UrlToBlob(reader.result)
      setTimeout(() => {
        // setTimeout æ¨¡æ‹Ÿå¼‚æ­¥ä¸Šä¼ å›¾ç‰‡
        // å½“å¼‚æ­¥ä¸Šä¼ èŽ·å–å›¾ç‰‡åœ°å€åŽï¼Œæ‰§è¡Œcalbackå›žè°ƒï¼ˆå‚æ•°ä¸ºimageUrlå­—ç¬¦ä¸²ï¼‰ï¼Œå³å¯å°†å›¾ç‰‡åœ°å€å†™å…¥markdown
        callback('https://avatars0.githubusercontent.com/u/21263805?s=40&v=4')
      }, 1000)
    }
    reader.readAsDataURL(file)
  }
  renderHTML(text) {
    // æ¨¡æ‹Ÿå¼‚æ­¥æ¸²æŸ“Markdown
    return new Promise((resolve) => {
      setTimeout(() => {
        resolve(this.mdParser.render(text))
      }, 1000)
    })
  }
  handleGetMdValue = () => {   
    this.mdEditor && alert(this.mdEditor.getMdValue())      
  }
  handleGetHtmlValue = () => {    
    this.mdEditor && alert(this.mdEditor.getHtmlValue())
  }
  render() {
    return (      
      <div>
        <nav>
          <button onClick={this.handleGetMdValue} >getMdValue</button>  
          <button onClick={this.handleGetHtmlValue} >getHtmlValue</button>  
        </nav>
        <section style="height: 500px">
          <MdEditor 
            ref={node => this.mdEditor = node}
            value={MOCK_DATA}
            style={{height: '400px'}}
            renderHTML={this.renderHTML}
            config={{
              view: {
                menu: true,
                md: true,
                html: true
              },
              imageUrl: 'https://octodex.github.com/images/minion.png'
            }}
            onChange={this.handleEditorChange} 
            onImageUpload={this.handleImageUpload}
          />
        </section>                        
      </div>      
    )
  }
}
```

### æœ€åŽ

   æ¬¢è¿Žå¤§å®¶ä½¿ç”¨å’Œåé¦ˆï¼Œ[é¡¹ç›®åœ°å€](https://github.com/HarryChen0506/react-markdown-editor-lite) (https://github.com/HarryChen0506/react-markdown-editor-lite)ï¼Œ ä½ çš„ç‚¹èµžå°†æ˜¯æˆ‘èŽ«å¤§çš„åŠ¨åŠ›ðŸ˜Š

![1.png](https://s3.ca-central-1.amazonaws.com/res-blog-public/res-dev/blog_1636946743939_1.png)', firstPicture='', viewCount=0, createDate='Sun Nov 07 14:09:29 EST 2021', updateDate='Sun Nov 14 22:31:50 EST 2021'}}, total=null}
2021-11-14 22:33:19:586 [http-nio-8081-exec-9] INFO  com.ivan.sunnyblog.web.aop.ControllerAspect *** Request Success ***: 8ms GET URI=/api/admin/article, methodName=com.ivan.sunnyblog.web.controller.ArticleController.getArticleList, args=[SearchVo{page=1, limit=20, categoryId=null, total=null}], result=ResultInfo{info='null', status=0, data=[ArticleVo{userInfo=UserInfoVo{userId=100001, nickName='ivan', userName='ivan'}, category=CategoryVo{categoryId=1, name='Life ', articleCount=null}, BaseArticleVo{articleId=10005, status=1, title='dd', description='This is the doc of React markdown editor lite.
Enjoy!!', content='null', firstPicture='', viewCount=0, createDate='Sun Nov 07 14:09:29 EST 2021', updateDate='Sun Nov 14 22:31:50 EST 2021'}}, ArticleVo{userInfo=UserInfoVo{userId=100001, nickName='ivan', userName='ivan'}, category=CategoryVo{categoryId=2, name='liddffd', articleCount=null}, BaseArticleVo{articleId=10004, status=1, title='Spring boot', description='rerwerwer', content='null', firstPicture='null', viewCount=4, createDate='Tue Oct 12 15:58:26 EDT 2021', updateDate='Fri Nov 12 00:48:00 EST 2021'}}, ArticleVo{userInfo=UserInfoVo{userId=100001, nickName='ivan', userName='ivan'}, category=CategoryVo{categoryId=1, name='Life ', articleCount=null}, BaseArticleVo{articleId=10003, status=0, title='dd', description='test', content='null', firstPicture='null', viewCount=0, createDate='Tue Oct 12 15:57:33 EDT 2021', updateDate='Tue Oct 12 15:57:33 EDT 2021'}}], total=null}
2021-11-14 22:33:25:104 [http-nio-8081-exec-5] INFO  com.ivan.sunnyblog.web.aop.ControllerAspect *** Request Success ***: 1ms GET URI=/api/admin/category, methodName=com.ivan.sunnyblog.web.controller.CategoryContoller.getCategoryList, args=[SearchVo{page=1, limit=10, categoryId=null, total=null}], result=ResultInfo{info='null', status=0, data=[Category (1, Life ), Category (2, liddffd)], total=null}
2021-11-14 22:33:25:107 [http-nio-8081-exec-1] INFO  com.ivan.sunnyblog.web.aop.ControllerAspect *** Request Success ***: 4ms GET URI=/api/admin/article/10005, methodName=com.ivan.sunnyblog.web.controller.ArticleController.getArticleDetail, args=[10005], result=ResultInfo{info='null', status=0, data=ArticleDetailVo{categoryId=1, BaseArticleVo{articleId=10005, status=1, title='dd', description='This is the doc of React markdown editor lite.
Enjoy!!', content='| Head | Head | Head | Head |
| --- | --- | --- | --- |
| Data | Data | Data | Data |
| Data | Data | Data | Data |

## æ‰‹æŠŠæ‰‹æ•™ä½ å†™ä¸€ä¸ªmarkdownç¼–è¾‘å™¨

> ç¬”è€…åœ¨18å¹´å¹´æœ«çš„æ—¶å€™æŽ¥åˆ°ä¸€ä¸ªå¼€å‘ä»»åŠ¡â€”â€”æ­å»ºä¸€ä¸ªAIé¡¹ç›®çš„å¼€æ”¾å¹³å°ï¼Œå…¶ä¸­çš„äº§å“æ–‡æ¡£ä¸ºè½¬åŒ–ä¸ºHTMLæ ¼å¼çš„markdownæ–‡æ¡£ã€‚è€ƒè™‘åˆ°æ–‡æ¡£çš„å³æ—¶æ›´æ–°ï¼Œå°†æ–‡æ¡£ä¿¡æ¯åšæˆäº†AjaxæŽ¥å£çš„å½¢å¼ã€‚å› æ­¤ç®¡ç†åŽå°åªéœ€å°†textareaè¡¨å•çš„å†…å®¹é€šè¿‡markdownè§£æžå™¨è¿›è¡ŒHTMLæ ¼å¼è½¬åŒ–ï¼Œç„¶åŽå°†markdownå†…å®¹å’Œç»è½¬åŒ–çš„HTMLæ–‡æ¡£éƒ½ä¿å­˜åˆ°æ•°æ®åº“å³å¯ã€‚
> åŸºæœ¬éœ€æ±‚å®ŒæˆåŽï¼Œä¸ºäº†æ›´å¥½çš„ç”¨æˆ·ä½“éªŒï¼Œè€ƒè™‘å°†å¸¸ç”¨çš„ç¼–è¾‘åŠŸèƒ½æ·»åŠ è¿›æ¥ã€‚æ”¹è¿›ç‰ˆä¸ä»…æ”¯æŒäº†å¸¸ç”¨çš„æ–‡æœ¬ç¼–è¾‘åŠŸèƒ½ï¼Œè¿˜å®žçŽ°çš„UIç•Œé¢çš„é…ç½®åŒ–ï¼Œè‡ªå®šä¹‰è¯­æ³•è§£æžå™¨ã€‚æœ¬ç€é€ ç¦ä¼¸æ‰‹å…šçš„ç›®çš„ï¼Œä»¥åŠç§¯ç´¯äº›å¼€æºç»éªŒï¼Œç¬”è€…å°†è¯¥react ç»„ä»¶ [react-markdown-editor-lite](https://github.com/HarryChen0506/react-markdown-editor-lite) è¿›è¡Œäº†å°è£…æ”¹é€ ï¼Œå¹¶ä¸”å‘å¸ƒåˆ°äº†å¼€æºç¤¾åŒºã€‚

### é¢„è§ˆ
åœ¨çº¿ä½“éªŒ [https://harrychen0506.github.io/react-markdown-editor-lite/](https://harrychen0506.github.io/react-markdown-editor-lite/)

![image](https://github.com//HarryChen0506/react-markdown-editor-lite/blob/master/image/react-markdown-editor-lite-v1.0.0.PNG?raw=true)

### ç‰¹ç‚¹
* è½»é‡ã€åŸºäºŽReact
* UIå¯é…ç½®, å¦‚åªæ˜¾ç¤ºç¼–è¾‘åŒºæˆ–é¢„è§ˆåŒº
* æ”¯æŒè‡ªå®šä¹‰markdownè¯­æ³•è§£æžå™¨,è¯­æ³•é«˜äº®ç­‰
* æ”¯æŒå¸¸ç”¨çš„markdownç¼–è¾‘åŠŸèƒ½ï¼Œå¦‚åŠ ç²—ï¼Œæ–œä½“ç­‰ç­‰...
* æ”¯æŒåŠŸèƒ½æŒ‰é’®æ’æ‹”åŒ–ï¼Œç”¨æˆ·å¯ä»¥è‡ªå®šä¹‰æ‰©å±•ç»„ä»¶
* æ”¯æŒç¼–è¾‘åŒºå’Œé¢„è§ˆåŒºåŒæ­¥æ»šåŠ¨

### å¼€å‘å¿ƒå¾—

- æ–‡æœ¬ç¼–è¾‘

  å¤§å¤šæ•°å¸¸è§çš„ç¼–è¾‘å™¨ï¼ŒåŒ…æ‹¬å¯Œæ–‡æœ¬ç¼–è¾‘å™¨ï¼Œåˆ©ç”¨äº†æŸäº›å…ƒç´ å¦‚divçš„contenteditableå±žæ€§ï¼Œé…åˆselectionã€rangeã€execCommandç­‰APIï¼Œå®žçŽ°äº†å¯Œæ–‡æœ¬ç¼–è¾‘åŠŸèƒ½ã€‚è¿™é‡Œé¢çš„å®žçŽ°æ¯”è¾ƒå¤æ‚ï¼Œæ‰€ä»¥æœ‰äº†"[ä¸ºä»€ä¹ˆéƒ½è¯´å¯Œæ–‡æœ¬ç¼–è¾‘å™¨æ˜¯å¤©å‘ï¼Ÿ](https://www.zhihu.com/question/38699645)"è¿™ä¸ªè¯´æ³•ã€‚

  è€Œmarkdownç¼–è¾‘å™¨ï¼Œæ ¸å¿ƒçš„å¤„ç†å†…å®¹ä¸ºç®€å•è¯­æ³•çš„çº¯æ–‡æœ¬ï¼Œå¤æ‚åº¦ç›¸å¯¹æ¥è¯´æ¯”è¾ƒä½Žï¼Œå¹¶ä¸”inputæ ‡ç­¾è‡ªå¸¦onSelectäº‹ä»¶ï¼Œå¯ä»¥å¾ˆæ–¹ä¾¿çš„èŽ·å–é€‰æ‹©ä¿¡æ¯ï¼ˆé€‰æ‹©èµ·å§‹ä½ç½®å’Œé€‰æ‹©æ–‡æœ¬å€¼ï¼‰ï¼Œå› æ­¤è¦æƒ³å®žçŽ°ç¼–è¾‘åŠŸèƒ½ï¼Œåªéœ€å°†è¦æ”¹åŠ¨çš„å†…å®¹è¿›è¡Œæ–‡æœ¬è½¬æ¢ï¼Œç„¶åŽè¿›è¡Œé‡æ–°æ‹¼æŽ¥é¦–å°¾ï¼Œå¤§åŠŸå‘Šæˆã€‚
  
- markdownè§£æž

  è€ƒå¯Ÿäº†å‡ ä¸ªç¤¾åŒºæµè¡Œçš„markdownè§£æžå™¨ï¼Œæ¯”è¾ƒæµè¡Œçš„æœ‰[markdown](https://www.npmjs.com/package/markdown), [markdown-it](https://www.npmjs.com/package/markdown-it), [marked](https://www.npmjs.com/package/marked) ç­‰ç­‰ã€‚ç»¼åˆè€ƒè™‘æ‰©å±•æ€§ä»¥åŠç¨³å®šæ€§ï¼Œç¬”è€…æŽ¨èä½¿ç”¨markdown-itä½œä¸ºmarkdownçš„è¯æ³•è§£æžå™¨ï¼Œå› ä¸ºè¯¥è§£æžå™¨æœ‰æ¯”è¾ƒå¤šçš„æ’ä»¶ï¼Œå¹¶ä¸”æ”¯æŒè¯­æ³•é«˜äº®ã€‚

- åŒæ­¥æ»šåŠ¨

  å½“é€‰æ‹©åˆ†æ ç¼–è¾‘çš„æ—¶å€™ï¼Œæ»šåŠ¨å·¦ä¾§çš„ç¼–è¾‘åŒºï¼Œå³ä¾§çš„é¢„è§ˆåŒºèƒ½è‡ªåŠ¨æ»šåŠ¨åˆ°å¯¹åº”çš„åŒºåŸŸã€‚æ–¹æ¡ˆå‚è€ƒäº†ã€Š[æ‰‹æŠŠæ‰‹æ•™ä½ ç”¨ 100è¡Œä»£ç å®žçŽ°åŸºäºŽ reactçš„ markdown è¾“å…¥ + å³æ—¶é¢„è§ˆåœ¨çº¿ç¼–è¾‘å™¨ï¼ˆä¸€ï¼‰](https://github.com/accforgit/blog-data/blob/master/%E5%9C%A8%E7%BA%BF%E7%BC%96%E8%BE%91%E5%99%A8/README/README1.md)ã€‹ã€‚åªéœ€å…ˆè®¡ç®—å‡ºè¾“å…¥æ¡†å®¹å™¨å…ƒç´ ä¸Žé¢„è§ˆæ¡†å®¹å™¨å…ƒç´ ä¹‹é—´æœ€å¤§scrollèŒƒå›´çš„æ¯”ä¾‹å€¼ï¼Œç„¶åŽæ ¹æ®ä¸»åŠ¨æ»šåŠ¨å…ƒç´ è‡ªèº«çš„scrollTopåšç›¸åº”çš„æ¯”ä¾‹æ¢ç®—ï¼Œå³å¯çŸ¥é“å¯¹æ–¹åŒºåŸŸçš„scrollTopå€¼ã€‚

- å…³äºŽUI
 
  - é¡¹ç›®çš„å­—ä½“åº“é€‰æ‹©äº†Font Awesomeé£Žæ ¼ï¼Œå¹¶ä¸”åªé€‰å–äº†é¡¹ç›®æ‰€éœ€è¦çš„ä¸€äº›å›¾æ ‡ã€‚
  - ç¼–è¾‘å™¨çš„æ•´ä½“csså‡å¯é€šè¿‡å…¨å±€è¦†ç›–çš„å½¢å¼è¿›è¡Œè‡ªå®šä¹‰ã€‚ç›®å‰æš‚æ—¶åªæ”¯æŒç°è‰²ä¸»é¢˜ã€‚
  - ç¼–è¾‘å™¨çš„æ˜¾ç¤ºåŒºåŸŸåŒ…æ‹¬èœå•æ ï¼Œç¼–è¾‘å™¨ï¼Œé¢„è§ˆåŒºï¼Œå·¥å…·æ ï¼Œé€šè¿‡é…ç½®ç»„ä»¶çš„configå±žæ€§ï¼Œå¯ä»¥é€‰æ‹©é»˜è®¤çš„å±•ç¤ºåŒºåŸŸã€‚
  
### Install

```js
npm install react-markdown-editor-lite --save
```

### Props

| Property | Description | Type | default | Remarks |
| --- | --- | --- | --- | --- |
| value | markdown content | String | '' | required |
| style | component container style | Object | {height: '100%'} | not required |
| config | component config | Object | {view: {...}, logger: {...}} | not required |
| onChange | emitting when editor has changed | Function | ({html, md}) => {} | not required |
| onImageUpload | when image uploaded, callback emitting will get image markdown text | (file: File, callback: (url: string) => void) => void; | ({file, callback}) => {} | not required |
| renderHTML | Render markdown text to HTML. You can return either string, function or Promise | (text: string) => string|function|Promise | none | **required** |

### Example

``` js
'use strict';
import React from 'react'
import ReactDOM from 'react-dom'
import MdEditor from 'react-markdown-editor-lite'
import MarkdownIt from 'markdown-it'
import emoji from 'markdown-it-emoji'
import subscript from 'markdown-it-sub'
import superscript from 'markdown-it-sup'
import footnote from 'markdown-it-footnote'
import deflist from 'markdown-it-deflist'
import abbreviation from 'markdown-it-abbr'
import insert from 'markdown-it-ins'
import mark from 'markdown-it-mark'
import tasklists from 'markdown-it-task-lists'
import hljs from 'highlight.js'
import 'highlight.js/styles/atom-one-light.css'
// import 'highlight.js/styles/github.css'
import './index.less';

const MOCK_DATA = "I Love React."
export default class Demo extends React.Component {
  mdEditor = null
  mdParser = null
  constructor(props) {
    super(props)
    // initial a parsera
    this.mdParser = new MarkdownIt({
      html: true,
      linkify: true,
      typographer: true,
      highlight: function (str, lang) {
        if (lang && hljs.getLanguage(lang)) {
          try {
            return hljs.highlight(lang, str).value
          } catch (__) {}
        }    
        return '' // use external default escaping
      }
    })
    .use(emoji)
    .use(subscript)
    .use(superscript)
    .use(footnote)
    .use(deflist)
    .use(abbreviation)
    .use(insert)
    .use(mark)
    .use(tasklists, { enabled: this.taskLists })
    this.renderHTML = this.renderHTML.bind(this)
  }
  handleEditorChange({html, md}) {
    console.log('handleEditorChange', html, md)
  }
  handleImageUpload(file, callback) {
    const reader = new FileReader()
    reader.onload = () => {      
      const convertBase64UrlToBlob = (urlData) => {  
        let arr = urlData.split(','), mime = arr[0].match(/:(.*?);/)[1]
        let bstr = atob(arr[1])
        let n = bstr.length
        let u8arr = new Uint8Array(n)
        while (n--) {
          u8arr[n] = bstr.charCodeAt(n)
        }
        return new Blob([u8arr], {type:mime})
      }
      const blob = convertBase64UrlToBlob(reader.result)
      setTimeout(() => {
        // setTimeout æ¨¡æ‹Ÿå¼‚æ­¥ä¸Šä¼ å›¾ç‰‡
        // å½“å¼‚æ­¥ä¸Šä¼ èŽ·å–å›¾ç‰‡åœ°å€åŽï¼Œæ‰§è¡Œcalbackå›žè°ƒï¼ˆå‚æ•°ä¸ºimageUrlå­—ç¬¦ä¸²ï¼‰ï¼Œå³å¯å°†å›¾ç‰‡åœ°å€å†™å…¥markdown
        callback('https://avatars0.githubusercontent.com/u/21263805?s=40&v=4')
      }, 1000)
    }
    reader.readAsDataURL(file)
  }
  renderHTML(text) {
    // æ¨¡æ‹Ÿå¼‚æ­¥æ¸²æŸ“Markdown
    return new Promise((resolve) => {
      setTimeout(() => {
        resolve(this.mdParser.render(text))
      }, 1000)
    })
  }
  handleGetMdValue = () => {   
    this.mdEditor && alert(this.mdEditor.getMdValue())      
  }
  handleGetHtmlValue = () => {    
    this.mdEditor && alert(this.mdEditor.getHtmlValue())
  }
  render() {
    return (      
      <div>
        <nav>
          <button onClick={this.handleGetMdValue} >getMdValue</button>  
          <button onClick={this.handleGetHtmlValue} >getHtmlValue</button>  
        </nav>
        <section style="height: 500px">
          <MdEditor 
            ref={node => this.mdEditor = node}
            value={MOCK_DATA}
            style={{height: '400px'}}
            renderHTML={this.renderHTML}
            config={{
              view: {
                menu: true,
                md: true,
                html: true
              },
              imageUrl: 'https://octodex.github.com/images/minion.png'
            }}
            onChange={this.handleEditorChange} 
            onImageUpload={this.handleImageUpload}
          />
        </section>                        
      </div>      
    )
  }
}
```

### æœ€åŽ

   æ¬¢è¿Žå¤§å®¶ä½¿ç”¨å’Œåé¦ˆï¼Œ[é¡¹ç›®åœ°å€](https://github.com/HarryChen0506/react-markdown-editor-lite) (https://github.com/HarryChen0506/react-markdown-editor-lite)ï¼Œ ä½ çš„ç‚¹èµžå°†æ˜¯æˆ‘èŽ«å¤§çš„åŠ¨åŠ›ðŸ˜Š

![1.png](https://s3.ca-central-1.amazonaws.com/res-blog-public/res-dev/blog_1636946743939_1.png)', firstPicture='', viewCount=0, createDate='Sun Nov 07 14:09:29 EST 2021', updateDate='Sun Nov 14 22:31:50 EST 2021'}}, total=null}
2021-11-14 22:33:28:415 [http-nio-8081-exec-3] INFO  com.ivan.sunnyblog.web.aop.ControllerAspect *** Request Success ***: 9ms GET URI=/api/admin/article, methodName=com.ivan.sunnyblog.web.controller.ArticleController.getArticleList, args=[SearchVo{page=1, limit=20, categoryId=null, total=null}], result=ResultInfo{info='null', status=0, data=[ArticleVo{userInfo=UserInfoVo{userId=100001, nickName='ivan', userName='ivan'}, category=CategoryVo{categoryId=1, name='Life ', articleCount=null}, BaseArticleVo{articleId=10005, status=1, title='dd', description='This is the doc of React markdown editor lite.
Enjoy!!', content='null', firstPicture='', viewCount=0, createDate='Sun Nov 07 14:09:29 EST 2021', updateDate='Sun Nov 14 22:31:50 EST 2021'}}, ArticleVo{userInfo=UserInfoVo{userId=100001, nickName='ivan', userName='ivan'}, category=CategoryVo{categoryId=2, name='liddffd', articleCount=null}, BaseArticleVo{articleId=10004, status=1, title='Spring boot', description='rerwerwer', content='null', firstPicture='null', viewCount=4, createDate='Tue Oct 12 15:58:26 EDT 2021', updateDate='Fri Nov 12 00:48:00 EST 2021'}}, ArticleVo{userInfo=UserInfoVo{userId=100001, nickName='ivan', userName='ivan'}, category=CategoryVo{categoryId=1, name='Life ', articleCount=null}, BaseArticleVo{articleId=10003, status=0, title='dd', description='test', content='null', firstPicture='null', viewCount=0, createDate='Tue Oct 12 15:57:33 EDT 2021', updateDate='Tue Oct 12 15:57:33 EDT 2021'}}], total=null}
2021-11-14 22:33:30:506 [http-nio-8081-exec-7] INFO  com.ivan.sunnyblog.web.aop.ControllerAspect *** Request Success ***: 1ms GET URI=/api/admin/category, methodName=com.ivan.sunnyblog.web.controller.CategoryContoller.getCategoryList, args=[SearchVo{page=1, limit=10, categoryId=null, total=null}], result=ResultInfo{info='null', status=0, data=[Category (1, Life ), Category (2, liddffd)], total=null}
2021-11-14 22:33:30:513 [http-nio-8081-exec-6] INFO  com.ivan.sunnyblog.web.aop.ControllerAspect *** Request Success ***: 6ms GET URI=/api/admin/article/10004, methodName=com.ivan.sunnyblog.web.controller.ArticleController.getArticleDetail, args=[10004], result=ResultInfo{info='null', status=0, data=ArticleDetailVo{categoryId=2, BaseArticleVo{articleId=10004, status=1, title='Spring boot', description='rerwerwer', content='rererer', firstPicture='null', viewCount=4, createDate='Tue Oct 12 15:58:26 EDT 2021', updateDate='Fri Nov 12 00:48:00 EST 2021'}}, total=null}
2021-11-14 22:33:56:214 [http-nio-8081-exec-10] INFO  com.ivan.sunnyblog.web.res.S3ResourceManager uploading file to s3
2021-11-14 22:33:56:613 [http-nio-8081-exec-10] INFO  com.ivan.sunnyblog.web.res.S3ResourceManager uploading done. returned url: https://s3.ca-central-1.amazonaws.com/res-blog-public/res-dev/blog_1636947236214_test.png
2021-11-14 22:33:56:613 [http-nio-8081-exec-10] INFO  com.ivan.sunnyblog.web.aop.ControllerAspect *** Request Success ***: 399ms POST URI=/api/upload, methodName=com.ivan.sunnyblog.web.controller.ResourceController.upload, args=[org.springframework.web.multipart.support.StandardMultipartHttpServletRequest$StandardMultipartFile@c3068], result=ResultInfo{info='null', status=0, data=https://s3.ca-central-1.amazonaws.com/res-blog-public/res-dev/blog_1636947236214_test.png, total=null}
2021-11-14 22:34:34:072 [http-nio-8081-exec-5] INFO  com.ivan.sunnyblog.web.aop.ControllerAspect *** Request Success ***: 2ms GET URI=/api/admin/category, methodName=com.ivan.sunnyblog.web.controller.CategoryContoller.getCategoryList, args=[SearchVo{page=1, limit=10, categoryId=null, total=null}], result=ResultInfo{info='null', status=0, data=[Category (1, Life ), Category (2, liddffd)], total=null}
2021-11-14 22:34:34:074 [http-nio-8081-exec-9] INFO  com.ivan.sunnyblog.web.aop.ControllerAspect *** Request Success ***: 8ms GET URI=/api/admin/article/10004, methodName=com.ivan.sunnyblog.web.controller.ArticleController.getArticleDetail, args=[10004], result=ResultInfo{info='null', status=0, data=ArticleDetailVo{categoryId=2, BaseArticleVo{articleId=10004, status=1, title='Spring boot', description='rerwerwer', content='rererer', firstPicture='null', viewCount=4, createDate='Tue Oct 12 15:58:26 EDT 2021', updateDate='Fri Nov 12 00:48:00 EST 2021'}}, total=null}
2021-11-14 22:34:41:578 [http-nio-8081-exec-1] INFO  com.ivan.sunnyblog.web.res.S3ResourceManager uploading file to s3
2021-11-14 22:34:41:964 [http-nio-8081-exec-1] INFO  com.ivan.sunnyblog.web.res.S3ResourceManager uploading done. returned url: https://s3.ca-central-1.amazonaws.com/res-blog-public/res-dev/blog_1636947281578_test.png
2021-11-14 22:34:41:965 [http-nio-8081-exec-1] INFO  com.ivan.sunnyblog.web.aop.ControllerAspect *** Request Success ***: 387ms POST URI=/api/upload, methodName=com.ivan.sunnyblog.web.controller.ResourceController.upload, args=[org.springframework.web.multipart.support.StandardMultipartHttpServletRequest$StandardMultipartFile@79e28e3], result=ResultInfo{info='null', status=0, data=https://s3.ca-central-1.amazonaws.com/res-blog-public/res-dev/blog_1636947281578_test.png, total=null}
2021-11-14 22:34:56:993 [http-nio-8081-exec-3] INFO  com.ivan.sunnyblog.base.utils.BaseLogger updateing article
2021-11-14 22:34:56:996 [http-nio-8081-exec-3] INFO  com.ivan.sunnyblog.web.aop.ControllerAspect *** Request Success ***: 4ms POST URI=/api/admin/article, methodName=com.ivan.sunnyblog.web.controller.ArticleController.editArticle, args=[ArticleDetailVo{categoryId=2, BaseArticleVo{articleId=10004, status=1, title='Spring boot', description='rerwerwer', content='rererer![test.png](https://s3.ca-central-1.amazonaws.com/res-blog-public/res-dev/blog_1636947281578_test.png)', firstPicture='', viewCount=null, createDate='null', updateDate='null'}}], result=ResultInfo{info='null', status=0, data=null, total=null}
2021-11-14 22:34:57:040 [http-nio-8081-exec-2] INFO  com.ivan.sunnyblog.web.aop.ControllerAspect *** Request Success ***: 1ms GET URI=/api/admin/category, methodName=com.ivan.sunnyblog.web.controller.CategoryContoller.getCategoryList, args=[SearchVo{page=1, limit=10, categoryId=null, total=null}], result=ResultInfo{info='null', status=0, data=[Category (1, Life ), Category (2, liddffd)], total=null}
2021-11-14 22:35:02:689 [http-nio-8081-exec-7] INFO  com.ivan.sunnyblog.web.aop.ControllerAspect *** Request Success ***: 1ms GET URI=/api/admin/category, methodName=com.ivan.sunnyblog.web.controller.CategoryContoller.getCategoryList, args=[SearchVo{page=1, limit=10, categoryId=null, total=null}], result=ResultInfo{info='null', status=0, data=[Category (1, Life ), Category (2, liddffd)], total=null}
2021-11-14 22:35:07:697 [http-nio-8081-exec-6] INFO  com.ivan.sunnyblog.web.aop.ControllerAspect *** Request Success ***: 9ms GET URI=/api/articles, methodName=com.ivan.sunnyblog.web.controller.ArticleController.getPublicArticles, args=[SearchVo{page=1, limit=10, categoryId=null, total=null}], result=ResultInfo{info='null', status=0, data=[ArticleVo{userInfo=UserInfoVo{userId=100001, nickName='ivan', userName='ivan'}, category=CategoryVo{categoryId=1, name='Life ', articleCount=null}, BaseArticleVo{articleId=10005, status=1, title='dd', description='This is the doc of React markdown editor lite.
Enjoy!!', content='null', firstPicture='', viewCount=0, createDate='Sun Nov 07 14:09:29 EST 2021', updateDate='Sun Nov 14 22:31:50 EST 2021'}}, ArticleVo{userInfo=UserInfoVo{userId=100001, nickName='ivan', userName='ivan'}, category=CategoryVo{categoryId=2, name='liddffd', articleCount=null}, BaseArticleVo{articleId=10004, status=1, title='Spring boot', description='rerwerwer', content='null', firstPicture='', viewCount=4, createDate='Tue Oct 12 15:58:26 EDT 2021', updateDate='Sun Nov 14 22:34:56 EST 2021'}}], total=2}
2021-11-14 22:35:11:743 [http-nio-8081-exec-10] INFO  com.ivan.sunnyblog.web.aop.ControllerAspect *** Request Success ***: 3ms GET URI=/api/article/10004, methodName=com.ivan.sunnyblog.web.controller.ArticleController.getPublicArticleDetail, args=[10004], result=ResultInfo{info='null', status=0, data=ArticleDetailVo{categoryId=2, BaseArticleVo{articleId=10004, status=1, title='Spring boot', description='rerwerwer', content='rererer![test.png](https://s3.ca-central-1.amazonaws.com/res-blog-public/res-dev/blog_1636947281578_test.png)', firstPicture='', viewCount=4, createDate='Tue Oct 12 15:58:26 EDT 2021', updateDate='Sun Nov 14 22:34:56 EST 2021'}}, total=null}
2021-11-14 22:37:02:689 [http-nio-8081-exec-9] INFO  com.ivan.sunnyblog.web.aop.ControllerAspect *** Request Success ***: 11ms GET URI=/api/articles, methodName=com.ivan.sunnyblog.web.controller.ArticleController.getPublicArticles, args=[SearchVo{page=1, limit=10, categoryId=null, total=null}], result=ResultInfo{info='null', status=0, data=[ArticleVo{userInfo=UserInfoVo{userId=100001, nickName='ivan', userName='ivan'}, category=CategoryVo{categoryId=1, name='Life ', articleCount=null}, BaseArticleVo{articleId=10005, status=1, title='dd', description='This is the doc of React markdown editor lite.
Enjoy!!', content='null', firstPicture='', viewCount=0, createDate='Sun Nov 07 14:09:29 EST 2021', updateDate='Sun Nov 14 22:31:50 EST 2021'}}, ArticleVo{userInfo=UserInfoVo{userId=100001, nickName='ivan', userName='ivan'}, category=CategoryVo{categoryId=2, name='liddffd', articleCount=null}, BaseArticleVo{articleId=10004, status=1, title='Spring boot', description='rerwerwer', content='null', firstPicture='', viewCount=4, createDate='Tue Oct 12 15:58:26 EDT 2021', updateDate='Sun Nov 14 22:34:56 EST 2021'}}], total=2}
2021-11-14 22:37:04:186 [http-nio-8081-exec-1] INFO  com.ivan.sunnyblog.web.aop.ControllerAspect *** Request Success ***: 5ms GET URI=/api/article/10005, methodName=com.ivan.sunnyblog.web.controller.ArticleController.getPublicArticleDetail, args=[10005], result=ResultInfo{info='null', status=0, data=ArticleDetailVo{categoryId=1, BaseArticleVo{articleId=10005, status=1, title='dd', description='This is the doc of React markdown editor lite.
Enjoy!!', content='| Head | Head | Head | Head |
| --- | --- | --- | --- |
| Data | Data | Data | Data |
| Data | Data | Data | Data |

## æ‰‹æŠŠæ‰‹æ•™ä½ å†™ä¸€ä¸ªmarkdownç¼–è¾‘å™¨

> ç¬”è€…åœ¨18å¹´å¹´æœ«çš„æ—¶å€™æŽ¥åˆ°ä¸€ä¸ªå¼€å‘ä»»åŠ¡â€”â€”æ­å»ºä¸€ä¸ªAIé¡¹ç›®çš„å¼€æ”¾å¹³å°ï¼Œå…¶ä¸­çš„äº§å“æ–‡æ¡£ä¸ºè½¬åŒ–ä¸ºHTMLæ ¼å¼çš„markdownæ–‡æ¡£ã€‚è€ƒè™‘åˆ°æ–‡æ¡£çš„å³æ—¶æ›´æ–°ï¼Œå°†æ–‡æ¡£ä¿¡æ¯åšæˆäº†AjaxæŽ¥å£çš„å½¢å¼ã€‚å› æ­¤ç®¡ç†åŽå°åªéœ€å°†textareaè¡¨å•çš„å†…å®¹é€šè¿‡markdownè§£æžå™¨è¿›è¡ŒHTMLæ ¼å¼è½¬åŒ–ï¼Œç„¶åŽå°†markdownå†…å®¹å’Œç»è½¬åŒ–çš„HTMLæ–‡æ¡£éƒ½ä¿å­˜åˆ°æ•°æ®åº“å³å¯ã€‚
> åŸºæœ¬éœ€æ±‚å®ŒæˆåŽï¼Œä¸ºäº†æ›´å¥½çš„ç”¨æˆ·ä½“éªŒï¼Œè€ƒè™‘å°†å¸¸ç”¨çš„ç¼–è¾‘åŠŸèƒ½æ·»åŠ è¿›æ¥ã€‚æ”¹è¿›ç‰ˆä¸ä»…æ”¯æŒäº†å¸¸ç”¨çš„æ–‡æœ¬ç¼–è¾‘åŠŸèƒ½ï¼Œè¿˜å®žçŽ°çš„UIç•Œé¢çš„é…ç½®åŒ–ï¼Œè‡ªå®šä¹‰è¯­æ³•è§£æžå™¨ã€‚æœ¬ç€é€ ç¦ä¼¸æ‰‹å…šçš„ç›®çš„ï¼Œä»¥åŠç§¯ç´¯äº›å¼€æºç»éªŒï¼Œç¬”è€…å°†è¯¥react ç»„ä»¶ [react-markdown-editor-lite](https://github.com/HarryChen0506/react-markdown-editor-lite) è¿›è¡Œäº†å°è£…æ”¹é€ ï¼Œå¹¶ä¸”å‘å¸ƒåˆ°äº†å¼€æºç¤¾åŒºã€‚

### é¢„è§ˆ
åœ¨çº¿ä½“éªŒ [https://harrychen0506.github.io/react-markdown-editor-lite/](https://harrychen0506.github.io/react-markdown-editor-lite/)

![image](https://github.com//HarryChen0506/react-markdown-editor-lite/blob/master/image/react-markdown-editor-lite-v1.0.0.PNG?raw=true)

### ç‰¹ç‚¹
* è½»é‡ã€åŸºäºŽReact
* UIå¯é…ç½®, å¦‚åªæ˜¾ç¤ºç¼–è¾‘åŒºæˆ–é¢„è§ˆåŒº
* æ”¯æŒè‡ªå®šä¹‰markdownè¯­æ³•è§£æžå™¨,è¯­æ³•é«˜äº®ç­‰
* æ”¯æŒå¸¸ç”¨çš„markdownç¼–è¾‘åŠŸèƒ½ï¼Œå¦‚åŠ ç²—ï¼Œæ–œä½“ç­‰ç­‰...
* æ”¯æŒåŠŸèƒ½æŒ‰é’®æ’æ‹”åŒ–ï¼Œç”¨æˆ·å¯ä»¥è‡ªå®šä¹‰æ‰©å±•ç»„ä»¶
* æ”¯æŒç¼–è¾‘åŒºå’Œé¢„è§ˆåŒºåŒæ­¥æ»šåŠ¨

### å¼€å‘å¿ƒå¾—

- æ–‡æœ¬ç¼–è¾‘

  å¤§å¤šæ•°å¸¸è§çš„ç¼–è¾‘å™¨ï¼ŒåŒ…æ‹¬å¯Œæ–‡æœ¬ç¼–è¾‘å™¨ï¼Œåˆ©ç”¨äº†æŸäº›å…ƒç´ å¦‚divçš„contenteditableå±žæ€§ï¼Œé…åˆselectionã€rangeã€execCommandç­‰APIï¼Œå®žçŽ°äº†å¯Œæ–‡æœ¬ç¼–è¾‘åŠŸèƒ½ã€‚è¿™é‡Œé¢çš„å®žçŽ°æ¯”è¾ƒå¤æ‚ï¼Œæ‰€ä»¥æœ‰äº†"[ä¸ºä»€ä¹ˆéƒ½è¯´å¯Œæ–‡æœ¬ç¼–è¾‘å™¨æ˜¯å¤©å‘ï¼Ÿ](https://www.zhihu.com/question/38699645)"è¿™ä¸ªè¯´æ³•ã€‚

  è€Œmarkdownç¼–è¾‘å™¨ï¼Œæ ¸å¿ƒçš„å¤„ç†å†…å®¹ä¸ºç®€å•è¯­æ³•çš„çº¯æ–‡æœ¬ï¼Œå¤æ‚åº¦ç›¸å¯¹æ¥è¯´æ¯”è¾ƒä½Žï¼Œå¹¶ä¸”inputæ ‡ç­¾è‡ªå¸¦onSelectäº‹ä»¶ï¼Œå¯ä»¥å¾ˆæ–¹ä¾¿çš„èŽ·å–é€‰æ‹©ä¿¡æ¯ï¼ˆé€‰æ‹©èµ·å§‹ä½ç½®å’Œé€‰æ‹©æ–‡æœ¬å€¼ï¼‰ï¼Œå› æ­¤è¦æƒ³å®žçŽ°ç¼–è¾‘åŠŸèƒ½ï¼Œåªéœ€å°†è¦æ”¹åŠ¨çš„å†…å®¹è¿›è¡Œæ–‡æœ¬è½¬æ¢ï¼Œç„¶åŽè¿›è¡Œé‡æ–°æ‹¼æŽ¥é¦–å°¾ï¼Œå¤§åŠŸå‘Šæˆã€‚
  
- markdownè§£æž

  è€ƒå¯Ÿäº†å‡ ä¸ªç¤¾åŒºæµè¡Œçš„markdownè§£æžå™¨ï¼Œæ¯”è¾ƒæµè¡Œçš„æœ‰[markdown](https://www.npmjs.com/package/markdown), [markdown-it](https://www.npmjs.com/package/markdown-it), [marked](https://www.npmjs.com/package/marked) ç­‰ç­‰ã€‚ç»¼åˆè€ƒè™‘æ‰©å±•æ€§ä»¥åŠç¨³å®šæ€§ï¼Œç¬”è€…æŽ¨èä½¿ç”¨markdown-itä½œä¸ºmarkdownçš„è¯æ³•è§£æžå™¨ï¼Œå› ä¸ºè¯¥è§£æžå™¨æœ‰æ¯”è¾ƒå¤šçš„æ’ä»¶ï¼Œå¹¶ä¸”æ”¯æŒè¯­æ³•é«˜äº®ã€‚

- åŒæ­¥æ»šåŠ¨

  å½“é€‰æ‹©åˆ†æ ç¼–è¾‘çš„æ—¶å€™ï¼Œæ»šåŠ¨å·¦ä¾§çš„ç¼–è¾‘åŒºï¼Œå³ä¾§çš„é¢„è§ˆåŒºèƒ½è‡ªåŠ¨æ»šåŠ¨åˆ°å¯¹åº”çš„åŒºåŸŸã€‚æ–¹æ¡ˆå‚è€ƒäº†ã€Š[æ‰‹æŠŠæ‰‹æ•™ä½ ç”¨ 100è¡Œä»£ç å®žçŽ°åŸºäºŽ reactçš„ markdown è¾“å…¥ + å³æ—¶é¢„è§ˆåœ¨çº¿ç¼–è¾‘å™¨ï¼ˆä¸€ï¼‰](https://github.com/accforgit/blog-data/blob/master/%E5%9C%A8%E7%BA%BF%E7%BC%96%E8%BE%91%E5%99%A8/README/README1.md)ã€‹ã€‚åªéœ€å…ˆè®¡ç®—å‡ºè¾“å…¥æ¡†å®¹å™¨å…ƒç´ ä¸Žé¢„è§ˆæ¡†å®¹å™¨å…ƒç´ ä¹‹é—´æœ€å¤§scrollèŒƒå›´çš„æ¯”ä¾‹å€¼ï¼Œç„¶åŽæ ¹æ®ä¸»åŠ¨æ»šåŠ¨å…ƒç´ è‡ªèº«çš„scrollTopåšç›¸åº”çš„æ¯”ä¾‹æ¢ç®—ï¼Œå³å¯çŸ¥é“å¯¹æ–¹åŒºåŸŸçš„scrollTopå€¼ã€‚

- å…³äºŽUI
 
  - é¡¹ç›®çš„å­—ä½“åº“é€‰æ‹©äº†Font Awesomeé£Žæ ¼ï¼Œå¹¶ä¸”åªé€‰å–äº†é¡¹ç›®æ‰€éœ€è¦çš„ä¸€äº›å›¾æ ‡ã€‚
  - ç¼–è¾‘å™¨çš„æ•´ä½“csså‡å¯é€šè¿‡å…¨å±€è¦†ç›–çš„å½¢å¼è¿›è¡Œè‡ªå®šä¹‰ã€‚ç›®å‰æš‚æ—¶åªæ”¯æŒç°è‰²ä¸»é¢˜ã€‚
  - ç¼–è¾‘å™¨çš„æ˜¾ç¤ºåŒºåŸŸåŒ…æ‹¬èœå•æ ï¼Œç¼–è¾‘å™¨ï¼Œé¢„è§ˆåŒºï¼Œå·¥å…·æ ï¼Œé€šè¿‡é…ç½®ç»„ä»¶çš„configå±žæ€§ï¼Œå¯ä»¥é€‰æ‹©é»˜è®¤çš„å±•ç¤ºåŒºåŸŸã€‚
  
### Install

```js
npm install react-markdown-editor-lite --save
```

### Props

| Property | Description | Type | default | Remarks |
| --- | --- | --- | --- | --- |
| value | markdown content | String | '' | required |
| style | component container style | Object | {height: '100%'} | not required |
| config | component config | Object | {view: {...}, logger: {...}} | not required |
| onChange | emitting when editor has changed | Function | ({html, md}) => {} | not required |
| onImageUpload | when image uploaded, callback emitting will get image markdown text | (file: File, callback: (url: string) => void) => void; | ({file, callback}) => {} | not required |
| renderHTML | Render markdown text to HTML. You can return either string, function or Promise | (text: string) => string|function|Promise | none | **required** |

### Example

``` js
'use strict';
import React from 'react'
import ReactDOM from 'react-dom'
import MdEditor from 'react-markdown-editor-lite'
import MarkdownIt from 'markdown-it'
import emoji from 'markdown-it-emoji'
import subscript from 'markdown-it-sub'
import superscript from 'markdown-it-sup'
import footnote from 'markdown-it-footnote'
import deflist from 'markdown-it-deflist'
import abbreviation from 'markdown-it-abbr'
import insert from 'markdown-it-ins'
import mark from 'markdown-it-mark'
import tasklists from 'markdown-it-task-lists'
import hljs from 'highlight.js'
import 'highlight.js/styles/atom-one-light.css'
// import 'highlight.js/styles/github.css'
import './index.less';

const MOCK_DATA = "I Love React."
export default class Demo extends React.Component {
  mdEditor = null
  mdParser = null
  constructor(props) {
    super(props)
    // initial a parsera
    this.mdParser = new MarkdownIt({
      html: true,
      linkify: true,
      typographer: true,
      highlight: function (str, lang) {
        if (lang && hljs.getLanguage(lang)) {
          try {
            return hljs.highlight(lang, str).value
          } catch (__) {}
        }    
        return '' // use external default escaping
      }
    })
    .use(emoji)
    .use(subscript)
    .use(superscript)
    .use(footnote)
    .use(deflist)
    .use(abbreviation)
    .use(insert)
    .use(mark)
    .use(tasklists, { enabled: this.taskLists })
    this.renderHTML = this.renderHTML.bind(this)
  }
  handleEditorChange({html, md}) {
    console.log('handleEditorChange', html, md)
  }
  handleImageUpload(file, callback) {
    const reader = new FileReader()
    reader.onload = () => {      
      const convertBase64UrlToBlob = (urlData) => {  
        let arr = urlData.split(','), mime = arr[0].match(/:(.*?);/)[1]
        let bstr = atob(arr[1])
        let n = bstr.length
        let u8arr = new Uint8Array(n)
        while (n--) {
          u8arr[n] = bstr.charCodeAt(n)
        }
        return new Blob([u8arr], {type:mime})
      }
      const blob = convertBase64UrlToBlob(reader.result)
      setTimeout(() => {
        // setTimeout æ¨¡æ‹Ÿå¼‚æ­¥ä¸Šä¼ å›¾ç‰‡
        // å½“å¼‚æ­¥ä¸Šä¼ èŽ·å–å›¾ç‰‡åœ°å€åŽï¼Œæ‰§è¡Œcalbackå›žè°ƒï¼ˆå‚æ•°ä¸ºimageUrlå­—ç¬¦ä¸²ï¼‰ï¼Œå³å¯å°†å›¾ç‰‡åœ°å€å†™å…¥markdown
        callback('https://avatars0.githubusercontent.com/u/21263805?s=40&v=4')
      }, 1000)
    }
    reader.readAsDataURL(file)
  }
  renderHTML(text) {
    // æ¨¡æ‹Ÿå¼‚æ­¥æ¸²æŸ“Markdown
    return new Promise((resolve) => {
      setTimeout(() => {
        resolve(this.mdParser.render(text))
      }, 1000)
    })
  }
  handleGetMdValue = () => {   
    this.mdEditor && alert(this.mdEditor.getMdValue())      
  }
  handleGetHtmlValue = () => {    
    this.mdEditor && alert(this.mdEditor.getHtmlValue())
  }
  render() {
    return (      
      <div>
        <nav>
          <button onClick={this.handleGetMdValue} >getMdValue</button>  
          <button onClick={this.handleGetHtmlValue} >getHtmlValue</button>  
        </nav>
        <section style="height: 500px">
          <MdEditor 
            ref={node => this.mdEditor = node}
            value={MOCK_DATA}
            style={{height: '400px'}}
            renderHTML={this.renderHTML}
            config={{
              view: {
                menu: true,
                md: true,
                html: true
              },
              imageUrl: 'https://octodex.github.com/images/minion.png'
            }}
            onChange={this.handleEditorChange} 
            onImageUpload={this.handleImageUpload}
          />
        </section>                        
      </div>      
    )
  }
}
```

### æœ€åŽ

   æ¬¢è¿Žå¤§å®¶ä½¿ç”¨å’Œåé¦ˆï¼Œ[é¡¹ç›®åœ°å€](https://github.com/HarryChen0506/react-markdown-editor-lite) (https://github.com/HarryChen0506/react-markdown-editor-lite)ï¼Œ ä½ çš„ç‚¹èµžå°†æ˜¯æˆ‘èŽ«å¤§çš„åŠ¨åŠ›ðŸ˜Š

![1.png](https://s3.ca-central-1.amazonaws.com/res-blog-public/res-dev/blog_1636946743939_1.png)', firstPicture='', viewCount=0, createDate='Sun Nov 07 14:09:29 EST 2021', updateDate='Sun Nov 14 22:31:50 EST 2021'}}, total=null}
2021-11-14 22:37:08:458 [http-nio-8081-exec-3] INFO  com.ivan.sunnyblog.web.aop.ControllerAspect *** Request Success ***: 6ms GET URI=/api/articles, methodName=com.ivan.sunnyblog.web.controller.ArticleController.getPublicArticles, args=[SearchVo{page=1, limit=10, categoryId=null, total=null}], result=ResultInfo{info='null', status=0, data=[ArticleVo{userInfo=UserInfoVo{userId=100001, nickName='ivan', userName='ivan'}, category=CategoryVo{categoryId=1, name='Life ', articleCount=null}, BaseArticleVo{articleId=10005, status=1, title='dd', description='This is the doc of React markdown editor lite.
Enjoy!!', content='null', firstPicture='', viewCount=0, createDate='Sun Nov 07 14:09:29 EST 2021', updateDate='Sun Nov 14 22:31:50 EST 2021'}}, ArticleVo{userInfo=UserInfoVo{userId=100001, nickName='ivan', userName='ivan'}, category=CategoryVo{categoryId=2, name='liddffd', articleCount=null}, BaseArticleVo{articleId=10004, status=1, title='Spring boot', description='rerwerwer', content='null', firstPicture='', viewCount=4, createDate='Tue Oct 12 15:58:26 EDT 2021', updateDate='Sun Nov 14 22:34:56 EST 2021'}}], total=2}
2021-11-14 22:37:09:548 [http-nio-8081-exec-2] INFO  com.ivan.sunnyblog.web.aop.ControllerAspect *** Request Success ***: 3ms GET URI=/api/article/10004, methodName=com.ivan.sunnyblog.web.controller.ArticleController.getPublicArticleDetail, args=[10004], result=ResultInfo{info='null', status=0, data=ArticleDetailVo{categoryId=2, BaseArticleVo{articleId=10004, status=1, title='Spring boot', description='rerwerwer', content='rererer![test.png](https://s3.ca-central-1.amazonaws.com/res-blog-public/res-dev/blog_1636947281578_test.png)', firstPicture='', viewCount=4, createDate='Tue Oct 12 15:58:26 EDT 2021', updateDate='Sun Nov 14 22:34:56 EST 2021'}}, total=null}
2021-11-14 22:37:11:900 [http-nio-8081-exec-7] INFO  com.ivan.sunnyblog.web.aop.ControllerAspect *** Request Success ***: 6ms GET URI=/api/articles, methodName=com.ivan.sunnyblog.web.controller.ArticleController.getPublicArticles, args=[SearchVo{page=1, limit=10, categoryId=null, total=null}], result=ResultInfo{info='null', status=0, data=[ArticleVo{userInfo=UserInfoVo{userId=100001, nickName='ivan', userName='ivan'}, category=CategoryVo{categoryId=1, name='Life ', articleCount=null}, BaseArticleVo{articleId=10005, status=1, title='dd', description='This is the doc of React markdown editor lite.
Enjoy!!', content='null', firstPicture='', viewCount=0, createDate='Sun Nov 07 14:09:29 EST 2021', updateDate='Sun Nov 14 22:31:50 EST 2021'}}, ArticleVo{userInfo=UserInfoVo{userId=100001, nickName='ivan', userName='ivan'}, category=CategoryVo{categoryId=2, name='liddffd', articleCount=null}, BaseArticleVo{articleId=10004, status=1, title='Spring boot', description='rerwerwer', content='null', firstPicture='', viewCount=4, createDate='Tue Oct 12 15:58:26 EDT 2021', updateDate='Sun Nov 14 22:34:56 EST 2021'}}], total=2}
2021-11-14 22:37:15:931 [Thread-72] INFO  org.springframework.scheduling.concurrent.ThreadPoolTaskScheduler Shutting down ExecutorService 'taskScheduler'
2021-11-14 22:37:15:932 [Thread-72] INFO  org.springframework.scheduling.concurrent.ThreadPoolTaskExecutor Shutting down ExecutorService 'applicationTaskExecutor'
2021-11-14 22:37:15:933 [Thread-72] INFO  com.zaxxer.hikari.HikariDataSource HikariPool-1 - Shutdown initiated...
2021-11-14 22:37:15:935 [Thread-72] INFO  com.zaxxer.hikari.HikariDataSource HikariPool-1 - Shutdown completed.
